{"ast":null,"code":"// iptvService.js - VERSION ME DIAGNOSTIKË TË DETAJUAR\n\n// Funksion për të kontrolluar proxy server\nexport const checkProxyServer = async () => {\n  try {\n    console.log('Checking proxy server status...');\n\n    // Provoni të kontaktoni proxy server\n    const response = await fetch('/api/health', {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json'\n      }\n    }).catch(() => null);\n    if (!response) {\n      return {\n        available: false,\n        message: 'Proxy server nuk është i arritshëm. Kontrolloni nëse serveri është në linjë.'\n      };\n    }\n    if (!response.ok) {\n      return {\n        available: false,\n        message: `Proxy server u gjet por ktheu status ${response.status}`\n      };\n    }\n    const text = await response.text();\n    console.log('Proxy health check response:', text.substring(0, 200));\n    if (text.includes('<!doctype') || text.includes('<html')) {\n      return {\n        available: false,\n        message: 'Proxy server po kthen HTML në vend të JSON. Kontrolloni konfigurimin.'\n      };\n    }\n    return {\n      available: true,\n      message: 'Proxy server është në linjë dhe funksionon!'\n    };\n  } catch (error) {\n    console.error('Proxy check error:', error);\n    return {\n      available: false,\n      message: `Gabim në kontrollin e proxy: ${error.message}`\n    };\n  }\n};\n\n// Funksion për IPTV API me diagnostikë të avancuar\nconst fetchIPTVData = async (server, user, pass, action, options = {}) => {\n  try {\n    console.log(`[IPTV] Fetching ${action} from ${server}`);\n\n    // Ndërto URL-në e proxy me parametra të plotë\n    const params = new URLSearchParams({\n      server: server,\n      user: user,\n      pass: pass,\n      action: action\n    });\n    const proxyUrl = `/api/iptv?${params.toString()}`;\n    console.log(`[IPTV] Proxy URL: ${proxyUrl}`);\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 sekonda timeout\n\n    try {\n      const res = await fetch(proxyUrl, {\n        signal: controller.signal,\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Cache-Control': 'no-cache',\n          'X-Requested-With': 'XMLHttpRequest'\n        }\n      });\n      clearTimeout(timeoutId);\n\n      // Merrni përgjigjen si tekst së pari për diagnostikë\n      const responseText = await res.text();\n      console.log(`[IPTV] Response for ${action} (first 500 chars):`, responseText.substring(0, 500));\n      console.log(`[IPTV] Response length: ${responseText.length} chars`);\n      console.log(`[IPTV] Response status: ${res.status} ${res.statusText}`);\n      if (!res.ok) {\n        console.error(`[IPTV] Proxy error ${res.status}:`, responseText.substring(0, 300));\n\n        // Kontrolloni llojin e gabimit\n        if (responseText.includes('<!doctype') || responseText.includes('<html')) {\n          if (responseText.includes('404') || responseText.includes('Not Found')) {\n            throw new Error(`Rruga /api/iptv nuk u gjet në proxy server`);\n          } else if (responseText.includes('500') || responseText.includes('Internal Server Error')) {\n            throw new Error(`Gabim i brendshëm në proxy server`);\n          } else {\n            throw new Error(`Proxy server po kthen faqe HTML. Mund të jetë problem me rrugën ose konfigurimin.`);\n          }\n        }\n        throw new Error(`Proxy HTTP ${res.status}: ${responseText.substring(0, 150)}`);\n      }\n\n      // Kontrolloni nëse përgjigja është HTML\n      if (responseText.trim().startsWith('<!') || responseText.includes('<!DOCTYPE') || responseText.includes('<html') || responseText.includes('<body')) {\n        console.error('[IPTV] HTML response detected:', responseText.substring(0, 300));\n\n        // Analizo HTML-në për mesazhe të dobishme\n        if (responseText.includes('Invalid credentials') || responseText.includes('Wrong username') || responseText.includes('Access denied')) {\n          throw new Error('Kredenciale të gabuara ose akses i ndaluar');\n        }\n        if (responseText.includes('Connection failed') || responseText.includes('Cannot connect')) {\n          throw new Error('Nuk mund të lidhet me serverin IPTV. Kontrolloni URL-në dhe lidhjen në internet.');\n        }\n        throw new Error('Serveri IPTV po kthen HTML në vend të JSON. Mund të jetë URL e gabuar ose serveri nuk përdor API standarde.');\n      }\n\n      // Provoni të parse JSON\n      try {\n        const data = JSON.parse(responseText);\n        console.log(`[IPTV] ${action} parsed successfully:`, Array.isArray(data) ? `${data.length} items` : 'Object data');\n\n        // Kontrolloni për mesazhe gabimi në JSON\n        if (data && data.error) {\n          throw new Error(`Server error: ${data.error}`);\n        }\n        if (data && data.user_info && data.user_info.auth === 0) {\n          throw new Error('Autentikimi dështoi. Kontrolloni kredencialet.');\n        }\n        return data;\n      } catch (jsonError) {\n        console.error('[IPTV] JSON parse error:', jsonError);\n\n        // Kontrolloni nëse është mesazh i thjeshtë tekst\n        if (responseText.includes('error') || responseText.includes('Error') || responseText.includes('invalid') || responseText.includes('Invalid')) {\n          throw new Error(`Server response: ${responseText.substring(0, 200)}`);\n        }\n\n        // Kontrolloni nëse është XML (disa serverë kthejnë XML)\n        if (responseText.includes('<?xml') || responseText.trim().startsWith('<')) {\n          throw new Error('Serveri po kthen XML në vend të JSON. Formati nuk mbështetet.');\n        }\n        throw new Error('Përgjigje e pavlefshme nga serveri. Format i panjohur.');\n      }\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  } catch (error) {\n    console.error(`[IPTV] Error fetching ${action}:`, error);\n\n    // Riklasifikoni gabimet për mesazhe më të kuptueshme\n    if (error.name === 'AbortError') {\n      throw new Error('Kërkesa kaloi kohën e pritjes (30 sekonda). Serveri mund të jetë i ngadaltë ose jo i arritshëm.');\n    }\n    if (error.message.includes('Failed to fetch')) {\n      throw new Error('Nuk mund të lidhemi me proxy server. Kontrolloni nëse proxy serveri është në linjë.');\n    }\n    if (error.message.includes('CORS')) {\n      throw new Error('Problem CORS. Kontrolloni konfigurimin e proxy serverit.');\n    }\n    throw error;\n  }\n};\n\n// Funksionet bazë për marrjen e të dhënave\nexport const getLive = async (server, user, pass, options = {}) => {\n  console.log(\"[IPTV] Getting live streams...\");\n  try {\n    const data = await fetchIPTVData(server, user, pass, \"get_live_streams\", options);\n    return Array.isArray(data) ? data : [];\n  } catch (error) {\n    console.error(\"[IPTV] Failed to get live streams:\", error.message);\n    throw error; // Rikthe gabimin në vend që të kthejë array bosh\n  }\n};\nexport const getMovies = async (server, user, pass, options = {}) => {\n  console.log(\"[IPTV] Getting movies...\");\n  try {\n    const data = await fetchIPTVData(server, user, pass, \"get_vod_streams\", options);\n    return Array.isArray(data) ? data : [];\n  } catch (error) {\n    console.error(\"[IPTV] Failed to get movies:\", error.message);\n    throw error;\n  }\n};\nexport const getSeries = async (server, user, pass, options = {}) => {\n  console.log(\"[IPTV] Getting series...\");\n  try {\n    const data = await fetchIPTVData(server, user, pass, \"get_series\", options);\n    return Array.isArray(data) ? data : [];\n  } catch (error) {\n    console.error(\"[IPTV] Failed to get series:\", error.message);\n    throw error;\n  }\n};\nexport const getCategories = async (server, user, pass, options = {}) => {\n  console.log(\"[IPTV] Getting categories...\");\n  try {\n    const data = await fetchIPTVData(server, user, pass, \"get_live_categories\", options);\n    return Array.isArray(data) ? data : [];\n  } catch (error) {\n    console.error(\"[IPTV] Failed to get categories:\", error.message);\n    throw error;\n  }\n};\n\n// Funksion për të testuar lidhjen\nexport const testConnection = async (server, user, pass) => {\n  try {\n    console.log(\"[IPTV] Testing connection...\");\n    const data = await fetchIPTVData(server, user, pass, \"handshake\");\n    if (data && data.user_info) {\n      return {\n        success: true,\n        message: 'Lidhja u krye me sukses!',\n        userInfo: data.user_info,\n        serverInfo: data.server_info\n      };\n    }\n    return {\n      success: false,\n      message: 'Lidhja u krye por nuk u morën të dhëna të vlefshme'\n    };\n  } catch (error) {\n    console.error(\"[IPTV] Connection test failed:\", error);\n    return {\n      success: false,\n      message: `Gabim në lidhje: ${error.message}`\n    };\n  }\n};\n\n// Funksionet e tjera (buildStream, fetchM3U, etj.) mbeten të njëjta\n// ... (kodi i mëparshëm për buildStream, fetchM3U, etj.)","map":{"version":3,"names":["checkProxyServer","console","log","response","fetch","method","headers","catch","available","message","ok","status","text","substring","includes","error","fetchIPTVData","server","user","pass","action","options","params","URLSearchParams","proxyUrl","toString","controller","AbortController","timeoutId","setTimeout","abort","res","signal","clearTimeout","responseText","length","statusText","Error","trim","startsWith","data","JSON","parse","Array","isArray","user_info","auth","jsonError","name","getLive","getMovies","getSeries","getCategories","testConnection","success","userInfo","serverInfo","server_info"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// iptvService.js - VERSION ME DIAGNOSTIKË TË DETAJUAR\r\n\r\n// Funksion për të kontrolluar proxy server\r\nexport const checkProxyServer = async () => {\r\n  try {\r\n    console.log('Checking proxy server status...');\r\n    \r\n    // Provoni të kontaktoni proxy server\r\n    const response = await fetch('/api/health', {\r\n      method: 'GET',\r\n      headers: { 'Accept': 'application/json' }\r\n    }).catch(() => null);\r\n    \r\n    if (!response) {\r\n      return { \r\n        available: false, \r\n        message: 'Proxy server nuk është i arritshëm. Kontrolloni nëse serveri është në linjë.' \r\n      };\r\n    }\r\n    \r\n    if (!response.ok) {\r\n      return { \r\n        available: false, \r\n        message: `Proxy server u gjet por ktheu status ${response.status}` \r\n      };\r\n    }\r\n    \r\n    const text = await response.text();\r\n    console.log('Proxy health check response:', text.substring(0, 200));\r\n    \r\n    if (text.includes('<!doctype') || text.includes('<html')) {\r\n      return { \r\n        available: false, \r\n        message: 'Proxy server po kthen HTML në vend të JSON. Kontrolloni konfigurimin.' \r\n      };\r\n    }\r\n    \r\n    return { \r\n      available: true, \r\n      message: 'Proxy server është në linjë dhe funksionon!' \r\n    };\r\n    \r\n  } catch (error) {\r\n    console.error('Proxy check error:', error);\r\n    return { \r\n      available: false, \r\n      message: `Gabim në kontrollin e proxy: ${error.message}` \r\n    };\r\n  }\r\n};\r\n\r\n// Funksion për IPTV API me diagnostikë të avancuar\r\nconst fetchIPTVData = async (server, user, pass, action, options = {}) => {\r\n  try {\r\n    console.log(`[IPTV] Fetching ${action} from ${server}`);\r\n    \r\n    // Ndërto URL-në e proxy me parametra të plotë\r\n    const params = new URLSearchParams({\r\n      server: server,\r\n      user: user,\r\n      pass: pass,\r\n      action: action\r\n    });\r\n    \r\n    const proxyUrl = `/api/iptv?${params.toString()}`;\r\n    console.log(`[IPTV] Proxy URL: ${proxyUrl}`);\r\n    \r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 sekonda timeout\r\n    \r\n    try {\r\n      const res = await fetch(proxyUrl, { \r\n        signal: controller.signal,\r\n        headers: {\r\n          'Accept': 'application/json, text/plain, */*',\r\n          'Cache-Control': 'no-cache',\r\n          'X-Requested-With': 'XMLHttpRequest'\r\n        }\r\n      });\r\n      \r\n      clearTimeout(timeoutId);\r\n      \r\n      // Merrni përgjigjen si tekst së pari për diagnostikë\r\n      const responseText = await res.text();\r\n      console.log(`[IPTV] Response for ${action} (first 500 chars):`, responseText.substring(0, 500));\r\n      console.log(`[IPTV] Response length: ${responseText.length} chars`);\r\n      console.log(`[IPTV] Response status: ${res.status} ${res.statusText}`);\r\n      \r\n      if (!res.ok) {\r\n        console.error(`[IPTV] Proxy error ${res.status}:`, responseText.substring(0, 300));\r\n        \r\n        // Kontrolloni llojin e gabimit\r\n        if (responseText.includes('<!doctype') || responseText.includes('<html')) {\r\n          if (responseText.includes('404') || responseText.includes('Not Found')) {\r\n            throw new Error(`Rruga /api/iptv nuk u gjet në proxy server`);\r\n          } else if (responseText.includes('500') || responseText.includes('Internal Server Error')) {\r\n            throw new Error(`Gabim i brendshëm në proxy server`);\r\n          } else {\r\n            throw new Error(`Proxy server po kthen faqe HTML. Mund të jetë problem me rrugën ose konfigurimin.`);\r\n          }\r\n        }\r\n        \r\n        throw new Error(`Proxy HTTP ${res.status}: ${responseText.substring(0, 150)}`);\r\n      }\r\n      \r\n      // Kontrolloni nëse përgjigja është HTML\r\n      if (responseText.trim().startsWith('<!') || \r\n          responseText.includes('<!DOCTYPE') || \r\n          responseText.includes('<html') ||\r\n          responseText.includes('<body')) {\r\n        \r\n        console.error('[IPTV] HTML response detected:', responseText.substring(0, 300));\r\n        \r\n        // Analizo HTML-në për mesazhe të dobishme\r\n        if (responseText.includes('Invalid credentials') || \r\n            responseText.includes('Wrong username') ||\r\n            responseText.includes('Access denied')) {\r\n          throw new Error('Kredenciale të gabuara ose akses i ndaluar');\r\n        }\r\n        \r\n        if (responseText.includes('Connection failed') || \r\n            responseText.includes('Cannot connect')) {\r\n          throw new Error('Nuk mund të lidhet me serverin IPTV. Kontrolloni URL-në dhe lidhjen në internet.');\r\n        }\r\n        \r\n        throw new Error('Serveri IPTV po kthen HTML në vend të JSON. Mund të jetë URL e gabuar ose serveri nuk përdor API standarde.');\r\n      }\r\n      \r\n      // Provoni të parse JSON\r\n      try {\r\n        const data = JSON.parse(responseText);\r\n        console.log(`[IPTV] ${action} parsed successfully:`, Array.isArray(data) ? `${data.length} items` : 'Object data');\r\n        \r\n        // Kontrolloni për mesazhe gabimi në JSON\r\n        if (data && data.error) {\r\n          throw new Error(`Server error: ${data.error}`);\r\n        }\r\n        \r\n        if (data && data.user_info && data.user_info.auth === 0) {\r\n          throw new Error('Autentikimi dështoi. Kontrolloni kredencialet.');\r\n        }\r\n        \r\n        return data;\r\n        \r\n      } catch (jsonError) {\r\n        console.error('[IPTV] JSON parse error:', jsonError);\r\n        \r\n        // Kontrolloni nëse është mesazh i thjeshtë tekst\r\n        if (responseText.includes('error') || \r\n            responseText.includes('Error') || \r\n            responseText.includes('invalid') ||\r\n            responseText.includes('Invalid')) {\r\n          throw new Error(`Server response: ${responseText.substring(0, 200)}`);\r\n        }\r\n        \r\n        // Kontrolloni nëse është XML (disa serverë kthejnë XML)\r\n        if (responseText.includes('<?xml') || responseText.trim().startsWith('<')) {\r\n          throw new Error('Serveri po kthen XML në vend të JSON. Formati nuk mbështetet.');\r\n        }\r\n        \r\n        throw new Error('Përgjigje e pavlefshme nga serveri. Format i panjohur.');\r\n      }\r\n      \r\n    } finally {\r\n      clearTimeout(timeoutId);\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error(`[IPTV] Error fetching ${action}:`, error);\r\n    \r\n    // Riklasifikoni gabimet për mesazhe më të kuptueshme\r\n    if (error.name === 'AbortError') {\r\n      throw new Error('Kërkesa kaloi kohën e pritjes (30 sekonda). Serveri mund të jetë i ngadaltë ose jo i arritshëm.');\r\n    }\r\n    \r\n    if (error.message.includes('Failed to fetch')) {\r\n      throw new Error('Nuk mund të lidhemi me proxy server. Kontrolloni nëse proxy serveri është në linjë.');\r\n    }\r\n    \r\n    if (error.message.includes('CORS')) {\r\n      throw new Error('Problem CORS. Kontrolloni konfigurimin e proxy serverit.');\r\n    }\r\n    \r\n    throw error;\r\n  }\r\n};\r\n\r\n// Funksionet bazë për marrjen e të dhënave\r\nexport const getLive = async (server, user, pass, options = {}) => {\r\n  console.log(\"[IPTV] Getting live streams...\");\r\n  try {\r\n    const data = await fetchIPTVData(server, user, pass, \"get_live_streams\", options);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(\"[IPTV] Failed to get live streams:\", error.message);\r\n    throw error; // Rikthe gabimin në vend që të kthejë array bosh\r\n  }\r\n};\r\n\r\nexport const getMovies = async (server, user, pass, options = {}) => {\r\n  console.log(\"[IPTV] Getting movies...\");\r\n  try {\r\n    const data = await fetchIPTVData(server, user, pass, \"get_vod_streams\", options);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(\"[IPTV] Failed to get movies:\", error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getSeries = async (server, user, pass, options = {}) => {\r\n  console.log(\"[IPTV] Getting series...\");\r\n  try {\r\n    const data = await fetchIPTVData(server, user, pass, \"get_series\", options);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(\"[IPTV] Failed to get series:\", error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getCategories = async (server, user, pass, options = {}) => {\r\n  console.log(\"[IPTV] Getting categories...\");\r\n  try {\r\n    const data = await fetchIPTVData(server, user, pass, \"get_live_categories\", options);\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(\"[IPTV] Failed to get categories:\", error.message);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Funksion për të testuar lidhjen\r\nexport const testConnection = async (server, user, pass) => {\r\n  try {\r\n    console.log(\"[IPTV] Testing connection...\");\r\n    \r\n    const data = await fetchIPTVData(server, user, pass, \"handshake\");\r\n    \r\n    if (data && data.user_info) {\r\n      return {\r\n        success: true,\r\n        message: 'Lidhja u krye me sukses!',\r\n        userInfo: data.user_info,\r\n        serverInfo: data.server_info\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: 'Lidhja u krye por nuk u morën të dhëna të vlefshme'\r\n    };\r\n    \r\n  } catch (error) {\r\n    console.error(\"[IPTV] Connection test failed:\", error);\r\n    return {\r\n      success: false,\r\n      message: `Gabim në lidhje: ${error.message}`\r\n    };\r\n  }\r\n};\r\n\r\n// Funksionet e tjera (buildStream, fetchM3U, etj.) mbeten të njëjta\r\n// ... (kodi i mëparshëm për buildStream, fetchM3U, etj.)"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}