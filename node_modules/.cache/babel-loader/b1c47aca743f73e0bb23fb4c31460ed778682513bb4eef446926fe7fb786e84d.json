{"ast":null,"code":"// src/services/iptvService.js - Version FINAL\nexport const fetchChannelsFromM3U = async m3uUrl => {\n  try {\n    console.log('ğŸ”„ Duke pÃ«rpjekur tÃ« shkarkoj listÃ«n nga:', m3uUrl);\n\n    // STRATEGJI 1: Provo direkt\n    let response;\n    try {\n      response = await fetch(m3uUrl, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n          'Accept': '*/*'\n        },\n        mode: 'cors'\n      });\n      if (response.ok) {\n        console.log('âœ… KÃ«rkesa direkte funksionoi');\n        const content = await response.text();\n        return parseM3UContent(content);\n      }\n    } catch (directError) {\n      console.log('âš ï¸ Direkte dÃ«shtoi:', directError.message);\n    }\n\n    // STRATEGJI 2: Provo me proxy tÃ« ndryshÃ«m\n    const proxies = [`https://api.allorigins.win/get?url=${encodeURIComponent(m3uUrl)}`, `https://cors-anywhere.herokuapp.com/${m3uUrl}`, `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(m3uUrl)}`];\n    for (const proxyUrl of proxies) {\n      try {\n        console.log(`ğŸ”„ Po provoj proxy: ${proxyUrl.split('/')[2]}`);\n        response = await fetch(proxyUrl, {\n          timeout: 10000\n        });\n        if (response.ok) {\n          const data = await response.json();\n          const content = proxyUrl.includes('allorigins.win') ? data.contents : data;\n          if (content && content.includes('#EXTM3U')) {\n            console.log(`âœ… Proxy funksionoi`);\n            return parseM3UContent(content);\n          }\n        }\n      } catch (proxyError) {\n        console.log(`âš ï¸ Proxy dÃ«shtoi: ${proxyError.message}`);\n        continue;\n      }\n    }\n    throw new Error('TÃ« gjitha metodat dÃ«shtuan');\n  } catch (error) {\n    console.error('ğŸ’¥ Gabim kritik nÃ« fetchChannelsFromM3U:', error);\n    throw new Error(`DÃ«shtoi marrja e kanaleve: ${error.message}`);\n  }\n};\nfunction parseM3UContent(m3uText) {\n  if (!m3uText || !m3uText.includes('#EXTM3U')) {\n    console.error('âŒ Teksti nuk Ã«shtÃ« M3U valid. Parapamje:', m3uText === null || m3uText === void 0 ? void 0 : m3uText.substring(0, 200));\n    throw new Error('Nuk u gjet listÃ« M3U e vlefshme');\n  }\n  const lines = m3uText.split('\\n');\n  const channels = [];\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    if (line.startsWith('#EXTINF:')) {\n      let currentChannel = {\n        id: `ch_${channels.length}_${Date.now()}`,\n        streamUrl: ''\n      };\n\n      // Emri\n      const nameMatch = line.match(/,(.+)$/);\n      if (nameMatch) currentChannel.name = nameMatch[1].trim();\n\n      // Logo\n      const logoMatch = line.match(/tvg-logo=\"([^\"]+)\"/);\n      if (logoMatch) currentChannel.logo = logoMatch[1];\n\n      // Kategoria\n      const groupMatch = line.match(/group-title=\"([^\"]+)\"/);\n      if (groupMatch) currentChannel.category = groupMatch[1];\n\n      // URL (rreshti pas #EXTINF:)\n      if (i + 1 < lines.length) {\n        const urlLine = lines[i + 1].trim();\n        if (urlLine && !urlLine.startsWith('#')) {\n          currentChannel.streamUrl = urlLine;\n          currentChannel.isLive = true;\n          channels.push(currentChannel);\n          i++; // Kaloj rreshtin e URL-sÃ«\n        }\n      }\n    }\n  }\n  console.log(`ğŸ“Š U gjetÃ«n ${channels.length} kanale`);\n  return channels;\n}","map":{"version":3,"names":["fetchChannelsFromM3U","m3uUrl","console","log","response","fetch","headers","mode","ok","content","text","parseM3UContent","directError","message","proxies","encodeURIComponent","proxyUrl","split","timeout","data","json","includes","contents","proxyError","Error","error","m3uText","substring","lines","channels","i","length","line","trim","startsWith","currentChannel","id","Date","now","streamUrl","nameMatch","match","name","logoMatch","logo","groupMatch","category","urlLine","isLive","push"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// src/services/iptvService.js - Version FINAL\r\nexport const fetchChannelsFromM3U = async (m3uUrl) => {\r\n  try {\r\n    console.log('ğŸ”„ Duke pÃ«rpjekur tÃ« shkarkoj listÃ«n nga:', m3uUrl);\r\n    \r\n    // STRATEGJI 1: Provo direkt\r\n    let response;\r\n    try {\r\n      response = await fetch(m3uUrl, {\r\n        headers: {\r\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n          'Accept': '*/*',\r\n        },\r\n        mode: 'cors',\r\n      });\r\n      \r\n      if (response.ok) {\r\n        console.log('âœ… KÃ«rkesa direkte funksionoi');\r\n        const content = await response.text();\r\n        return parseM3UContent(content);\r\n      }\r\n    } catch (directError) {\r\n      console.log('âš ï¸ Direkte dÃ«shtoi:', directError.message);\r\n    }\r\n    \r\n    // STRATEGJI 2: Provo me proxy tÃ« ndryshÃ«m\r\n    const proxies = [\r\n      `https://api.allorigins.win/get?url=${encodeURIComponent(m3uUrl)}`,\r\n      `https://cors-anywhere.herokuapp.com/${m3uUrl}`,\r\n      `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(m3uUrl)}`,\r\n    ];\r\n    \r\n    for (const proxyUrl of proxies) {\r\n      try {\r\n        console.log(`ğŸ”„ Po provoj proxy: ${proxyUrl.split('/')[2]}`);\r\n        response = await fetch(proxyUrl, { timeout: 10000 });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const content = proxyUrl.includes('allorigins.win') ? data.contents : data;\r\n          if (content && content.includes('#EXTM3U')) {\r\n            console.log(`âœ… Proxy funksionoi`);\r\n            return parseM3UContent(content);\r\n          }\r\n        }\r\n      } catch (proxyError) {\r\n        console.log(`âš ï¸ Proxy dÃ«shtoi: ${proxyError.message}`);\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    throw new Error('TÃ« gjitha metodat dÃ«shtuan');\r\n    \r\n  } catch (error) {\r\n    console.error('ğŸ’¥ Gabim kritik nÃ« fetchChannelsFromM3U:', error);\r\n    throw new Error(`DÃ«shtoi marrja e kanaleve: ${error.message}`);\r\n  }\r\n};\r\n\r\nfunction parseM3UContent(m3uText) {\r\n  if (!m3uText || !m3uText.includes('#EXTM3U')) {\r\n    console.error('âŒ Teksti nuk Ã«shtÃ« M3U valid. Parapamje:', m3uText?.substring(0, 200));\r\n    throw new Error('Nuk u gjet listÃ« M3U e vlefshme');\r\n  }\r\n  \r\n  const lines = m3uText.split('\\n');\r\n  const channels = [];\r\n  \r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i].trim();\r\n    \r\n    if (line.startsWith('#EXTINF:')) {\r\n      let currentChannel = { id: `ch_${channels.length}_${Date.now()}`, streamUrl: '' };\r\n      \r\n      // Emri\r\n      const nameMatch = line.match(/,(.+)$/);\r\n      if (nameMatch) currentChannel.name = nameMatch[1].trim();\r\n      \r\n      // Logo\r\n      const logoMatch = line.match(/tvg-logo=\"([^\"]+)\"/);\r\n      if (logoMatch) currentChannel.logo = logoMatch[1];\r\n      \r\n      // Kategoria\r\n      const groupMatch = line.match(/group-title=\"([^\"]+)\"/);\r\n      if (groupMatch) currentChannel.category = groupMatch[1];\r\n      \r\n      // URL (rreshti pas #EXTINF:)\r\n      if (i + 1 < lines.length) {\r\n        const urlLine = lines[i + 1].trim();\r\n        if (urlLine && !urlLine.startsWith('#')) {\r\n          currentChannel.streamUrl = urlLine;\r\n          currentChannel.isLive = true;\r\n          channels.push(currentChannel);\r\n          i++; // Kaloj rreshtin e URL-sÃ«\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  console.log(`ğŸ“Š U gjetÃ«n ${channels.length} kanale`);\r\n  return channels;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}