{"ast":null,"code":"export const xtreamLogin = async (server, username, password) => {\n  try {\n    var _data$user_info;\n    if (!server || !username || !password) {\n      throw new Error('Të gjitha fushat janë të detyrueshme');\n    }\n    let baseUrl = server.trim();\n    if (!baseUrl.startsWith('http')) {\n      baseUrl = 'https://' + baseUrl;\n    }\n    baseUrl = baseUrl.replace(/\\/+$/, '');\n    const response = await fetch(`${baseUrl}/player_api.php`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: new URLSearchParams({\n        username,\n        password,\n        action: 'handshake'\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const data = await response.json();\n    if (!(data !== null && data !== void 0 && (_data$user_info = data.user_info) !== null && _data$user_info !== void 0 && _data$user_info.auth)) {\n      return {\n        success: false,\n        error: 'Kredencialet e gabuara'\n      };\n    }\n    return {\n      success: true,\n      data,\n      server: baseUrl\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message || 'Nuk u lidh me serverin'\n    };\n  }\n};\nexport const getAllContent = async (server, username, password) => {\n  try {\n    let baseUrl = server.trim();\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\n    baseUrl = baseUrl.replace(/\\/+$/, '');\n    const [live, movies, series] = await Promise.all([fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_live_streams`).then(res => res.json()), fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_vod_streams`).then(res => res.json()), fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`).then(res => res.json())]);\n    return {\n      live: Array.isArray(live) ? live : [],\n      movies: Array.isArray(movies) ? movies : [],\n      series: Array.isArray(series) ? series : []\n    };\n  } catch (error) {\n    console.error('Error getting content:', error);\n    return {\n      live: [],\n      movies: [],\n      series: []\n    };\n  }\n};\nexport const getAllCategories = async (server, username, password) => {\n  try {\n    let baseUrl = server.trim();\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\n    baseUrl = baseUrl.replace(/\\/+$/, '');\n    const [live, movies, series] = await Promise.all([fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_live_categories`).then(res => res.json()), fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_vod_categories`).then(res => res.json()), fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series_categories`).then(res => res.json())]);\n    return {\n      live: Array.isArray(live) ? live : [],\n      movies: Array.isArray(movies) ? movies : [],\n      series: Array.isArray(series) ? series : [],\n      all: [...(Array.isArray(live) ? live : []), ...(Array.isArray(movies) ? movies : []), ...(Array.isArray(series) ? series : [])]\n    };\n  } catch (error) {\n    console.error('Error getting categories:', error);\n    return {\n      live: [],\n      movies: [],\n      series: [],\n      all: []\n    };\n  }\n};\nexport const buildStreamUrl = (server, username, password, streamId, type, extension = '') => {\n  let baseUrl = server.trim();\n  if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\n  baseUrl = baseUrl.replace(/\\/+$/, '');\n  if (type === 'live') {\n    return `${baseUrl}/live/${username}/${password}/${streamId}.m3u8`;\n  } else if (type === 'movie') {\n    return `${baseUrl}/movie/${username}/${password}/${streamId}.${extension || 'mp4'}`;\n  } else if (type === 'series') {\n    return `${baseUrl}/series/${username}/${password}/${streamId}.m3u8`;\n  }\n  return '';\n};\nexport const getEPG = async (server, username, password, streamId) => {\n  try {\n    let baseUrl = server.trim();\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\n    baseUrl = baseUrl.replace(/\\/+$/, '');\n    const response = await fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_short_epg&stream_id=${streamId}&limit=5`);\n    const data = await response.json();\n    return Array.isArray(data.epg_listings) ? data.epg_listings : [];\n  } catch (error) {\n    console.error('Error getting EPG:', error);\n    return [];\n  }\n};","map":{"version":3,"names":["xtreamLogin","server","username","password","_data$user_info","Error","baseUrl","trim","startsWith","replace","response","fetch","method","headers","body","URLSearchParams","action","ok","status","data","json","user_info","auth","success","error","message","getAllContent","live","movies","series","Promise","all","then","res","Array","isArray","console","getAllCategories","buildStreamUrl","streamId","type","extension","getEPG","epg_listings"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/xtream.jsx"],"sourcesContent":["export const xtreamLogin = async (server, username, password) => {\r\n  try {\r\n    if (!server || !username || !password) {\r\n      throw new Error('Të gjitha fushat janë të detyrueshme');\r\n    }\r\n\r\n    let baseUrl = server.trim();\r\n    if (!baseUrl.startsWith('http')) {\r\n      baseUrl = 'https://' + baseUrl;\r\n    }\r\n    baseUrl = baseUrl.replace(/\\/+$/, '');\r\n\r\n    const response = await fetch(`${baseUrl}/player_api.php`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams({\r\n        username,\r\n        password,\r\n        action: 'handshake'\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    \r\n    if (!data?.user_info?.auth) {\r\n      return { success: false, error: 'Kredencialet e gabuara' };\r\n    }\r\n\r\n    return { \r\n      success: true, \r\n      data,\r\n      server: baseUrl\r\n    };\r\n  } catch (error) {\r\n    return { \r\n      success: false, \r\n      error: error.message || 'Nuk u lidh me serverin' \r\n    };\r\n  }\r\n};\r\n\r\nexport const getAllContent = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.trim();\r\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\r\n    baseUrl = baseUrl.replace(/\\/+$/, '');\r\n\r\n    const [live, movies, series] = await Promise.all([\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_live_streams`).then(res => res.json()),\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_vod_streams`).then(res => res.json()),\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`).then(res => res.json())\r\n    ]);\r\n\r\n    return {\r\n      live: Array.isArray(live) ? live : [],\r\n      movies: Array.isArray(movies) ? movies : [],\r\n      series: Array.isArray(series) ? series : []\r\n    };\r\n  } catch (error) {\r\n    console.error('Error getting content:', error);\r\n    return { live: [], movies: [], series: [] };\r\n  }\r\n};\r\n\r\nexport const getAllCategories = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.trim();\r\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\r\n    baseUrl = baseUrl.replace(/\\/+$/, '');\r\n\r\n    const [live, movies, series] = await Promise.all([\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_live_categories`).then(res => res.json()),\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_vod_categories`).then(res => res.json()),\r\n      fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series_categories`).then(res => res.json())\r\n    ]);\r\n\r\n    return {\r\n      live: Array.isArray(live) ? live : [],\r\n      movies: Array.isArray(movies) ? movies : [],\r\n      series: Array.isArray(series) ? series : [],\r\n      all: [...(Array.isArray(live) ? live : []), ...(Array.isArray(movies) ? movies : []), ...(Array.isArray(series) ? series : [])]\r\n    };\r\n  } catch (error) {\r\n    console.error('Error getting categories:', error);\r\n    return { live: [], movies: [], series: [], all: [] };\r\n  }\r\n};\r\n\r\nexport const buildStreamUrl = (server, username, password, streamId, type, extension = '') => {\r\n  let baseUrl = server.trim();\r\n  if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\r\n  baseUrl = baseUrl.replace(/\\/+$/, '');\r\n\r\n  if (type === 'live') {\r\n    return `${baseUrl}/live/${username}/${password}/${streamId}.m3u8`;\r\n  } else if (type === 'movie') {\r\n    return `${baseUrl}/movie/${username}/${password}/${streamId}.${extension || 'mp4'}`;\r\n  } else if (type === 'series') {\r\n    return `${baseUrl}/series/${username}/${password}/${streamId}.m3u8`;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const getEPG = async (server, username, password, streamId) => {\r\n  try {\r\n    let baseUrl = server.trim();\r\n    if (!baseUrl.startsWith('http')) baseUrl = 'https://' + baseUrl;\r\n    baseUrl = baseUrl.replace(/\\/+$/, '');\r\n\r\n    const response = await fetch(`${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_short_epg&stream_id=${streamId}&limit=5`);\r\n    const data = await response.json();\r\n    return Array.isArray(data.epg_listings) ? data.epg_listings : [];\r\n  } catch (error) {\r\n    console.error('Error getting EPG:', error);\r\n    return [];\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}