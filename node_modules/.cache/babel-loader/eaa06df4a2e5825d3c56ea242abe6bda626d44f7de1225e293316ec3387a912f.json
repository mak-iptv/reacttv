{"ast":null,"code":"const handlePlay = useCallback(async item => {\n  if (!item) return;\n  try {\n    const streamUrl = buildStreamUrlFromCredentials(item);\n    if (!streamUrl) {\n      throw new Error('Stream URL nuk eshte i vlefshem');\n    }\n    const itemId = getItemId(item);\n    const itemName = getItemName(item);\n    const itemLogo = getItemLogo(item);\n    const itemCategory = getItemCategory(item, activeTab);\n    const streamType = getStreamType(item, activeTab);\n    setCurrentStream(streamUrl);\n    setCurrentStreamInfo({\n      id: itemId,\n      name: itemName,\n      logo: itemLogo,\n      category: itemCategory,\n      type: streamType\n    });\n    setSelectedItem(item);\n    setIsPlaying(true);\n    setIsPlayerVisible(true);\n\n    // RREGULLIMI KETU - shto mbrojtje\n    setRecentItems(prev => {\n      if (!prev) return [item];\n      const filtered = prev.filter(i => {\n        const id = (i === null || i === void 0 ? void 0 : i.stream_id) || (i === null || i === void 0 ? void 0 : i.series_id) || (i === null || i === void 0 ? void 0 : i.id);\n        return id !== itemId;\n      });\n      return [item, ...filtered].slice(0, APP_CONSTANTS.MAX_RECENT_ITEMS || 10);\n    });\n    if (streamType === STREAM_TYPES.LIVE) {\n      await fetchEPGData(itemId);\n    }\n  } catch (err) {\n    setPlayerError(err.message);\n    handleError(err, 'Gabim gjatë luajtjes');\n  }\n}, [buildStreamUrlFromCredentials, activeTab, fetchEPGData, handleError, setRecentItems]);","map":{"version":3,"names":["handlePlay","useCallback","item","streamUrl","buildStreamUrlFromCredentials","Error","itemId","getItemId","itemName","getItemName","itemLogo","getItemLogo","itemCategory","getItemCategory","activeTab","streamType","getStreamType","setCurrentStream","setCurrentStreamInfo","id","name","logo","category","type","setSelectedItem","setIsPlaying","setIsPlayerVisible","setRecentItems","prev","filtered","filter","i","stream_id","series_id","slice","APP_CONSTANTS","MAX_RECENT_ITEMS","STREAM_TYPES","LIVE","fetchEPGData","err","setPlayerError","message","handleError"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/hooks/useLocalStorage.js"],"sourcesContent":["const handlePlay = useCallback(async (item) => {\r\n  if (!item) return;\r\n\r\n  try {\r\n    const streamUrl = buildStreamUrlFromCredentials(item);\r\n    \r\n    if (!streamUrl) {\r\n      throw new Error('Stream URL nuk eshte i vlefshem');\r\n    }\r\n\r\n    const itemId = getItemId(item);\r\n    const itemName = getItemName(item);\r\n    const itemLogo = getItemLogo(item);\r\n    const itemCategory = getItemCategory(item, activeTab);\r\n    const streamType = getStreamType(item, activeTab);\r\n\r\n    setCurrentStream(streamUrl);\r\n    setCurrentStreamInfo({\r\n      id: itemId,\r\n      name: itemName,\r\n      logo: itemLogo,\r\n      category: itemCategory,\r\n      type: streamType\r\n    });\r\n    setSelectedItem(item);\r\n    setIsPlaying(true);\r\n    setIsPlayerVisible(true);\r\n    \r\n    // RREGULLIMI KETU - shto mbrojtje\r\n    setRecentItems(prev => {\r\n      if (!prev) return [item];\r\n      const filtered = prev.filter(i => {\r\n        const id = i?.stream_id || i?.series_id || i?.id;\r\n        return id !== itemId;\r\n      });\r\n      return [item, ...filtered].slice(0, APP_CONSTANTS.MAX_RECENT_ITEMS || 10);\r\n    });\r\n\r\n    if (streamType === STREAM_TYPES.LIVE) {\r\n      await fetchEPGData(itemId);\r\n    }\r\n    \r\n  } catch (err) {\r\n    setPlayerError(err.message);\r\n    handleError(err, 'Gabim gjatë luajtjes');\r\n  }\r\n}, [buildStreamUrlFromCredentials, activeTab, fetchEPGData, handleError, setRecentItems]);"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,WAAW,CAAC,MAAOC,IAAI,IAAK;EAC7C,IAAI,CAACA,IAAI,EAAE;EAEX,IAAI;IACF,MAAMC,SAAS,GAAGC,6BAA6B,CAACF,IAAI,CAAC;IAErD,IAAI,CAACC,SAAS,EAAE;MACd,MAAM,IAAIE,KAAK,CAAC,iCAAiC,CAAC;IACpD;IAEA,MAAMC,MAAM,GAAGC,SAAS,CAACL,IAAI,CAAC;IAC9B,MAAMM,QAAQ,GAAGC,WAAW,CAACP,IAAI,CAAC;IAClC,MAAMQ,QAAQ,GAAGC,WAAW,CAACT,IAAI,CAAC;IAClC,MAAMU,YAAY,GAAGC,eAAe,CAACX,IAAI,EAAEY,SAAS,CAAC;IACrD,MAAMC,UAAU,GAAGC,aAAa,CAACd,IAAI,EAAEY,SAAS,CAAC;IAEjDG,gBAAgB,CAACd,SAAS,CAAC;IAC3Be,oBAAoB,CAAC;MACnBC,EAAE,EAAEb,MAAM;MACVc,IAAI,EAAEZ,QAAQ;MACda,IAAI,EAAEX,QAAQ;MACdY,QAAQ,EAAEV,YAAY;MACtBW,IAAI,EAAER;IACR,CAAC,CAAC;IACFS,eAAe,CAACtB,IAAI,CAAC;IACrBuB,YAAY,CAAC,IAAI,CAAC;IAClBC,kBAAkB,CAAC,IAAI,CAAC;;IAExB;IACAC,cAAc,CAACC,IAAI,IAAI;MACrB,IAAI,CAACA,IAAI,EAAE,OAAO,CAAC1B,IAAI,CAAC;MACxB,MAAM2B,QAAQ,GAAGD,IAAI,CAACE,MAAM,CAACC,CAAC,IAAI;QAChC,MAAMZ,EAAE,GAAG,CAAAY,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,SAAS,MAAID,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEE,SAAS,MAAIF,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEZ,EAAE;QAChD,OAAOA,EAAE,KAAKb,MAAM;MACtB,CAAC,CAAC;MACF,OAAO,CAACJ,IAAI,EAAE,GAAG2B,QAAQ,CAAC,CAACK,KAAK,CAAC,CAAC,EAAEC,aAAa,CAACC,gBAAgB,IAAI,EAAE,CAAC;IAC3E,CAAC,CAAC;IAEF,IAAIrB,UAAU,KAAKsB,YAAY,CAACC,IAAI,EAAE;MACpC,MAAMC,YAAY,CAACjC,MAAM,CAAC;IAC5B;EAEF,CAAC,CAAC,OAAOkC,GAAG,EAAE;IACZC,cAAc,CAACD,GAAG,CAACE,OAAO,CAAC;IAC3BC,WAAW,CAACH,GAAG,EAAE,sBAAsB,CAAC;EAC1C;AACF,CAAC,EAAE,CAACpC,6BAA6B,EAAEU,SAAS,EAAEyB,YAAY,EAAEI,WAAW,EAAEhB,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}