{"ast":null,"code":"// iptvService.jsx\n\n// Funksion universal për IPTV API (përdor proxy)\nconst fetchFromProxy = async (server, user, pass, action) => {\n  try {\n    const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${user}&pass=${pass}&action=${action}`;\n    console.log(\"Fetching IPTV API:\", url);\n    const res = await fetch(url);\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n    const data = await res.json();\n    console.log(`Data received for ${action}:`, data);\n    return data;\n  } catch (err) {\n    console.error(`Error fetching ${action}:`, err);\n    return null;\n  }\n};\n\n// Funksion për M3U (përdor proxy)\nexport const fetchM3U = async url => {\n  try {\n    console.log(\"Fetching M3U:\", url);\n    const res = await fetch(`/api/m3u?url=${encodeURIComponent(url)}`);\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n    const text = await res.text();\n    return text;\n  } catch (err) {\n    console.error(\"M3U fetch error:\", err);\n    return null;\n  }\n};\n\n// Funksion për të ndërtuar stream URL\nexport const buildStream = (server, user, pass, type, id) => {\n  const cleanServer = server.replace(/\\/$/, \"\");\n  switch (type) {\n    case \"live\":\n      return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\n    case \"movie\":\n      return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\n    case \"series\":\n      return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\n    default:\n      return `${cleanServer}/${type}/${user}/${pass}/${id}.m3u8`;\n  }\n};\n\n// Funksionet e gatshme për të thirrur API-të\nexport const getLive = async (server, user, pass) => {\n  console.log(\"Fetching live streams...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_live_streams\");\n  return data || [];\n};\nexport const getMovies = async (server, user, pass) => {\n  console.log(\"Fetching movies...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_vod_streams\");\n  return data || [];\n};\nexport const getSeries = async (server, user, pass) => {\n  console.log(\"Fetching series...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_series\");\n  return data || [];\n};\nexport const getCategories = async (server, user, pass) => {\n  console.log(\"Fetching categories...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_live_categories\");\n  return data || [];\n};\n\n// Opsional: funksion autentikimi\nexport const authenticate = async (server, user, pass) => {\n  console.log(\"Authenticating...\");\n  const data = await fetchFromProxy(server, user, pass, \"handshake\");\n  return data;\n};","map":{"version":3,"names":["fetchFromProxy","server","user","pass","action","url","encodeURIComponent","console","log","res","fetch","ok","Error","status","statusText","data","json","err","error","fetchM3U","text","buildStream","type","id","cleanServer","replace","getLive","getMovies","getSeries","getCategories","authenticate"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// iptvService.jsx\r\n\r\n// Funksion universal për IPTV API (përdor proxy)\r\nconst fetchFromProxy = async (server, user, pass, action) => {\r\n  try {\r\n    const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${user}&pass=${pass}&action=${action}`;\r\n    console.log(\"Fetching IPTV API:\", url);\r\n\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n\r\n    const data = await res.json();\r\n    console.log(`Data received for ${action}:`, data);\r\n    return data;\r\n  } catch (err) {\r\n    console.error(`Error fetching ${action}:`, err);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Funksion për M3U (përdor proxy)\r\nexport const fetchM3U = async (url) => {\r\n  try {\r\n    console.log(\"Fetching M3U:\", url);\r\n    const res = await fetch(`/api/m3u?url=${encodeURIComponent(url)}`);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n\r\n    const text = await res.text();\r\n    return text;\r\n  } catch (err) {\r\n    console.error(\"M3U fetch error:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Funksion për të ndërtuar stream URL\r\nexport const buildStream = (server, user, pass, type, id) => {\r\n  const cleanServer = server.replace(/\\/$/, \"\");\r\n  switch (type) {\r\n    case \"live\":\r\n      return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\r\n    case \"movie\":\r\n      return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\r\n    case \"series\":\r\n      return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\r\n    default:\r\n      return `${cleanServer}/${type}/${user}/${pass}/${id}.m3u8`;\r\n  }\r\n};\r\n\r\n// Funksionet e gatshme për të thirrur API-të\r\nexport const getLive = async (server, user, pass) => {\r\n  console.log(\"Fetching live streams...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_live_streams\");\r\n  return data || [];\r\n};\r\n\r\nexport const getMovies = async (server, user, pass) => {\r\n  console.log(\"Fetching movies...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_vod_streams\");\r\n  return data || [];\r\n};\r\n\r\nexport const getSeries = async (server, user, pass) => {\r\n  console.log(\"Fetching series...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_series\");\r\n  return data || [];\r\n};\r\n\r\nexport const getCategories = async (server, user, pass) => {\r\n  console.log(\"Fetching categories...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_live_categories\");\r\n  return data || [];\r\n};\r\n\r\n// Opsional: funksion autentikimi\r\nexport const authenticate = async (server, user, pass) => {\r\n  console.log(\"Authenticating...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"handshake\");\r\n  return data;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}