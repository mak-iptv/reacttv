{"ast":null,"code":"// src/services/xtream.js\n\n// ================ PROXY KONFIGURIMI ================\nconst PROXIES = ['https://api.allorigins.win/raw?url=', 'https://corsproxy.io/?', 'https://cors-anywhere.herokuapp.com/', 'https://proxy.cors.sh/', 'https://thingproxy.freeboard.io/fetch/'];\nconst PROXIES_WITH_KEYS = {\n  'https://proxy.cors.sh/': {\n    key: 'demo',\n    // Ndrysho me API key tÃ« vÃ«rtetÃ«\n    header: 'x-cors-api-key'\n  }\n};\n\n// ================ FUNKSIONET BAZÃ‹ PÃ‹R M3U ================\n\n/**\r\n * Merr M3U nga URL me mbÃ«shtetje CORS\r\n */\nexport const fetchM3UFromUrl = async url => {\n  console.log('ðŸ” Duke marrÃ« M3U nga:', url);\n\n  // 1. Provimi pa proxy\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/x-mpegurl, */*'\n      },\n      mode: 'cors',\n      credentials: 'omit'\n    });\n    if (response.ok) {\n      const data = await response.text();\n      console.log('âœ… M3U u mor me sukses');\n      return data;\n    }\n  } catch (error) {\n    console.log('âŒ Fetch direkt dÃ«shtoi:', error.message);\n  }\n\n  // 2. Provimi me proxy\n  for (const proxy of PROXIES) {\n    try {\n      const proxyUrl = `${proxy}${encodeURIComponent(url)}`;\n      const response = await fetch(proxyUrl);\n      if (response.ok) {\n        const data = await response.text();\n        console.log(`âœ… M3U u mor pÃ«rmes proxy: ${proxy}`);\n        return data;\n      }\n    } catch (error) {\n      console.log(`âŒ Proxy ${proxy} dÃ«shtoi`);\n    }\n  }\n  throw new Error('Nuk arrihet tÃ« ngarkohet M3U nga URL e dhÃ«nÃ«');\n};\n\n/**\r\n * Verifikon nÃ«se pÃ«rmbajtja Ã«shtÃ« M3U e vlefshme\r\n */\nexport const isValidM3U = content => {\n  if (!content || typeof content !== 'string') return false;\n  return content.trim().startsWith('#EXTM3U');\n};\n\n/**\r\n * Parsimon M3U nÃ« kanale\r\n */\n// NÃ« xtream.js, pÃ«rditÃ«so funksionin parseM3U\n\nexport const parseM3U = content => {\n  if (!isValidM3U(content)) {\n    throw new Error('M3U i pavlefshÃ«m');\n  }\n  const lines = content.split('\\n');\n  const channels = [];\n  let currentChannel = null;\n  for (const line of lines) {\n    const trimmedLine = line.trim();\n    if (trimmedLine.startsWith('#EXTINF:')) {\n      const match = trimmedLine.match(/#EXTINF:(-?\\d+)(?:\\s+(.*))?,(.*)/);\n      if (match) {\n        var _attributes$match, _attributes$match2, _attributes$match3, _attributes$match4, _attributes$match5, _attributes$match6, _attributes$match7;\n        const duration = match[1];\n        const attributes = match[2] || '';\n        const name = match[3];\n\n        // Parse tÃ« gjitha atributet\n        const tvgId = ((_attributes$match = attributes.match(/tvg-id=\"([^\"]*)\"/)) === null || _attributes$match === void 0 ? void 0 : _attributes$match[1]) || '';\n        const tvgName = ((_attributes$match2 = attributes.match(/tvg-name=\"([^\"]*)\"/)) === null || _attributes$match2 === void 0 ? void 0 : _attributes$match2[1]) || '';\n        const tvgLogo = ((_attributes$match3 = attributes.match(/tvg-logo=\"([^\"]*)\"/)) === null || _attributes$match3 === void 0 ? void 0 : _attributes$match3[1]) || '';\n        const groupTitle = ((_attributes$match4 = attributes.match(/group-title=\"([^\"]*)\"/)) === null || _attributes$match4 === void 0 ? void 0 : _attributes$match4[1]) || '';\n        const tvgGroup = ((_attributes$match5 = attributes.match(/tvg-group=\"([^\"]*)\"/)) === null || _attributes$match5 === void 0 ? void 0 : _attributes$match5[1]) || '';\n        const tvgCountry = ((_attributes$match6 = attributes.match(/tvg-country=\"([^\"]*)\"/)) === null || _attributes$match6 === void 0 ? void 0 : _attributes$match6[1]) || '';\n        const tvgLanguage = ((_attributes$match7 = attributes.match(/tvg-language=\"([^\"]*)\"/)) === null || _attributes$match7 === void 0 ? void 0 : _attributes$match7[1]) || '';\n\n        // PÃ«rdor group-title, nÃ«se nuk ka, pÃ«rdor tvg-group\n        let category = groupTitle;\n        if (!category || category.trim() === '') {\n          category = tvgGroup;\n        }\n        if (!category || category.trim() === '') {\n          category = 'Pa Kategori';\n        }\n        currentChannel = {\n          id: `m3u_${Date.now()}_${Math.random()}`,\n          stream_id: `m3u_${Date.now()}_${Math.random()}`,\n          name: name || 'Unknown',\n          title: name || 'Unknown',\n          duration: parseInt(duration) || -1,\n          tvgId,\n          tvgName,\n          tvgLogo,\n          tvgGroup,\n          tvgCountry,\n          tvgLanguage,\n          stream_icon: tvgLogo,\n          logo: tvgLogo,\n          groupTitle: category,\n          category: category,\n          category_name: category,\n          group: category,\n          url: '',\n          stream_url: '',\n          type: 'live'\n        };\n      }\n    } else if (trimmedLine && !trimmedLine.startsWith('#') && !trimmedLine.startsWith('http')) {\n      // Kjo Ã«shtÃ« URL e kanalit\n      if (currentChannel) {\n        currentChannel.url = trimmedLine;\n        currentChannel.stream_url = trimmedLine;\n        channels.push(currentChannel);\n        currentChannel = null;\n      }\n    } else if (trimmedLine && trimmedLine.startsWith('http')) {\n      // Kjo Ã«shtÃ« URL e kanalit\n      if (currentChannel) {\n        currentChannel.url = trimmedLine;\n        currentChannel.stream_url = trimmedLine;\n        channels.push(currentChannel);\n        currentChannel = null;\n      }\n    }\n  }\n  console.log(`ðŸ“Š U parseuan ${channels.length} kanale`);\n\n  // Shfaq kategoritÃ« e gjetura pÃ«r debug\n  const categories = [...new Set(channels.map(ch => ch.groupTitle))];\n  console.log('ðŸ“ KategoritÃ« e gjetura:', categories);\n  return channels;\n};\n/**\r\n * Ruaj M3U lokalisht\r\n */\nexport const saveM3ULocally = (content, filename = 'playlist.m3u') => {\n  try {\n    const blob = new Blob([content], {\n      type: 'application/x-mpegurl'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n    return true;\n  } catch (error) {\n    console.error('Gabim gjatÃ« ruajtjes:', error);\n    return false;\n  }\n};\n\n/**\r\n * KÃ«rkon kanale\r\n */\nexport const searchChannels = (channels, query) => {\n  if (!query || !channels) return channels || [];\n  const searchTerm = query.toLowerCase();\n  return channels.filter(ch => (ch.name || ch.title || '').toLowerCase().includes(searchTerm) || (ch.groupTitle || ch.category_name || '').toLowerCase().includes(searchTerm));\n};\n\n/**\r\n * Grupon kanalet sipas kategorive\r\n */\nexport const groupChannelsByCategory = channels => {\n  if (!channels) return {};\n  return channels.reduce((groups, ch) => {\n    const category = ch.groupTitle || ch.category_name || 'Pa Kategori';\n    if (!groups[category]) groups[category] = [];\n    groups[category].push(ch);\n    return groups;\n  }, {});\n};\n\n/**\r\n * Merr informacion tÃ« detajuar tÃ« kanalit\r\n */\nexport const getChannelInfo = channel => {\n  return {\n    id: channel.stream_id || channel.id,\n    name: channel.name || channel.title,\n    logo: channel.stream_icon || channel.tvgLogo,\n    category: channel.groupTitle || channel.category_name,\n    url: channel.stream_url || channel.url\n  };\n};\n\n/**\r\n * Teston URL e kanalit\r\n */\nexport const testChannelUrl = async url => {\n  try {\n    const response = await fetch(url, {\n      method: 'HEAD'\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\n\n// ================ FUNKSIONET PÃ‹R XTREAM CODES API ================\n\n/**\r\n * Login nÃ« Xtream server\r\n */\nexport const xtreamLogin = async (server, username, password) => {\n  try {\n    console.log('ðŸ”‘ Duke u kyÃ§ur nÃ« Xtream server...');\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.user_info && data.user_info.auth) {\n          return {\n            success: true,\n            data: data.user_info\n          };\n        }\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.user_info && data.user_info.auth) {\n            return {\n              success: true,\n              data: data.user_info\n            };\n          }\n        }\n      } catch (e) {}\n    }\n    return {\n      success: false,\n      error: 'Kredencialet e gabuara ose serveri nuk pÃ«rgjigjet'\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\n\n/**\r\n * Merr tÃ« gjitha pÃ«rmbajtjet (live, movies, series)\r\n */\nexport const getAllContent = async (server, username, password) => {\n  try {\n    const [live, movies, series] = await Promise.all([getXtreamChannels(server, username, password, 'live'), getXtreamChannels(server, username, password, 'movie'), getXtreamSeries(server, username, password)]);\n    return {\n      live: live || [],\n      movies: movies || [],\n      series: series || []\n    };\n  } catch (error) {\n    console.error('Gabim nÃ« getAllContent:', error);\n    return {\n      live: [],\n      movies: [],\n      series: []\n    };\n  }\n};\n\n/**\r\n * Merr tÃ« gjitha kategoritÃ«\r\n */\nexport const getAllCategories = async (server, username, password) => {\n  try {\n    const [liveCats, movieCats, seriesCats] = await Promise.all([getXtreamCategories(server, username, password, 'live'), getXtreamCategories(server, username, password, 'movie'), getXtreamCategories(server, username, password, 'series')]);\n    return {\n      live: liveCats || [],\n      movies: movieCats || [],\n      series: seriesCats || []\n    };\n  } catch (error) {\n    console.error('Gabim nÃ« getAllCategories:', error);\n    return {\n      live: [],\n      movies: [],\n      series: []\n    };\n  }\n};\n\n/**\r\n * Merr kanalet Xtream\r\n */\nexport const getXtreamChannels = async (server, username, password, type = 'live') => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_streams`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error(`Gabim nÃ« getXtreamChannels (${type}):`, error);\n    return [];\n  }\n};\n\n/**\r\n * Merr serialet Xtream\r\n */\nexport const getXtreamSeries = async (server, username, password) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error('Gabim nÃ« getXtreamSeries:', error);\n    return [];\n  }\n};\n\n/**\r\n * Merr kategoritÃ« Xtream\r\n */\nexport const getXtreamCategories = async (server, username, password, type = 'live') => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_categories`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error(`Gabim nÃ« getXtreamCategories (${type}):`, error);\n    return [];\n  }\n};\n\n/**\r\n * NdÃ«rton URL pÃ«r stream\r\n */\nexport const buildStreamUrl = (type, id, server, username, password, extension = 'm3u8') => {\n  if (!server || !username || !password || !id) {\n    throw new Error('MungojnÃ« parametrat pÃ«r Xtream stream');\n  }\n  let baseUrl = server.replace(/^https?:\\/\\//, '');\n  switch (type) {\n    case 'live':\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\n    case 'movie':\n      return `http://${baseUrl}/movie/${username}/${password}/${id}.${extension}`;\n    case 'series':\n      return `http://${baseUrl}/series/${username}/${password}/${id}.${extension}`;\n    default:\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\n  }\n};\n\n/**\r\n * Merr EPG (Electronic Program Guide)\r\n */\nexport const getEPG = async (server, username, password, streamId = null) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_epg`;\n    if (streamId) {\n      apiUrl += `&stream_id=${streamId}`;\n    }\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return data.epg_listings || [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return data.epg_listings || [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error('Gabim nÃ« getEPG:', error);\n    return [];\n  }\n};\n\n/**\r\n * Merr informacion tÃ« serverit\r\n */\nexport const getXtreamServerInfo = async (server, username, password) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return {\n          success: true,\n          user: data.user_info,\n          server: data.server_info\n        };\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return {\n            success: true,\n            user: data.user_info,\n            server: data.server_info\n          };\n        }\n      } catch (e) {}\n    }\n    return {\n      success: false,\n      error: 'Nuk arrihet tÃ« marrÃ« informacion tÃ« serverit'\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\n\n/**\r\n * Verifikon kredencialet Xtream\r\n */\nexport const verifyXtreamCredentials = async (server, username, password) => {\n  const info = await getXtreamServerInfo(server, username, password);\n  return {\n    valid: info.success,\n    data: info.user,\n    error: info.error\n  };\n};\n\n// ================ FUNKSIONET PÃ‹R EPG ================\n\nexport const getDemoEPG = (channelId = null) => {\n  const now = new Date();\n  return [{\n    channel_id: channelId || '1',\n    title: 'Lajmet e MbrÃ«mjes',\n    description: 'Lajmet kryesore tÃ« ditÃ«s',\n    start_timestamp: Math.floor(now.setHours(19, 0, 0) / 1000),\n    end_timestamp: Math.floor(now.setHours(20, 0, 0) / 1000)\n  }];\n};\nexport const formatEPGData = data => {\n  if (!Array.isArray(data)) return [];\n  return data.map(item => ({\n    ...item,\n    start_time: item.start_timestamp ? new Date(item.start_timestamp * 1000).toLocaleTimeString() : '',\n    end_time: item.end_timestamp ? new Date(item.end_timestamp * 1000).toLocaleTimeString() : ''\n  }));\n};\nexport const formatTime = timestamp => {\n  if (!timestamp) return '';\n  return new Date(timestamp * 1000).toLocaleTimeString('sq-AL', {\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\nexport const formatDate = timestamp => {\n  if (!timestamp) return '';\n  return new Date(timestamp * 1000).toLocaleDateString('sq-AL', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};\n\n// ================ EKSPORTET KRYESORE ================\n\nexport default {\n  // M3U functions\n  fetchM3UFromUrl,\n  isValidM3U,\n  parseM3U,\n  saveM3ULocally,\n  searchChannels,\n  groupChannelsByCategory,\n  getChannelInfo,\n  testChannelUrl,\n  // Xtream functions\n  xtreamLogin,\n  getAllContent,\n  getAllCategories,\n  getXtreamChannels,\n  getXtreamSeries,\n  getXtreamCategories,\n  buildStreamUrl,\n  getEPG,\n  getXtreamServerInfo,\n  verifyXtreamCredentials,\n  // EPG functions\n  getDemoEPG,\n  formatEPGData,\n  formatTime,\n  formatDate\n};","map":{"version":3,"names":["PROXIES","PROXIES_WITH_KEYS","key","header","fetchM3UFromUrl","url","console","log","response","fetch","method","headers","mode","credentials","ok","data","text","error","message","proxy","proxyUrl","encodeURIComponent","Error","isValidM3U","content","trim","startsWith","parseM3U","lines","split","channels","currentChannel","line","trimmedLine","match","_attributes$match","_attributes$match2","_attributes$match3","_attributes$match4","_attributes$match5","_attributes$match6","_attributes$match7","duration","attributes","name","tvgId","tvgName","tvgLogo","groupTitle","tvgGroup","tvgCountry","tvgLanguage","category","id","Date","now","Math","random","stream_id","title","parseInt","stream_icon","logo","category_name","group","stream_url","type","push","length","categories","Set","map","ch","saveM3ULocally","filename","blob","Blob","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","searchChannels","query","searchTerm","toLowerCase","filter","includes","groupChannelsByCategory","reduce","groups","getChannelInfo","channel","testChannelUrl","xtreamLogin","server","username","password","baseUrl","replace","apiUrl","json","user_info","auth","success","e","getAllContent","live","movies","series","Promise","all","getXtreamChannels","getXtreamSeries","getAllCategories","liveCats","movieCats","seriesCats","getXtreamCategories","Array","isArray","buildStreamUrl","extension","getEPG","streamId","epg_listings","getXtreamServerInfo","user","server_info","verifyXtreamCredentials","info","valid","getDemoEPG","channelId","channel_id","description","start_timestamp","floor","setHours","end_timestamp","formatEPGData","item","start_time","toLocaleTimeString","end_time","formatTime","timestamp","hour","minute","formatDate","toLocaleDateString","weekday","year","month","day"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/xtream.jsx"],"sourcesContent":["// src/services/xtream.js\r\n\r\n// ================ PROXY KONFIGURIMI ================\r\nconst PROXIES = [\r\n  'https://api.allorigins.win/raw?url=',\r\n  'https://corsproxy.io/?',\r\n  'https://cors-anywhere.herokuapp.com/',\r\n  'https://proxy.cors.sh/',\r\n  'https://thingproxy.freeboard.io/fetch/'\r\n];\r\n\r\nconst PROXIES_WITH_KEYS = {\r\n  'https://proxy.cors.sh/': {\r\n    key: 'demo', // Ndrysho me API key tÃ« vÃ«rtetÃ«\r\n    header: 'x-cors-api-key'\r\n  }\r\n};\r\n\r\n// ================ FUNKSIONET BAZÃ‹ PÃ‹R M3U ================\r\n\r\n/**\r\n * Merr M3U nga URL me mbÃ«shtetje CORS\r\n */\r\nexport const fetchM3UFromUrl = async (url) => {\r\n  console.log('ðŸ” Duke marrÃ« M3U nga:', url);\r\n  \r\n  // 1. Provimi pa proxy\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: { 'Accept': 'application/x-mpegurl, */*' },\r\n      mode: 'cors',\r\n      credentials: 'omit'\r\n    });\r\n    \r\n    if (response.ok) {\r\n      const data = await response.text();\r\n      console.log('âœ… M3U u mor me sukses');\r\n      return data;\r\n    }\r\n  } catch (error) {\r\n    console.log('âŒ Fetch direkt dÃ«shtoi:', error.message);\r\n  }\r\n\r\n  // 2. Provimi me proxy\r\n  for (const proxy of PROXIES) {\r\n    try {\r\n      const proxyUrl = `${proxy}${encodeURIComponent(url)}`;\r\n      const response = await fetch(proxyUrl);\r\n      \r\n      if (response.ok) {\r\n        const data = await response.text();\r\n        console.log(`âœ… M3U u mor pÃ«rmes proxy: ${proxy}`);\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.log(`âŒ Proxy ${proxy} dÃ«shtoi`);\r\n    }\r\n  }\r\n\r\n  throw new Error('Nuk arrihet tÃ« ngarkohet M3U nga URL e dhÃ«nÃ«');\r\n};\r\n\r\n/**\r\n * Verifikon nÃ«se pÃ«rmbajtja Ã«shtÃ« M3U e vlefshme\r\n */\r\nexport const isValidM3U = (content) => {\r\n  if (!content || typeof content !== 'string') return false;\r\n  return content.trim().startsWith('#EXTM3U');\r\n};\r\n\r\n/**\r\n * Parsimon M3U nÃ« kanale\r\n */\r\n// NÃ« xtream.js, pÃ«rditÃ«so funksionin parseM3U\r\n\r\nexport const parseM3U = (content) => {\r\n  if (!isValidM3U(content)) {\r\n    throw new Error('M3U i pavlefshÃ«m');\r\n  }\r\n\r\n  const lines = content.split('\\n');\r\n  const channels = [];\r\n  let currentChannel = null;\r\n\r\n  for (const line of lines) {\r\n    const trimmedLine = line.trim();\r\n    \r\n    if (trimmedLine.startsWith('#EXTINF:')) {\r\n      const match = trimmedLine.match(/#EXTINF:(-?\\d+)(?:\\s+(.*))?,(.*)/);\r\n      if (match) {\r\n        const duration = match[1];\r\n        const attributes = match[2] || '';\r\n        const name = match[3];\r\n        \r\n        // Parse tÃ« gjitha atributet\r\n        const tvgId = attributes.match(/tvg-id=\"([^\"]*)\"/)?.[1] || '';\r\n        const tvgName = attributes.match(/tvg-name=\"([^\"]*)\"/)?.[1] || '';\r\n        const tvgLogo = attributes.match(/tvg-logo=\"([^\"]*)\"/)?.[1] || '';\r\n        const groupTitle = attributes.match(/group-title=\"([^\"]*)\"/)?.[1] || '';\r\n        const tvgGroup = attributes.match(/tvg-group=\"([^\"]*)\"/)?.[1] || '';\r\n        const tvgCountry = attributes.match(/tvg-country=\"([^\"]*)\"/)?.[1] || '';\r\n        const tvgLanguage = attributes.match(/tvg-language=\"([^\"]*)\"/)?.[1] || '';\r\n        \r\n        // PÃ«rdor group-title, nÃ«se nuk ka, pÃ«rdor tvg-group\r\n        let category = groupTitle;\r\n        if (!category || category.trim() === '') {\r\n          category = tvgGroup;\r\n        }\r\n        if (!category || category.trim() === '') {\r\n          category = 'Pa Kategori';\r\n        }\r\n        \r\n        currentChannel = {\r\n          id: `m3u_${Date.now()}_${Math.random()}`,\r\n          stream_id: `m3u_${Date.now()}_${Math.random()}`,\r\n          name: name || 'Unknown',\r\n          title: name || 'Unknown',\r\n          duration: parseInt(duration) || -1,\r\n          tvgId,\r\n          tvgName,\r\n          tvgLogo,\r\n          tvgGroup,\r\n          tvgCountry,\r\n          tvgLanguage,\r\n          stream_icon: tvgLogo,\r\n          logo: tvgLogo,\r\n          groupTitle: category,\r\n          category: category,\r\n          category_name: category,\r\n          group: category,\r\n          url: '',\r\n          stream_url: '',\r\n          type: 'live'\r\n        };\r\n      }\r\n    } else if (trimmedLine && !trimmedLine.startsWith('#') && !trimmedLine.startsWith('http')) {\r\n      // Kjo Ã«shtÃ« URL e kanalit\r\n      if (currentChannel) {\r\n        currentChannel.url = trimmedLine;\r\n        currentChannel.stream_url = trimmedLine;\r\n        channels.push(currentChannel);\r\n        currentChannel = null;\r\n      }\r\n    } else if (trimmedLine && trimmedLine.startsWith('http')) {\r\n      // Kjo Ã«shtÃ« URL e kanalit\r\n      if (currentChannel) {\r\n        currentChannel.url = trimmedLine;\r\n        currentChannel.stream_url = trimmedLine;\r\n        channels.push(currentChannel);\r\n        currentChannel = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(`ðŸ“Š U parseuan ${channels.length} kanale`);\r\n  \r\n  // Shfaq kategoritÃ« e gjetura pÃ«r debug\r\n  const categories = [...new Set(channels.map(ch => ch.groupTitle))];\r\n  console.log('ðŸ“ KategoritÃ« e gjetura:', categories);\r\n  \r\n  return channels;\r\n};\r\n/**\r\n * Ruaj M3U lokalisht\r\n */\r\nexport const saveM3ULocally = (content, filename = 'playlist.m3u') => {\r\n  try {\r\n    const blob = new Blob([content], { type: 'application/x-mpegurl' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Gabim gjatÃ« ruajtjes:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * KÃ«rkon kanale\r\n */\r\nexport const searchChannels = (channels, query) => {\r\n  if (!query || !channels) return channels || [];\r\n  const searchTerm = query.toLowerCase();\r\n  return channels.filter(ch => \r\n    (ch.name || ch.title || '').toLowerCase().includes(searchTerm) ||\r\n    (ch.groupTitle || ch.category_name || '').toLowerCase().includes(searchTerm)\r\n  );\r\n};\r\n\r\n/**\r\n * Grupon kanalet sipas kategorive\r\n */\r\nexport const groupChannelsByCategory = (channels) => {\r\n  if (!channels) return {};\r\n  return channels.reduce((groups, ch) => {\r\n    const category = ch.groupTitle || ch.category_name || 'Pa Kategori';\r\n    if (!groups[category]) groups[category] = [];\r\n    groups[category].push(ch);\r\n    return groups;\r\n  }, {});\r\n};\r\n\r\n/**\r\n * Merr informacion tÃ« detajuar tÃ« kanalit\r\n */\r\nexport const getChannelInfo = (channel) => {\r\n  return {\r\n    id: channel.stream_id || channel.id,\r\n    name: channel.name || channel.title,\r\n    logo: channel.stream_icon || channel.tvgLogo,\r\n    category: channel.groupTitle || channel.category_name,\r\n    url: channel.stream_url || channel.url\r\n  };\r\n};\r\n\r\n/**\r\n * Teston URL e kanalit\r\n */\r\nexport const testChannelUrl = async (url) => {\r\n  try {\r\n    const response = await fetch(url, { method: 'HEAD' });\r\n    return response.ok;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\n// ================ FUNKSIONET PÃ‹R XTREAM CODES API ================\r\n\r\n/**\r\n * Login nÃ« Xtream server\r\n */\r\nexport const xtreamLogin = async (server, username, password) => {\r\n  try {\r\n    console.log('ðŸ”‘ Duke u kyÃ§ur nÃ« Xtream server...');\r\n    \r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.user_info && data.user_info.auth) {\r\n          return { success: true, data: data.user_info };\r\n        }\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.user_info && data.user_info.auth) {\r\n            return { success: true, data: data.user_info };\r\n          }\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return { success: false, error: 'Kredencialet e gabuara ose serveri nuk pÃ«rgjigjet' };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr tÃ« gjitha pÃ«rmbajtjet (live, movies, series)\r\n */\r\nexport const getAllContent = async (server, username, password) => {\r\n  try {\r\n    const [live, movies, series] = await Promise.all([\r\n      getXtreamChannels(server, username, password, 'live'),\r\n      getXtreamChannels(server, username, password, 'movie'),\r\n      getXtreamSeries(server, username, password)\r\n    ]);\r\n\r\n    return {\r\n      live: live || [],\r\n      movies: movies || [],\r\n      series: series || []\r\n    };\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getAllContent:', error);\r\n    return { live: [], movies: [], series: [] };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr tÃ« gjitha kategoritÃ«\r\n */\r\nexport const getAllCategories = async (server, username, password) => {\r\n  try {\r\n    const [liveCats, movieCats, seriesCats] = await Promise.all([\r\n      getXtreamCategories(server, username, password, 'live'),\r\n      getXtreamCategories(server, username, password, 'movie'),\r\n      getXtreamCategories(server, username, password, 'series')\r\n    ]);\r\n\r\n    return {\r\n      live: liveCats || [],\r\n      movies: movieCats || [],\r\n      series: seriesCats || []\r\n    };\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getAllCategories:', error);\r\n    return { live: [], movies: [], series: [] };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr kanalet Xtream\r\n */\r\nexport const getXtreamChannels = async (server, username, password, type = 'live') => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_streams`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error(`Gabim nÃ« getXtreamChannels (${type}):`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr serialet Xtream\r\n */\r\nexport const getXtreamSeries = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getXtreamSeries:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr kategoritÃ« Xtream\r\n */\r\nexport const getXtreamCategories = async (server, username, password, type = 'live') => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_categories`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error(`Gabim nÃ« getXtreamCategories (${type}):`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * NdÃ«rton URL pÃ«r stream\r\n */\r\nexport const buildStreamUrl = (type, id, server, username, password, extension = 'm3u8') => {\r\n  if (!server || !username || !password || !id) {\r\n    throw new Error('MungojnÃ« parametrat pÃ«r Xtream stream');\r\n  }\r\n\r\n  let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n  \r\n  switch (type) {\r\n    case 'live':\r\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\r\n    case 'movie':\r\n      return `http://${baseUrl}/movie/${username}/${password}/${id}.${extension}`;\r\n    case 'series':\r\n      return `http://${baseUrl}/series/${username}/${password}/${id}.${extension}`;\r\n    default:\r\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\r\n  }\r\n};\r\n\r\n/**\r\n * Merr EPG (Electronic Program Guide)\r\n */\r\nexport const getEPG = async (server, username, password, streamId = null) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_epg`;\r\n    \r\n    if (streamId) {\r\n      apiUrl += `&stream_id=${streamId}`;\r\n    }\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return data.epg_listings || [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return data.epg_listings || [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getEPG:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr informacion tÃ« serverit\r\n */\r\nexport const getXtreamServerInfo = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return { success: true, user: data.user_info, server: data.server_info };\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        const proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return { success: true, user: data.user_info, server: data.server_info };\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return { success: false, error: 'Nuk arrihet tÃ« marrÃ« informacion tÃ« serverit' };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Verifikon kredencialet Xtream\r\n */\r\nexport const verifyXtreamCredentials = async (server, username, password) => {\r\n  const info = await getXtreamServerInfo(server, username, password);\r\n  return {\r\n    valid: info.success,\r\n    data: info.user,\r\n    error: info.error\r\n  };\r\n};\r\n\r\n// ================ FUNKSIONET PÃ‹R EPG ================\r\n\r\nexport const getDemoEPG = (channelId = null) => {\r\n  const now = new Date();\r\n  return [\r\n    {\r\n      channel_id: channelId || '1',\r\n      title: 'Lajmet e MbrÃ«mjes',\r\n      description: 'Lajmet kryesore tÃ« ditÃ«s',\r\n      start_timestamp: Math.floor(now.setHours(19, 0, 0) / 1000),\r\n      end_timestamp: Math.floor(now.setHours(20, 0, 0) / 1000)\r\n    }\r\n  ];\r\n};\r\n\r\nexport const formatEPGData = (data) => {\r\n  if (!Array.isArray(data)) return [];\r\n  return data.map(item => ({\r\n    ...item,\r\n    start_time: item.start_timestamp ? new Date(item.start_timestamp * 1000).toLocaleTimeString() : '',\r\n    end_time: item.end_timestamp ? new Date(item.end_timestamp * 1000).toLocaleTimeString() : ''\r\n  }));\r\n};\r\n\r\nexport const formatTime = (timestamp) => {\r\n  if (!timestamp) return '';\r\n  return new Date(timestamp * 1000).toLocaleTimeString('sq-AL', { hour: '2-digit', minute: '2-digit' });\r\n};\r\n\r\nexport const formatDate = (timestamp) => {\r\n  if (!timestamp) return '';\r\n  return new Date(timestamp * 1000).toLocaleDateString('sq-AL', { \r\n    weekday: 'long', \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric' \r\n  });\r\n};\r\n\r\n// ================ EKSPORTET KRYESORE ================\r\n\r\nexport default {\r\n  // M3U functions\r\n  fetchM3UFromUrl,\r\n  isValidM3U,\r\n  parseM3U,\r\n  saveM3ULocally,\r\n  searchChannels,\r\n  groupChannelsByCategory,\r\n  getChannelInfo,\r\n  testChannelUrl,\r\n  \r\n  // Xtream functions\r\n  xtreamLogin,\r\n  getAllContent,\r\n  getAllCategories,\r\n  getXtreamChannels,\r\n  getXtreamSeries,\r\n  getXtreamCategories,\r\n  buildStreamUrl,\r\n  getEPG,\r\n  getXtreamServerInfo,\r\n  verifyXtreamCredentials,\r\n  \r\n  // EPG functions\r\n  getDemoEPG,\r\n  formatEPGData,\r\n  formatTime,\r\n  formatDate\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}