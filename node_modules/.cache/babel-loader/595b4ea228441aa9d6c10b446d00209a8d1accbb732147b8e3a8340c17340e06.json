{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\n// src/components/HlsPlayer.jsx\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Hls from 'hls.js';\nimport './HlsPlayer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme,\n  currentStreamInfo,\n  currentEpg,\n  epgData,\n  onEpgUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n  const [retryCount, setRetryCount] = useState(0);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const bufferTimerRef = useRef(null);\n  const errorReportedRef = useRef(false);\n  const MAX_RETRIES = 3;\n\n  // Clean up buffer timer\n  useEffect(() => {\n    return () => {\n      if (bufferTimerRef.current) {\n        clearTimeout(bufferTimerRef.current);\n      }\n    };\n  }, []);\n\n  // Funksion p√´r t√´ raportuar error vet√´m nj√´ her√´\n  const reportError = useCallback(errorData => {\n    if (!errorReportedRef.current && onError) {\n      errorReportedRef.current = true;\n      const error = {\n        type: (errorData === null || errorData === void 0 ? void 0 : errorData.type) || 'unknown',\n        message: (errorData === null || errorData === void 0 ? void 0 : errorData.message) || (errorData === null || errorData === void 0 ? void 0 : errorData.details) || 'Gabim i panjohur',\n        code: errorData === null || errorData === void 0 ? void 0 : errorData.code,\n        details: (errorData === null || errorData === void 0 ? void 0 : errorData.details) || (errorData === null || errorData === void 0 ? void 0 : errorData.message)\n      };\n      onError(error);\n      setTimeout(() => {\n        errorReportedRef.current = false;\n      }, 2000);\n    }\n  }, [onError]);\n\n  // Funksion p√´r t√´ luajtur videon\n  const playVideo = useCallback(async () => {\n    if (!videoRef.current) return false;\n    try {\n      await videoRef.current.play();\n      console.log('‚ñ∂Ô∏è Playing successfully');\n      setIsBuffering(false);\n      return true;\n    } catch (err) {\n      console.warn('Play failed:', err);\n      if (err.name === 'NotAllowedError') {\n        setIsReady(true);\n      }\n      return false;\n    }\n  }, []);\n\n  // Initialize player\n  useEffect(() => {\n    if (!src || !videoRef.current) return;\n    let hls = null;\n    setIsReady(false);\n    setError(null);\n    setIsBuffering(false);\n    errorReportedRef.current = false;\n\n    // Clean up previous instance\n    if (hlsRef.current) {\n      hlsRef.current.destroy();\n      hlsRef.current = null;\n    }\n\n    // Detekto llojin e stream-it\n    const isHlsStream = src.includes('.m3u8') || src.includes('playlist.m3u8');\n    console.log('üé¨ Loading stream:', {\n      src: src.substring(0, 100),\n      isHlsStream,\n      type: isHlsStream ? 'HLS' : 'Direct'\n    });\n\n    // P√´r HLS streams - GJITHMON√ã p√´rdor HLS.js p√´r .m3u8\n    if (isHlsStream) {\n      console.log('üé¨ Using HLS.js for m3u8 stream');\n      if (Hls.isSupported()) {\n        try {\n          hls = new Hls({\n            enableWorker: true,\n            lowLatencyMode: true,\n            backBufferLength: 60,\n            maxBufferLength: 30,\n            maxMaxBufferLength: 60,\n            maxBufferSize: 50 * 1000 * 1000,\n            maxBufferHole: 0.5,\n            manifestLoadingTimeOut: 20000,\n            manifestLoadingMaxRetry: 5,\n            manifestLoadingRetryDelay: 1000,\n            manifestLoadingMaxRetryTimeout: 60000,\n            levelLoadingTimeOut: 20000,\n            levelLoadingMaxRetry: 4,\n            levelLoadingRetryDelay: 1000,\n            levelLoadingMaxRetryTimeout: 60000,\n            fragLoadingTimeOut: 30000,\n            fragLoadingMaxRetry: 4,\n            fragLoadingRetryDelay: 1000,\n            fragLoadingMaxRetryTimeout: 60000,\n            startLevel: -1,\n            debug: false,\n            xhrSetup: (xhr, url) => {\n              // Shto headers p√´r Xtream\n              if (url.includes('balkan-x.net')) {\n                xhr.withCredentials = false;\n                // Shto referrer dhe origin\n                xhr.setRequestHeader('Referer', 'http://balkan-x.net/');\n                xhr.setRequestHeader('Origin', 'http://balkan-x.net');\n              }\n            }\n          });\n          hlsRef.current = hls;\n          hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n            console.log('‚úÖ HLS media attached');\n            hls.loadSource(src);\n          });\n          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\n            console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\n            setIsReady(true);\n            setError(null);\n            if (isPlaying) {\n              playVideo();\n            }\n          });\n          hls.on(Hls.Events.ERROR, (event, data) => {\n            var _data$response, _data$details;\n            console.error('‚ùå HLS error:', {\n              type: data.type,\n              details: data.details,\n              fatal: data.fatal,\n              response: data.response\n            });\n\n            // 401 Unauthorized error\n            if (((_data$response = data.response) === null || _data$response === void 0 ? void 0 : _data$response.code) === 401 || (_data$details = data.details) !== null && _data$details !== void 0 && _data$details.includes('401')) {\n              setError('Nuk keni autorizim p√´r k√´t√´ stream. Kontrollo kredencialet.');\n              reportError({\n                type: 'authError',\n                message: 'Unauthorized - 401',\n                details: 'Kredenciale t√´ pavlefshme ose t√´ skaduara'\n              });\n              return;\n            }\n            if (data.fatal) {\n              switch (data.type) {\n                case Hls.ErrorTypes.NETWORK_ERROR:\n                  console.log('Network error, trying to recover...');\n                  hls.startLoad();\n                  break;\n                case Hls.ErrorTypes.MEDIA_ERROR:\n                  console.log('Media error, trying to recover...');\n                  hls.recoverMediaError();\n                  break;\n                default:\n                  console.log('Fatal error, cannot recover');\n                  setError('Problem me stream-in. Provo p√´rs√´ri.');\n                  reportError({\n                    type: 'hlsError',\n                    message: `HLS Error: ${data.type}`,\n                    details: data.details\n                  });\n                  break;\n              }\n            }\n          });\n          hls.attachMedia(videoRef.current);\n        } catch (err) {\n          console.error('Failed to initialize HLS:', err);\n          setError('Nuk mund t√´ inicializohet HLS player');\n          reportError({\n            type: 'initError',\n            message: err.message\n          });\n        }\n      } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n        // Safari native HLS\n        console.log('üé¨ Using Safari native HLS');\n        videoRef.current.src = src;\n        videoRef.current.load();\n        const onLoadedMetadata = () => {\n          setIsReady(true);\n          if (isPlaying) {\n            playVideo();\n          }\n        };\n        const onError = () => {\n          var _videoRef$current;\n          const videoError = (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.error;\n          console.error('Safari HLS error:', videoError);\n          if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 4) {\n            setError('Nuk keni autorizim p√´r k√´t√´ stream');\n            reportError({\n              type: 'authError',\n              message: 'Unauthorized'\n            });\n          }\n        };\n        videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\n        videoRef.current.addEventListener('error', onError);\n        return () => {\n          var _videoRef$current2, _videoRef$current3;\n          (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.removeEventListener('loadedmetadata', onLoadedMetadata);\n          (_videoRef$current3 = videoRef.current) === null || _videoRef$current3 === void 0 ? void 0 : _videoRef$current3.removeEventListener('error', onError);\n        };\n      } else {\n        setError('HLS nuk mb√´shtetet n√´ k√´t√´ browser');\n        reportError({\n          type: 'notSupported',\n          message: 'HLS not supported'\n        });\n      }\n    } else {\n      // P√´r video direkte (MP4, TS, etj)\n      console.log('üé¨ Using direct video playback');\n      videoRef.current.src = src;\n      videoRef.current.load();\n      const onCanPlay = () => {\n        setIsReady(true);\n        if (isPlaying) {\n          playVideo();\n        }\n      };\n      const onError = () => {\n        var _videoRef$current4;\n        const videoError = (_videoRef$current4 = videoRef.current) === null || _videoRef$current4 === void 0 ? void 0 : _videoRef$current4.error;\n        console.error('Direct video error:', videoError);\n        if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 4) {\n          setError('Formati i videos nuk mb√´shtetet ose nuk keni autorizim');\n          reportError({\n            type: 'videoError',\n            message: 'Format not supported or unauthorized'\n          });\n        }\n      };\n      videoRef.current.addEventListener('canplay', onCanPlay);\n      videoRef.current.addEventListener('error', onError);\n      return () => {\n        var _videoRef$current5, _videoRef$current6;\n        (_videoRef$current5 = videoRef.current) === null || _videoRef$current5 === void 0 ? void 0 : _videoRef$current5.removeEventListener('canplay', onCanPlay);\n        (_videoRef$current6 = videoRef.current) === null || _videoRef$current6 === void 0 ? void 0 : _videoRef$current6.removeEventListener('error', onError);\n      };\n    }\n    return () => {\n      if (hls) {\n        hls.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [src, isPlaying, playVideo, reportError]);\n\n  // Handle play/pause separately\n  useEffect(() => {\n    if (!videoRef.current || !isReady) return;\n    if (isPlaying) {\n      playVideo();\n    } else {\n      videoRef.current.pause();\n    }\n  }, [isPlaying, isReady, playVideo]);\n  const handleRetry = useCallback(() => {\n    if (retryCount >= MAX_RETRIES) {\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\n      return;\n    }\n    setRetryCount(prev => prev + 1);\n    setError(null);\n    errorReportedRef.current = false;\n\n    // Reload HLS\n    if (hlsRef.current) {\n      hlsRef.current.destroy();\n      hlsRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.src = '';\n      videoRef.current.load();\n      setTimeout(() => {\n        if (videoRef.current) {\n          videoRef.current.src = src;\n          videoRef.current.load();\n        }\n      }, 100);\n    }\n  }, [retryCount, src]);\n  const handleFullscreen = useCallback(() => {\n    if (videoRef.current) {\n      if (videoRef.current.requestFullscreen) {\n        videoRef.current.requestFullscreen();\n      } else if (videoRef.current.webkitRequestFullscreen) {\n        videoRef.current.webkitRequestFullscreen();\n      } else if (videoRef.current.msRequestFullscreen) {\n        videoRef.current.msRequestFullscreen();\n      }\n    }\n  }, []);\n  if (!src) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `hls-player theme-${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        playsInline: true,\n        controls: true,\n        preload: \"auto\",\n        poster: currentStreamInfo === null || currentStreamInfo === void 0 ? void 0 : currentStreamInfo.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), !isReady && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke ngarkuar stream-in...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this), isBuffering && isReady && isPlaying && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-buffering\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buffering-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke bufferuar...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRetry,\n          className: \"retry-btn\",\n          children: \"Provo p\\xEBrs\\xEBri\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.open(src, '_blank'),\n          className: \"direct-link-btn\",\n          children: \"Hap n\\xEB browser\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this), !isPlaying && isReady && !error && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"play-btn-overlay\",\n        onClick: onPlayPause,\n        children: \"\\u25B6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), isReady && !error && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"fullscreen-btn\",\n        onClick: handleFullscreen,\n        children: \"\\u26F6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }, this), currentStreamInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-info\",\n        children: [currentStreamInfo.logo && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: currentStreamInfo.logo,\n          alt: currentStreamInfo.name,\n          className: \"channel-logo\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.style.display = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"channel-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-name\",\n            children: currentStreamInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-category\",\n            children: currentStreamInfo.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this), currentEpg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"epg-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-title\",\n          children: currentEpg.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-time\",\n          children: new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 334,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"i9Vl8PzQYaL5ycKrUr4MTaSm+TM=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","currentStreamInfo","currentEpg","epgData","onEpgUpdate","_s","videoRef","hlsRef","isReady","setIsReady","error","setError","retryCount","setRetryCount","isBuffering","setIsBuffering","bufferTimerRef","errorReportedRef","MAX_RETRIES","current","clearTimeout","reportError","errorData","type","message","details","code","setTimeout","playVideo","play","console","log","err","warn","name","hls","destroy","isHlsStream","includes","substring","isSupported","enableWorker","lowLatencyMode","backBufferLength","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","manifestLoadingTimeOut","manifestLoadingMaxRetry","manifestLoadingRetryDelay","manifestLoadingMaxRetryTimeout","levelLoadingTimeOut","levelLoadingMaxRetry","levelLoadingRetryDelay","levelLoadingMaxRetryTimeout","fragLoadingTimeOut","fragLoadingMaxRetry","fragLoadingRetryDelay","fragLoadingMaxRetryTimeout","startLevel","debug","xhrSetup","xhr","url","withCredentials","setRequestHeader","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","event","data","levels","length","ERROR","_data$response","_data$details","fatal","response","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","attachMedia","canPlayType","load","onLoadedMetadata","_videoRef$current","videoError","addEventListener","_videoRef$current2","_videoRef$current3","removeEventListener","onCanPlay","_videoRef$current4","_videoRef$current5","_videoRef$current6","pause","handleRetry","prev","handleFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","className","children","ref","playsInline","controls","preload","poster","logo","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","open","alt","e","target","onerror","style","display","category","title","Date","start_timestamp","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport Hls from 'hls.js';\r\nimport './HlsPlayer.css';\r\n\r\nconst HlsPlayer = ({ \r\n  src, \r\n  isPlaying, \r\n  onPlayPause, \r\n  onClose, \r\n  onError,\r\n  theme,\r\n  currentStreamInfo,\r\n  currentEpg,\r\n  epgData,\r\n  onEpgUpdate\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n  const [isBuffering, setIsBuffering] = useState(false);\r\n  const bufferTimerRef = useRef(null);\r\n  const errorReportedRef = useRef(false);\r\n  const MAX_RETRIES = 3;\r\n\r\n  // Clean up buffer timer\r\n  useEffect(() => {\r\n    return () => {\r\n      if (bufferTimerRef.current) {\r\n        clearTimeout(bufferTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Funksion p√´r t√´ raportuar error vet√´m nj√´ her√´\r\n  const reportError = useCallback((errorData) => {\r\n    if (!errorReportedRef.current && onError) {\r\n      errorReportedRef.current = true;\r\n      \r\n      const error = {\r\n        type: errorData?.type || 'unknown',\r\n        message: errorData?.message || errorData?.details || 'Gabim i panjohur',\r\n        code: errorData?.code,\r\n        details: errorData?.details || errorData?.message\r\n      };\r\n      \r\n      onError(error);\r\n      \r\n      setTimeout(() => {\r\n        errorReportedRef.current = false;\r\n      }, 2000);\r\n    }\r\n  }, [onError]);\r\n\r\n  // Funksion p√´r t√´ luajtur videon\r\n  const playVideo = useCallback(async () => {\r\n    if (!videoRef.current) return false;\r\n    \r\n    try {\r\n      await videoRef.current.play();\r\n      console.log('‚ñ∂Ô∏è Playing successfully');\r\n      setIsBuffering(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn('Play failed:', err);\r\n      if (err.name === 'NotAllowedError') {\r\n        setIsReady(true);\r\n      }\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  // Initialize player\r\n  useEffect(() => {\r\n    if (!src || !videoRef.current) return;\r\n\r\n    let hls = null;\r\n    setIsReady(false);\r\n    setError(null);\r\n    setIsBuffering(false);\r\n    errorReportedRef.current = false;\r\n\r\n    // Clean up previous instance\r\n    if (hlsRef.current) {\r\n      hlsRef.current.destroy();\r\n      hlsRef.current = null;\r\n    }\r\n\r\n    // Detekto llojin e stream-it\r\n    const isHlsStream = src.includes('.m3u8') || src.includes('playlist.m3u8');\r\n    \r\n    console.log('üé¨ Loading stream:', { \r\n      src: src.substring(0, 100), \r\n      isHlsStream,\r\n      type: isHlsStream ? 'HLS' : 'Direct'\r\n    });\r\n\r\n    // P√´r HLS streams - GJITHMON√ã p√´rdor HLS.js p√´r .m3u8\r\n    if (isHlsStream) {\r\n      console.log('üé¨ Using HLS.js for m3u8 stream');\r\n      \r\n      if (Hls.isSupported()) {\r\n        try {\r\n          hls = new Hls({\r\n            enableWorker: true,\r\n            lowLatencyMode: true,\r\n            backBufferLength: 60,\r\n            maxBufferLength: 30,\r\n            maxMaxBufferLength: 60,\r\n            maxBufferSize: 50 * 1000 * 1000,\r\n            maxBufferHole: 0.5,\r\n            manifestLoadingTimeOut: 20000,\r\n            manifestLoadingMaxRetry: 5,\r\n            manifestLoadingRetryDelay: 1000,\r\n            manifestLoadingMaxRetryTimeout: 60000,\r\n            levelLoadingTimeOut: 20000,\r\n            levelLoadingMaxRetry: 4,\r\n            levelLoadingRetryDelay: 1000,\r\n            levelLoadingMaxRetryTimeout: 60000,\r\n            fragLoadingTimeOut: 30000,\r\n            fragLoadingMaxRetry: 4,\r\n            fragLoadingRetryDelay: 1000,\r\n            fragLoadingMaxRetryTimeout: 60000,\r\n            startLevel: -1,\r\n            debug: false,\r\n            xhrSetup: (xhr, url) => {\r\n              // Shto headers p√´r Xtream\r\n              if (url.includes('balkan-x.net')) {\r\n                xhr.withCredentials = false;\r\n                // Shto referrer dhe origin\r\n                xhr.setRequestHeader('Referer', 'http://balkan-x.net/');\r\n                xhr.setRequestHeader('Origin', 'http://balkan-x.net');\r\n              }\r\n            }\r\n          });\r\n\r\n          hlsRef.current = hls;\r\n\r\n          hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n            console.log('‚úÖ HLS media attached');\r\n            hls.loadSource(src);\r\n          });\r\n\r\n          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\r\n            console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\r\n            setIsReady(true);\r\n            setError(null);\r\n            \r\n            if (isPlaying) {\r\n              playVideo();\r\n            }\r\n          });\r\n\r\n          hls.on(Hls.Events.ERROR, (event, data) => {\r\n            console.error('‚ùå HLS error:', {\r\n              type: data.type,\r\n              details: data.details,\r\n              fatal: data.fatal,\r\n              response: data.response\r\n            });\r\n            \r\n            // 401 Unauthorized error\r\n            if (data.response?.code === 401 || data.details?.includes('401')) {\r\n              setError('Nuk keni autorizim p√´r k√´t√´ stream. Kontrollo kredencialet.');\r\n              reportError({ \r\n                type: 'authError', \r\n                message: 'Unauthorized - 401',\r\n                details: 'Kredenciale t√´ pavlefshme ose t√´ skaduara'\r\n              });\r\n              return;\r\n            }\r\n            \r\n            if (data.fatal) {\r\n              switch (data.type) {\r\n                case Hls.ErrorTypes.NETWORK_ERROR:\r\n                  console.log('Network error, trying to recover...');\r\n                  hls.startLoad();\r\n                  break;\r\n                case Hls.ErrorTypes.MEDIA_ERROR:\r\n                  console.log('Media error, trying to recover...');\r\n                  hls.recoverMediaError();\r\n                  break;\r\n                default:\r\n                  console.log('Fatal error, cannot recover');\r\n                  setError('Problem me stream-in. Provo p√´rs√´ri.');\r\n                  reportError({ \r\n                    type: 'hlsError', \r\n                    message: `HLS Error: ${data.type}`,\r\n                    details: data.details \r\n                  });\r\n                  break;\r\n              }\r\n            }\r\n          });\r\n\r\n          hls.attachMedia(videoRef.current);\r\n          \r\n        } catch (err) {\r\n          console.error('Failed to initialize HLS:', err);\r\n          setError('Nuk mund t√´ inicializohet HLS player');\r\n          reportError({ type: 'initError', message: err.message });\r\n        }\r\n      } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\r\n        // Safari native HLS\r\n        console.log('üé¨ Using Safari native HLS');\r\n        videoRef.current.src = src;\r\n        videoRef.current.load();\r\n        \r\n        const onLoadedMetadata = () => {\r\n          setIsReady(true);\r\n          if (isPlaying) {\r\n            playVideo();\r\n          }\r\n        };\r\n        \r\n        const onError = () => {\r\n          const videoError = videoRef.current?.error;\r\n          console.error('Safari HLS error:', videoError);\r\n          \r\n          if (videoError?.code === 4) {\r\n            setError('Nuk keni autorizim p√´r k√´t√´ stream');\r\n            reportError({ type: 'authError', message: 'Unauthorized' });\r\n          }\r\n        };\r\n        \r\n        videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\r\n        videoRef.current.addEventListener('error', onError);\r\n        \r\n        return () => {\r\n          videoRef.current?.removeEventListener('loadedmetadata', onLoadedMetadata);\r\n          videoRef.current?.removeEventListener('error', onError);\r\n        };\r\n      } else {\r\n        setError('HLS nuk mb√´shtetet n√´ k√´t√´ browser');\r\n        reportError({ type: 'notSupported', message: 'HLS not supported' });\r\n      }\r\n    } else {\r\n      // P√´r video direkte (MP4, TS, etj)\r\n      console.log('üé¨ Using direct video playback');\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      const onCanPlay = () => {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          playVideo();\r\n        }\r\n      };\r\n\r\n      const onError = () => {\r\n        const videoError = videoRef.current?.error;\r\n        console.error('Direct video error:', videoError);\r\n        \r\n        if (videoError?.code === 4) {\r\n          setError('Formati i videos nuk mb√´shtetet ose nuk keni autorizim');\r\n          reportError({ type: 'videoError', message: 'Format not supported or unauthorized' });\r\n        }\r\n      };\r\n\r\n      videoRef.current.addEventListener('canplay', onCanPlay);\r\n      videoRef.current.addEventListener('error', onError);\r\n      \r\n      return () => {\r\n        videoRef.current?.removeEventListener('canplay', onCanPlay);\r\n        videoRef.current?.removeEventListener('error', onError);\r\n      };\r\n    }\r\n\r\n    return () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n        hlsRef.current = null;\r\n      }\r\n    };\r\n  }, [src, isPlaying, playVideo, reportError]);\r\n\r\n  // Handle play/pause separately\r\n  useEffect(() => {\r\n    if (!videoRef.current || !isReady) return;\r\n\r\n    if (isPlaying) {\r\n      playVideo();\r\n    } else {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [isPlaying, isReady, playVideo]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    if (retryCount >= MAX_RETRIES) {\r\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\r\n      return;\r\n    }\r\n\r\n    setRetryCount(prev => prev + 1);\r\n    setError(null);\r\n    errorReportedRef.current = false;\r\n    \r\n    // Reload HLS\r\n    if (hlsRef.current) {\r\n      hlsRef.current.destroy();\r\n      hlsRef.current = null;\r\n    }\r\n    \r\n    if (videoRef.current) {\r\n      videoRef.current.src = '';\r\n      videoRef.current.load();\r\n      \r\n      setTimeout(() => {\r\n        if (videoRef.current) {\r\n          videoRef.current.src = src;\r\n          videoRef.current.load();\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [retryCount, src]);\r\n\r\n  const handleFullscreen = useCallback(() => {\r\n    if (videoRef.current) {\r\n      if (videoRef.current.requestFullscreen) {\r\n        videoRef.current.requestFullscreen();\r\n      } else if (videoRef.current.webkitRequestFullscreen) {\r\n        videoRef.current.webkitRequestFullscreen();\r\n      } else if (videoRef.current.msRequestFullscreen) {\r\n        videoRef.current.msRequestFullscreen();\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (!src) return null;\r\n\r\n  return (\r\n    <div className={`hls-player theme-${theme}`}>\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-element\"\r\n          playsInline\r\n          controls={true}\r\n          preload=\"auto\"\r\n          poster={currentStreamInfo?.logo}\r\n        />\r\n        \r\n        {/* Loading Indicator */}\r\n        {!isReady && !error && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <p>Duke ngarkuar stream-in...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Buffering Indicator */}\r\n        {isBuffering && isReady && isPlaying && (\r\n          <div className=\"player-buffering\">\r\n            <div className=\"buffering-spinner\"></div>\r\n            <p>Duke bufferuar...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"player-error\">\r\n            <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n            <p>{error}</p>\r\n            <button onClick={handleRetry} className=\"retry-btn\">\r\n              Provo p√´rs√´ri\r\n            </button>\r\n            <button \r\n              onClick={() => window.open(src, '_blank')} \r\n              className=\"direct-link-btn\"\r\n            >\r\n              Hap n√´ browser\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Play Button Overlay */}\r\n        {!isPlaying && isReady && !error && (\r\n          <button className=\"play-btn-overlay\" onClick={onPlayPause}>\r\n            ‚ñ∂\r\n          </button>\r\n        )}\r\n\r\n        {/* Fullscreen Button */}\r\n        {isReady && !error && (\r\n          <button className=\"fullscreen-btn\" onClick={handleFullscreen}>\r\n            ‚õ∂\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Channel Info */}\r\n      {currentStreamInfo && (\r\n        <div className=\"player-info\">\r\n          <div className=\"channel-info\">\r\n            {currentStreamInfo.logo && (\r\n              <img \r\n                src={currentStreamInfo.logo} \r\n                alt={currentStreamInfo.name}\r\n                className=\"channel-logo\"\r\n                onError={(e) => {\r\n                  e.target.onerror = null;\r\n                  e.target.style.display = 'none';\r\n                }}\r\n              />\r\n            )}\r\n            <div className=\"channel-details\">\r\n              <span className=\"channel-name\">{currentStreamInfo.name}</span>\r\n              <span className=\"channel-category\">{currentStreamInfo.category}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          {currentEpg && (\r\n            <div className=\"epg-info\">\r\n              <span className=\"epg-title\">{currentEpg.title}</span>\r\n              <span className=\"epg-time\">\r\n                {new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], { \r\n                  hour: '2-digit', \r\n                  minute: '2-digit' \r\n                })}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}