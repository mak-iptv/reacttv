{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport Hls from 'hls.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !src) return;\n    const loadVideo = () => {\n      if (Hls.isSupported()) {\n        if (hlsRef.current) {\n          hlsRef.current.destroy();\n        }\n        const hls = new Hls({\n          enableWorker: true,\n          lowLatencyMode: true,\n          backBufferLength: 90\n        });\n        hlsRef.current = hls;\n        hls.loadSource(src);\n        hls.attachMedia(video);\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          setIsReady(true);\n          if (isPlaying) {\n            video.play().catch(err => {\n              console.error('Playback error:', err);\n              onError === null || onError === void 0 ? void 0 : onError(err);\n            });\n          }\n        });\n        hls.on(Hls.Events.ERROR, (event, data) => {\n          if (data.fatal) {\n            console.error('HLS fatal error:', data);\n            setError('Gabim në transmetim');\n            onError === null || onError === void 0 ? void 0 : onError(new Error('HLS fatal error'));\n          }\n        });\n      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\n        // Native HLS support (Safari)\n        video.src = src;\n        video.addEventListener('loadedmetadata', () => {\n          setIsReady(true);\n          if (isPlaying) {\n            video.play().catch(err => {\n              console.error('Playback error:', err);\n              onError === null || onError === void 0 ? void 0 : onError(err);\n            });\n          }\n        });\n      } else {\n        setError('HLS nuk mbështetet në këtë shfletues');\n        onError === null || onError === void 0 ? void 0 : onError(new Error('HLS not supported'));\n      }\n    };\n    loadVideo();\n    return () => {\n      if (hlsRef.current) {\n        hlsRef.current.destroy();\n        hlsRef.current = null;\n      }\n      video.src = '';\n    };\n  }, [src]);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !isReady) return;\n    if (isPlaying) {\n      video.play().catch(err => {\n        console.error('Playback error:', err);\n        onError === null || onError === void 0 ? void 0 : onError(err);\n      });\n    } else {\n      video.pause();\n    }\n  }, [isPlaying, isReady]);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hls-player-error\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"error-retry\",\n          onClick: onClose,\n          children: \"Mbyll\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"hls-player-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"hls-player-video\",\n      controls: true,\n      playsInline: true,\n      poster: null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hls-player-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"hls-control-btn play-pause\",\n        onClick: onPlayPause,\n        \"aria-label\": isPlaying ? 'Pause' : 'Play',\n        children: isPlaying ? '⏸️' : '▶️'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"hls-control-btn close\",\n        onClick: onClose,\n        \"aria-label\": \"Close\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), !isReady && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hls-player-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Duke ngarkuar...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"mjUyLYlSCs4prncuvZLxqFC+TEY=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","_s","videoRef","hlsRef","isReady","setIsReady","error","setError","video","current","loadVideo","isSupported","destroy","hls","enableWorker","lowLatencyMode","backBufferLength","loadSource","attachMedia","on","Events","MANIFEST_PARSED","play","catch","err","console","ERROR","event","data","fatal","Error","canPlayType","addEventListener","pause","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","controls","playsInline","poster","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport Hls from 'hls.js';\r\n\r\nconst HlsPlayer = ({ src, isPlaying, onPlayPause, onClose, onError, theme }) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video || !src) return;\r\n\r\n    const loadVideo = () => {\r\n      if (Hls.isSupported()) {\r\n        if (hlsRef.current) {\r\n          hlsRef.current.destroy();\r\n        }\r\n\r\n        const hls = new Hls({\r\n          enableWorker: true,\r\n          lowLatencyMode: true,\r\n          backBufferLength: 90,\r\n        });\r\n\r\n        hlsRef.current = hls;\r\n        hls.loadSource(src);\r\n        hls.attachMedia(video);\r\n\r\n        hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n          setIsReady(true);\r\n          if (isPlaying) {\r\n            video.play().catch(err => {\r\n              console.error('Playback error:', err);\r\n              onError?.(err);\r\n            });\r\n          }\r\n        });\r\n\r\n        hls.on(Hls.Events.ERROR, (event, data) => {\r\n          if (data.fatal) {\r\n            console.error('HLS fatal error:', data);\r\n            setError('Gabim në transmetim');\r\n            onError?.(new Error('HLS fatal error'));\r\n          }\r\n        });\r\n\r\n      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\r\n        // Native HLS support (Safari)\r\n        video.src = src;\r\n        video.addEventListener('loadedmetadata', () => {\r\n          setIsReady(true);\r\n          if (isPlaying) {\r\n            video.play().catch(err => {\r\n              console.error('Playback error:', err);\r\n              onError?.(err);\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        setError('HLS nuk mbështetet në këtë shfletues');\r\n        onError?.(new Error('HLS not supported'));\r\n      }\r\n    };\r\n\r\n    loadVideo();\r\n\r\n    return () => {\r\n      if (hlsRef.current) {\r\n        hlsRef.current.destroy();\r\n        hlsRef.current = null;\r\n      }\r\n      video.src = '';\r\n    };\r\n  }, [src]);\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video || !isReady) return;\r\n\r\n    if (isPlaying) {\r\n      video.play().catch(err => {\r\n        console.error('Playback error:', err);\r\n        onError?.(err);\r\n      });\r\n    } else {\r\n      video.pause();\r\n    }\r\n  }, [isPlaying, isReady]);\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"hls-player-error\">\r\n        <div className=\"error-content\">\r\n          <span className=\"error-icon\">⚠️</span>\r\n          <p>{error}</p>\r\n          <button className=\"error-retry\" onClick={onClose}>\r\n            Mbyll\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"hls-player-container\">\r\n      <video\r\n        ref={videoRef}\r\n        className=\"hls-player-video\"\r\n        controls\r\n        playsInline\r\n        poster={null}\r\n      />\r\n      \r\n      <div className=\"hls-player-controls\">\r\n        <button \r\n          className=\"hls-control-btn play-pause\"\r\n          onClick={onPlayPause}\r\n          aria-label={isPlaying ? 'Pause' : 'Play'}\r\n        >\r\n          {isPlaying ? '⏸️' : '▶️'}\r\n        </button>\r\n        \r\n        <button \r\n          className=\"hls-control-btn close\"\r\n          onClick={onClose}\r\n          aria-label=\"Close\"\r\n        >\r\n          ✕\r\n        </button>\r\n      </div>\r\n\r\n      {!isReady && (\r\n        <div className=\"hls-player-loading\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Duke ngarkuar...</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}