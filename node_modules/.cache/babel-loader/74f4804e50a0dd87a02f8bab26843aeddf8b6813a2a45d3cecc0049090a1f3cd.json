{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\n// src/components/HlsPlayer.jsx\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Hls from 'hls.js';\nimport './HlsPlayer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme,\n  currentStreamInfo,\n  currentEpg,\n  epgData,\n  onEpgUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const controlsTimeoutRef = useRef(null);\n  const playPromiseRef = useRef(null);\n\n  // ================ DESTROY HLS INSTANCE ================\n  const destroyHls = useCallback(() => {\n    if (hlsRef.current) {\n      try {\n        hlsRef.current.destroy();\n      } catch (e) {\n        console.error('Gabim gjat√´ shkat√´rrimit t√´ HLS:', e);\n      }\n      hlsRef.current = null;\n    }\n  }, []);\n\n  // ================ STOP PLAYBACK ================\n  const stopPlayback = useCallback(() => {\n    if (playPromiseRef.current) {\n      try {\n        playPromiseRef.current.then(() => {\n          if (videoRef.current) {\n            videoRef.current.pause();\n          }\n        }).catch(() => {});\n      } catch (e) {}\n      playPromiseRef.current = null;\n    }\n    if (videoRef.current) {\n      videoRef.current.pause();\n      videoRef.current.removeAttribute('src');\n      videoRef.current.load();\n    }\n  }, []);\n\n  // ================ INIT HLS ================\n  const initHls = useCallback((video, url) => {\n    if (!video || !url) return;\n    destroyHls();\n    stopPlayback();\n\n    // Kontrollo n√´se HLS mb√´shtetet\n    if (Hls.isSupported()) {\n      const hls = new Hls({\n        enableWorker: true,\n        lowLatencyMode: true,\n        backBufferLength: 90,\n        maxBufferLength: 30,\n        maxMaxBufferLength: 600,\n        startLevel: -1,\n        // Auto\n        debug: false\n      });\n      hlsRef.current = hls;\n      hls.loadSource(url);\n      hls.attachMedia(video);\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\n        console.log('‚úÖ HLS manifest u parsua');\n        if (isPlaying) {\n          // Shtyje play-in me setTimeout p√´r t√´ shmangur interrupt\n          setTimeout(() => {\n            if (videoRef.current && isPlaying) {\n              playPromiseRef.current = videoRef.current.play();\n              playPromiseRef.current.catch(error => {\n                console.error('‚ùå Gabim n√´ play:', error);\n                if (error.name === 'AbortError' || error.message.includes('interrupt')) {\n                  console.log('‚ö†Ô∏è Play u nd√´rpre, duke u p√´rpjekur s√´rish...');\n                  setTimeout(() => {\n                    if (videoRef.current && isPlaying) {\n                      videoRef.current.play().catch(console.error);\n                    }\n                  }, 100);\n                } else {\n                  onError === null || onError === void 0 ? void 0 : onError(error);\n                }\n              });\n            }\n          }, 50);\n        }\n      });\n      hls.on(Hls.Events.ERROR, (event, data) => {\n        console.error('‚ùå HLS error:', data);\n        if (data.fatal) {\n          switch (data.type) {\n            case Hls.ErrorTypes.NETWORK_ERROR:\n              console.log('‚ö†Ô∏è Gabim network, duke u p√´rpjekur t√´ rifillohet...');\n              hls.startLoad();\n              break;\n            case Hls.ErrorTypes.MEDIA_ERROR:\n              console.log('‚ö†Ô∏è Gabim media, duke u p√´rpjekur t√´ rifillohet...');\n              hls.recoverMediaError();\n              break;\n            default:\n              destroyHls();\n              onError === null || onError === void 0 ? void 0 : onError(new Error('Gabim n√´ leximin e stream-it'));\n              break;\n          }\n        }\n      });\n      video.addEventListener('waiting', () => setIsBuffering(true));\n      video.addEventListener('playing', () => setIsBuffering(false));\n      video.addEventListener('canplay', () => setIsBuffering(false));\n    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\n      // P√´r Safari\n      video.src = url;\n      video.addEventListener('loadedmetadata', () => {\n        if (isPlaying) {\n          setTimeout(() => {\n            video.play().catch(error => {\n              console.error('‚ùå Gabim n√´ play (Safari):', error);\n              onError === null || onError === void 0 ? void 0 : onError(error);\n            });\n          }, 50);\n        }\n      });\n    } else {\n      onError === null || onError === void 0 ? void 0 : onError(new Error('HLS nuk mb√´shtetet n√´ k√´t√´ shfletues'));\n    }\n  }, [isPlaying, destroyHls, stopPlayback, onError]);\n\n  // ================ LOAD STREAM ================\n  useEffect(() => {\n    if (!src || !videoRef.current) return;\n    console.log('üé¨ Duke ngarkuar stream:', src);\n\n    // Pastro gjendjen e m√´parshme\n    destroyHls();\n    stopPlayback();\n\n    // Inicializo HLS-in e ri\n    initHls(videoRef.current, src);\n    return () => {\n      destroyHls();\n      stopPlayback();\n    };\n  }, [src, initHls, destroyHls, stopPlayback]);\n\n  // ================ PLAY/PAUSE CONTROL ================\n  useEffect(() => {\n    if (!videoRef.current) return;\n    const video = videoRef.current;\n    const handlePlay = async () => {\n      try {\n        if (playPromiseRef.current) {\n          await playPromiseRef.current;\n        }\n        playPromiseRef.current = video.play();\n        await playPromiseRef.current;\n      } catch (error) {\n        console.error('‚ùå Gabim n√´ play/pause:', error);\n        if (error.name === 'AbortError' || error.message.includes('interrupt')) {\n          console.log('‚ö†Ô∏è Play u nd√´rpre, duke u p√´rpjekur s√´rish...');\n          setTimeout(() => {\n            if (videoRef.current && isPlaying) {\n              videoRef.current.play().catch(console.error);\n            }\n          }, 100);\n        } else {\n          onError === null || onError === void 0 ? void 0 : onError(error);\n        }\n      }\n    };\n    if (isPlaying) {\n      handlePlay();\n    } else {\n      video.pause();\n    }\n  }, [isPlaying, onError]);\n\n  // ================ CONTROLS TIMEOUT ================\n  useEffect(() => {\n    const handleMouseMove = () => {\n      setShowControls(true);\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n      if (isPlaying) {\n        controlsTimeoutRef.current = setTimeout(() => {\n          setShowControls(false);\n        }, 3000);\n      }\n    };\n    const playerContainer = document.querySelector('.hls-player-container');\n    if (playerContainer) {\n      playerContainer.addEventListener('mousemove', handleMouseMove);\n      playerContainer.addEventListener('mouseleave', () => {\n        if (isPlaying) {\n          setShowControls(false);\n        }\n      });\n    }\n    return () => {\n      if (playerContainer) {\n        playerContainer.removeEventListener('mousemove', handleMouseMove);\n        playerContainer.removeEventListener('mouseleave', () => {});\n      }\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n    };\n  }, [isPlaying]);\n\n  // ================ EVENT LISTENERS ================\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    const handleTimeUpdate = () => setCurrentTime(video.currentTime);\n    const handleDurationChange = () => setDuration(video.duration);\n    const handleVolumeChange = () => {\n      setVolume(video.volume);\n      setIsMuted(video.muted);\n    };\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n    const handleError = e => {\n      console.error('üé¨ Video error:', e);\n      onError === null || onError === void 0 ? void 0 : onError(new Error('Gabim n√´ leximin e videos'));\n    };\n    video.addEventListener('timeupdate', handleTimeUpdate);\n    video.addEventListener('durationchange', handleDurationChange);\n    video.addEventListener('volumechange', handleVolumeChange);\n    video.addEventListener('error', handleError);\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      video.removeEventListener('timeupdate', handleTimeUpdate);\n      video.removeEventListener('durationchange', handleDurationChange);\n      video.removeEventListener('volumechange', handleVolumeChange);\n      video.removeEventListener('error', handleError);\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, [onError]);\n\n  // ================ VOLUME CONTROL ================\n  const handleVolumeChange = useCallback(e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    if (videoRef.current) {\n      videoRef.current.volume = newVolume;\n      videoRef.current.muted = false;\n      setIsMuted(false);\n    }\n  }, []);\n  const toggleMute = useCallback(() => {\n    if (videoRef.current) {\n      videoRef.current.muted = !isMuted;\n      setIsMuted(!isMuted);\n    }\n  }, [isMuted]);\n\n  // ================ FULLSCREEN ================\n  const toggleFullscreen = useCallback(() => {\n    const container = document.querySelector('.hls-player-container');\n    if (!container) return;\n    if (!document.fullscreenElement) {\n      container.requestFullscreen();\n    } else {\n      document.exitFullscreen();\n    }\n  }, []);\n\n  // ================ SEEK ================\n  const handleSeek = useCallback(e => {\n    const newTime = parseFloat(e.target.value);\n    setCurrentTime(newTime);\n    if (videoRef.current) {\n      videoRef.current.currentTime = newTime;\n    }\n  }, []);\n\n  // ================ FORMAT TIME ================\n  const formatTime = seconds => {\n    if (isNaN(seconds)) return '00:00';\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor(seconds % 3600 / 60);\n    const s = Math.floor(seconds % 60);\n    if (h > 0) {\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n    }\n    return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `hls-player-container theme-${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"hls-video\",\n      onClick: onPlayPause,\n      playsInline: true,\n      preload: \"auto\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), isBuffering && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hls-buffering\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Duke u ngarkuar...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }, this), !isPlaying && !isBuffering && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"hls-play-large\",\n      onClick: onPlayPause,\n      children: \"\\u25B6\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `hls-controls ${showControls ? 'visible' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hls-progress\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: duration || 0,\n          value: currentTime,\n          onChange: handleSeek,\n          className: \"hls-progress-bar\",\n          style: {\n            background: `linear-gradient(to right, var(--primary-color) ${currentTime / (duration || 1) * 100}%, var(--border-color) ${currentTime / (duration || 1) * 100}%)`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hls-time\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatTime(currentTime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"/\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: formatTime(duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hls-controls-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hls-controls-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"hls-control-btn\",\n            onClick: onPlayPause,\n            children: isPlaying ? '‚è∏' : '‚ñ∂'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hls-volume\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"hls-control-btn\",\n              onClick: toggleMute,\n              children: isMuted || volume === 0 ? 'üîá' : volume < 0.5 ? 'üîâ' : 'üîä'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0\",\n              max: \"1\",\n              step: \"0.05\",\n              value: isMuted ? 0 : volume,\n              onChange: handleVolumeChange,\n              className: \"hls-volume-slider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this), currentStreamInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hls-stream-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hls-stream-name\",\n              children: currentStreamInfo.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 17\n            }, this), currentEpg && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hls-stream-epg\",\n              children: currentEpg.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hls-controls-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"hls-control-btn\",\n            onClick: toggleFullscreen,\n            children: isFullscreen ? 'üóó' : 'üóñ'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"hls-control-btn close\",\n            onClick: onClose,\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 330,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"f8g21Caauc8n02DRvQzCSqQ/MMs=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","currentStreamInfo","currentEpg","epgData","onEpgUpdate","_s","videoRef","hlsRef","isBuffering","setIsBuffering","currentTime","setCurrentTime","duration","setDuration","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","controlsTimeoutRef","playPromiseRef","destroyHls","current","destroy","e","console","error","stopPlayback","then","pause","catch","removeAttribute","load","initHls","video","url","isSupported","hls","enableWorker","lowLatencyMode","backBufferLength","maxBufferLength","maxMaxBufferLength","startLevel","debug","loadSource","attachMedia","on","Events","MANIFEST_PARSED","log","setTimeout","play","name","message","includes","ERROR","event","data","fatal","type","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","Error","addEventListener","canPlayType","handlePlay","handleMouseMove","clearTimeout","playerContainer","document","querySelector","removeEventListener","handleTimeUpdate","handleDurationChange","handleVolumeChange","muted","handleFullscreenChange","fullscreenElement","handleError","newVolume","parseFloat","target","value","toggleMute","toggleFullscreen","container","requestFullscreen","exitFullscreen","handleSeek","newTime","formatTime","seconds","isNaN","h","Math","floor","m","s","toString","padStart","className","children","ref","onClick","playsInline","preload","fileName","_jsxFileName","lineNumber","columnNumber","min","max","onChange","style","background","step","title","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport Hls from 'hls.js';\r\nimport './HlsPlayer.css';\r\n\r\nconst HlsPlayer = ({ \r\n  src, \r\n  isPlaying, \r\n  onPlayPause, \r\n  onClose, \r\n  onError, \r\n  theme,\r\n  currentStreamInfo,\r\n  currentEpg,\r\n  epgData,\r\n  onEpgUpdate \r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isBuffering, setIsBuffering] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n  const controlsTimeoutRef = useRef(null);\r\n  const playPromiseRef = useRef(null);\r\n\r\n  // ================ DESTROY HLS INSTANCE ================\r\n  const destroyHls = useCallback(() => {\r\n    if (hlsRef.current) {\r\n      try {\r\n        hlsRef.current.destroy();\r\n      } catch (e) {\r\n        console.error('Gabim gjat√´ shkat√´rrimit t√´ HLS:', e);\r\n      }\r\n      hlsRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // ================ STOP PLAYBACK ================\r\n  const stopPlayback = useCallback(() => {\r\n    if (playPromiseRef.current) {\r\n      try {\r\n        playPromiseRef.current.then(() => {\r\n          if (videoRef.current) {\r\n            videoRef.current.pause();\r\n          }\r\n        }).catch(() => {});\r\n      } catch (e) {}\r\n      playPromiseRef.current = null;\r\n    }\r\n    \r\n    if (videoRef.current) {\r\n      videoRef.current.pause();\r\n      videoRef.current.removeAttribute('src');\r\n      videoRef.current.load();\r\n    }\r\n  }, []);\r\n\r\n  // ================ INIT HLS ================\r\n  const initHls = useCallback((video, url) => {\r\n    if (!video || !url) return;\r\n\r\n    destroyHls();\r\n    stopPlayback();\r\n\r\n    // Kontrollo n√´se HLS mb√´shtetet\r\n    if (Hls.isSupported()) {\r\n      const hls = new Hls({\r\n        enableWorker: true,\r\n        lowLatencyMode: true,\r\n        backBufferLength: 90,\r\n        maxBufferLength: 30,\r\n        maxMaxBufferLength: 600,\r\n        startLevel: -1, // Auto\r\n        debug: false\r\n      });\r\n\r\n      hlsRef.current = hls;\r\n      hls.loadSource(url);\r\n      hls.attachMedia(video);\r\n\r\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        console.log('‚úÖ HLS manifest u parsua');\r\n        if (isPlaying) {\r\n          // Shtyje play-in me setTimeout p√´r t√´ shmangur interrupt\r\n          setTimeout(() => {\r\n            if (videoRef.current && isPlaying) {\r\n              playPromiseRef.current = videoRef.current.play();\r\n              playPromiseRef.current.catch(error => {\r\n                console.error('‚ùå Gabim n√´ play:', error);\r\n                if (error.name === 'AbortError' || error.message.includes('interrupt')) {\r\n                  console.log('‚ö†Ô∏è Play u nd√´rpre, duke u p√´rpjekur s√´rish...');\r\n                  setTimeout(() => {\r\n                    if (videoRef.current && isPlaying) {\r\n                      videoRef.current.play().catch(console.error);\r\n                    }\r\n                  }, 100);\r\n                } else {\r\n                  onError?.(error);\r\n                }\r\n              });\r\n            }\r\n          }, 50);\r\n        }\r\n      });\r\n\r\n      hls.on(Hls.Events.ERROR, (event, data) => {\r\n        console.error('‚ùå HLS error:', data);\r\n        if (data.fatal) {\r\n          switch (data.type) {\r\n            case Hls.ErrorTypes.NETWORK_ERROR:\r\n              console.log('‚ö†Ô∏è Gabim network, duke u p√´rpjekur t√´ rifillohet...');\r\n              hls.startLoad();\r\n              break;\r\n            case Hls.ErrorTypes.MEDIA_ERROR:\r\n              console.log('‚ö†Ô∏è Gabim media, duke u p√´rpjekur t√´ rifillohet...');\r\n              hls.recoverMediaError();\r\n              break;\r\n            default:\r\n              destroyHls();\r\n              onError?.(new Error('Gabim n√´ leximin e stream-it'));\r\n              break;\r\n          }\r\n        }\r\n      });\r\n\r\n      video.addEventListener('waiting', () => setIsBuffering(true));\r\n      video.addEventListener('playing', () => setIsBuffering(false));\r\n      video.addEventListener('canplay', () => setIsBuffering(false));\r\n\r\n    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {\r\n      // P√´r Safari\r\n      video.src = url;\r\n      video.addEventListener('loadedmetadata', () => {\r\n        if (isPlaying) {\r\n          setTimeout(() => {\r\n            video.play().catch(error => {\r\n              console.error('‚ùå Gabim n√´ play (Safari):', error);\r\n              onError?.(error);\r\n            });\r\n          }, 50);\r\n        }\r\n      });\r\n    } else {\r\n      onError?.(new Error('HLS nuk mb√´shtetet n√´ k√´t√´ shfletues'));\r\n    }\r\n  }, [isPlaying, destroyHls, stopPlayback, onError]);\r\n\r\n  // ================ LOAD STREAM ================\r\n  useEffect(() => {\r\n    if (!src || !videoRef.current) return;\r\n\r\n    console.log('üé¨ Duke ngarkuar stream:', src);\r\n    \r\n    // Pastro gjendjen e m√´parshme\r\n    destroyHls();\r\n    stopPlayback();\r\n    \r\n    // Inicializo HLS-in e ri\r\n    initHls(videoRef.current, src);\r\n\r\n    return () => {\r\n      destroyHls();\r\n      stopPlayback();\r\n    };\r\n  }, [src, initHls, destroyHls, stopPlayback]);\r\n\r\n  // ================ PLAY/PAUSE CONTROL ================\r\n  useEffect(() => {\r\n    if (!videoRef.current) return;\r\n\r\n    const video = videoRef.current;\r\n\r\n    const handlePlay = async () => {\r\n      try {\r\n        if (playPromiseRef.current) {\r\n          await playPromiseRef.current;\r\n        }\r\n        playPromiseRef.current = video.play();\r\n        await playPromiseRef.current;\r\n      } catch (error) {\r\n        console.error('‚ùå Gabim n√´ play/pause:', error);\r\n        if (error.name === 'AbortError' || error.message.includes('interrupt')) {\r\n          console.log('‚ö†Ô∏è Play u nd√´rpre, duke u p√´rpjekur s√´rish...');\r\n          setTimeout(() => {\r\n            if (videoRef.current && isPlaying) {\r\n              videoRef.current.play().catch(console.error);\r\n            }\r\n          }, 100);\r\n        } else {\r\n          onError?.(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isPlaying) {\r\n      handlePlay();\r\n    } else {\r\n      video.pause();\r\n    }\r\n  }, [isPlaying, onError]);\r\n\r\n  // ================ CONTROLS TIMEOUT ================\r\n  useEffect(() => {\r\n    const handleMouseMove = () => {\r\n      setShowControls(true);\r\n      \r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current);\r\n      }\r\n      \r\n      if (isPlaying) {\r\n        controlsTimeoutRef.current = setTimeout(() => {\r\n          setShowControls(false);\r\n        }, 3000);\r\n      }\r\n    };\r\n\r\n    const playerContainer = document.querySelector('.hls-player-container');\r\n    if (playerContainer) {\r\n      playerContainer.addEventListener('mousemove', handleMouseMove);\r\n      playerContainer.addEventListener('mouseleave', () => {\r\n        if (isPlaying) {\r\n          setShowControls(false);\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (playerContainer) {\r\n        playerContainer.removeEventListener('mousemove', handleMouseMove);\r\n        playerContainer.removeEventListener('mouseleave', () => {});\r\n      }\r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [isPlaying]);\r\n\r\n  // ================ EVENT LISTENERS ================\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n\r\n    const handleTimeUpdate = () => setCurrentTime(video.currentTime);\r\n    const handleDurationChange = () => setDuration(video.duration);\r\n    const handleVolumeChange = () => {\r\n      setVolume(video.volume);\r\n      setIsMuted(video.muted);\r\n    };\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n    const handleError = (e) => {\r\n      console.error('üé¨ Video error:', e);\r\n      onError?.(new Error('Gabim n√´ leximin e videos'));\r\n    };\r\n\r\n    video.addEventListener('timeupdate', handleTimeUpdate);\r\n    video.addEventListener('durationchange', handleDurationChange);\r\n    video.addEventListener('volumechange', handleVolumeChange);\r\n    video.addEventListener('error', handleError);\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n\r\n    return () => {\r\n      video.removeEventListener('timeupdate', handleTimeUpdate);\r\n      video.removeEventListener('durationchange', handleDurationChange);\r\n      video.removeEventListener('volumechange', handleVolumeChange);\r\n      video.removeEventListener('error', handleError);\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [onError]);\r\n\r\n  // ================ VOLUME CONTROL ================\r\n  const handleVolumeChange = useCallback((e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = newVolume;\r\n      videoRef.current.muted = false;\r\n      setIsMuted(false);\r\n    }\r\n  }, []);\r\n\r\n  const toggleMute = useCallback(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.muted = !isMuted;\r\n      setIsMuted(!isMuted);\r\n    }\r\n  }, [isMuted]);\r\n\r\n  // ================ FULLSCREEN ================\r\n  const toggleFullscreen = useCallback(() => {\r\n    const container = document.querySelector('.hls-player-container');\r\n    if (!container) return;\r\n\r\n    if (!document.fullscreenElement) {\r\n      container.requestFullscreen();\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n  }, []);\r\n\r\n  // ================ SEEK ================\r\n  const handleSeek = useCallback((e) => {\r\n    const newTime = parseFloat(e.target.value);\r\n    setCurrentTime(newTime);\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = newTime;\r\n    }\r\n  }, []);\r\n\r\n  // ================ FORMAT TIME ================\r\n  const formatTime = (seconds) => {\r\n    if (isNaN(seconds)) return '00:00';\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    \r\n    if (h > 0) {\r\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div className={`hls-player-container theme-${theme}`}>\r\n      <video\r\n        ref={videoRef}\r\n        className=\"hls-video\"\r\n        onClick={onPlayPause}\r\n        playsInline\r\n        preload=\"auto\"\r\n      />\r\n      \r\n      {/* Buffering Spinner */}\r\n      {isBuffering && (\r\n        <div className=\"hls-buffering\">\r\n          <div className=\"spinner\"></div>\r\n          <span>Duke u ngarkuar...</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Play/Pause Large Center Button */}\r\n      {!isPlaying && !isBuffering && (\r\n        <button className=\"hls-play-large\" onClick={onPlayPause}>\r\n          ‚ñ∂\r\n        </button>\r\n      )}\r\n\r\n      {/* Controls */}\r\n      <div className={`hls-controls ${showControls ? 'visible' : ''}`}>\r\n        {/* Progress Bar */}\r\n        <div className=\"hls-progress\">\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max={duration || 0}\r\n            value={currentTime}\r\n            onChange={handleSeek}\r\n            className=\"hls-progress-bar\"\r\n            style={{\r\n              background: `linear-gradient(to right, var(--primary-color) ${(currentTime / (duration || 1)) * 100}%, var(--border-color) ${(currentTime / (duration || 1)) * 100}%)`\r\n            }}\r\n          />\r\n          <div className=\"hls-time\">\r\n            <span>{formatTime(currentTime)}</span>\r\n            <span>/</span>\r\n            <span>{formatTime(duration)}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"hls-controls-bottom\">\r\n          <div className=\"hls-controls-left\">\r\n            <button className=\"hls-control-btn\" onClick={onPlayPause}>\r\n              {isPlaying ? '‚è∏' : '‚ñ∂'}\r\n            </button>\r\n            \r\n            <div className=\"hls-volume\">\r\n              <button className=\"hls-control-btn\" onClick={toggleMute}>\r\n                {isMuted || volume === 0 ? 'üîá' : volume < 0.5 ? 'üîâ' : 'üîä'}\r\n              </button>\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"1\"\r\n                step=\"0.05\"\r\n                value={isMuted ? 0 : volume}\r\n                onChange={handleVolumeChange}\r\n                className=\"hls-volume-slider\"\r\n              />\r\n            </div>\r\n\r\n            {currentStreamInfo && (\r\n              <div className=\"hls-stream-info\">\r\n                <span className=\"hls-stream-name\">{currentStreamInfo.name}</span>\r\n                {currentEpg && (\r\n                  <span className=\"hls-stream-epg\">{currentEpg.title}</span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"hls-controls-right\">\r\n            <button className=\"hls-control-btn\" onClick={toggleFullscreen}>\r\n              {isFullscreen ? 'üóó' : 'üóñ'}\r\n            </button>\r\n            <button className=\"hls-control-btn close\" onClick={onClose}>\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}