{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\n// src/components/HlsPlayer.jsx\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Hls from 'hls.js';\nimport './HlsPlayer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme,\n  currentStreamInfo,\n  currentEpg,\n  epgData,\n  onEpgUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n  const [retryCount, setRetryCount] = useState(0);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const bufferTimerRef = useRef(null);\n  const MAX_RETRIES = 3;\n\n  // Clean up buffer timer\n  useEffect(() => {\n    return () => {\n      if (bufferTimerRef.current) {\n        clearTimeout(bufferTimerRef.current);\n      }\n    };\n  }, []);\n\n  // Initialize player\n  useEffect(() => {\n    if (!src || !videoRef.current) return;\n    let hls = null;\n    setIsReady(false);\n    setError(null);\n    setIsBuffering(false);\n\n    // Clean up previous instance\n    if (hlsRef.current) {\n      hlsRef.current.destroy();\n      hlsRef.current = null;\n    }\n\n    // Kontrollo n√´se √´sht√´ stream i Xtream\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\n    const isDirectFile = src.endsWith('.mp4') || src.endsWith('.ts') || src.endsWith('.mkv') || src.endsWith('.avi');\n    const isHlsStream = src.includes('.m3u8');\n\n    // P√´r Xtream streams ose direkt file\n    if (isXtreamStream || isDirectFile || !isHlsStream) {\n      console.log('üé¨ Direct stream:', src);\n\n      // Set source and load\n      videoRef.current.src = src;\n      videoRef.current.load();\n\n      // Handle metadata loaded\n      const onMetadataLoaded = () => {\n        console.log('‚úÖ Video metadata loaded');\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => {\n            console.warn('Play failed:', e);\n            onError === null || onError === void 0 ? void 0 : onError({\n              type: 'playError',\n              details: e.message\n            });\n          });\n        }\n      };\n\n      // Handle waiting/buffering\n      const onWaiting = () => {\n        setIsBuffering(true);\n        bufferTimerRef.current = setTimeout(() => {\n          console.warn('Buffering timeout');\n          setIsBuffering(false);\n        }, 10000);\n      };\n\n      // Handle playing\n      const onPlaying = () => {\n        setIsBuffering(false);\n        if (bufferTimerRef.current) {\n          clearTimeout(bufferTimerRef.current);\n        }\n      };\n\n      // Handle error\n      const onVideoError = e => {\n        console.error('üé¨ Video error:', e);\n        setError('Gabim n√´ ngarkimin e videos');\n        onError === null || onError === void 0 ? void 0 : onError({\n          type: 'videoError',\n          details: e.message\n        });\n      };\n\n      // Add event listeners\n      videoRef.current.addEventListener('loadedmetadata', onMetadataLoaded);\n      videoRef.current.addEventListener('waiting', onWaiting);\n      videoRef.current.addEventListener('playing', onPlaying);\n      videoRef.current.addEventListener('error', onVideoError);\n\n      // Already have metadata?\n      if (videoRef.current.readyState >= 1) {\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\n        }\n      }\n      return () => {\n        if (videoRef.current) {\n          videoRef.current.removeEventListener('loadedmetadata', onMetadataLoaded);\n          videoRef.current.removeEventListener('waiting', onWaiting);\n          videoRef.current.removeEventListener('playing', onPlaying);\n          videoRef.current.removeEventListener('error', onVideoError);\n          videoRef.current.pause();\n          videoRef.current.removeAttribute('src');\n          videoRef.current.load();\n        }\n      };\n    }\n\n    // P√´r HLS streams\n    if (Hls.isSupported()) {\n      try {\n        hls = new Hls({\n          enableWorker: true,\n          lowLatencyMode: true,\n          backBufferLength: 90,\n          maxBufferLength: 30,\n          maxMaxBufferLength: 60,\n          maxBufferSize: 60 * 1000 * 1000,\n          // 60MB\n          maxBufferHole: 0.5,\n          manifestLoadingTimeOut: 10000,\n          manifestLoadingMaxRetry: 5,\n          manifestLoadingRetryDelay: 500,\n          manifestLoadingMaxRetryTimeout: 20000,\n          levelLoadingTimeOut: 10000,\n          levelLoadingMaxRetry: 4,\n          levelLoadingRetryDelay: 500,\n          levelLoadingMaxRetryTimeout: 20000,\n          fragLoadingTimeOut: 20000,\n          fragLoadingMaxRetry: 4,\n          fragLoadingRetryDelay: 500,\n          fragLoadingMaxRetryTimeout: 20000,\n          startLevel: -1,\n          // Auto\n          debug: false\n        });\n        hlsRef.current = hls;\n        hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n          console.log('‚úÖ HLS media attached');\n          hls.loadSource(src);\n        });\n        hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\n          console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\n          setIsReady(true);\n          setError(null);\n\n          // Auto select best level\n          if (data.levels.length > 1) {\n            hls.currentLevel = -1;\n          }\n          if (isPlaying) {\n            videoRef.current.play().catch(e => {\n              console.warn('Play failed:', e);\n              // Autoplay u bllokua, trego buton play\n              setIsReady(false);\n              onPlayPause === null || onPlayPause === void 0 ? void 0 : onPlayPause();\n            });\n          }\n        });\n        hls.on(Hls.Events.LEVEL_SWITCHED, (event, data) => {\n          console.log(`üìä Switched to level ${data.level}`);\n        });\n        hls.on(Hls.Events.ERROR, (event, data) => {\n          console.error('‚ùå HLS error:', data);\n          if (data.fatal) {\n            switch (data.type) {\n              case Hls.ErrorTypes.NETWORK_ERROR:\n                console.log('Network error, trying to recover...');\n                hls.startLoad();\n                break;\n              case Hls.ErrorTypes.MEDIA_ERROR:\n                console.log('Media error, trying to recover...');\n                hls.recoverMediaError();\n                break;\n              default:\n                // N√´se nuk mund t√´ rikuperohet, p√´rdor video direkt\n                console.log('Fatal error, falling back to direct video...');\n                setError('Problem me stream-in, duke provuar metod√´ alternative...');\n                setTimeout(() => {\n                  if (hlsRef.current) {\n                    hlsRef.current.destroy();\n                    hlsRef.current = null;\n                  }\n                  if (videoRef.current) {\n                    videoRef.current.src = src;\n                    videoRef.current.load();\n                    setIsReady(true);\n                    if (isPlaying) {\n                      videoRef.current.play().catch(e => {\n                        onError === null || onError === void 0 ? void 0 : onError({\n                          type: 'playbackError',\n                          details: e.message\n                        });\n                      });\n                    }\n                  }\n                }, 1000);\n                break;\n            }\n          }\n          onError === null || onError === void 0 ? void 0 : onError(data);\n        });\n        hls.attachMedia(videoRef.current);\n      } catch (err) {\n        console.error('Failed to initialize HLS:', err);\n        // Fallback to direct video\n        videoRef.current.src = src;\n        videoRef.current.load();\n        setIsReady(true);\n      }\n    } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n      // Safari native HLS\n      videoRef.current.src = src;\n      const onLoadedMetadata = () => {\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\n        }\n      };\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\n      return () => {\n        var _videoRef$current;\n        (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.removeEventListener('loadedmetadata', onLoadedMetadata);\n      };\n    } else {\n      // Fallback to direct video\n      videoRef.current.src = src;\n      videoRef.current.load();\n      const onLoadedMetadata = () => {\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\n        }\n      };\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\n      return () => {\n        var _videoRef$current2;\n        (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.removeEventListener('loadedmetadata', onLoadedMetadata);\n      };\n    }\n    return () => {\n      if (hls) {\n        hls.destroy();\n        hlsRef.current = null;\n      }\n      if (videoRef.current) {\n        videoRef.current.pause();\n        videoRef.current.removeAttribute('src');\n        videoRef.current.load();\n      }\n    };\n  }, [src]); // Remove isPlaying from deps to prevent recreation\n\n  // Handle play/pause separately\n  useEffect(() => {\n    if (!videoRef.current || !isReady) return;\n    if (isPlaying) {\n      const playPromise = videoRef.current.play();\n      if (playPromise !== undefined) {\n        playPromise.then(() => {\n          console.log('‚ñ∂Ô∏è Playing');\n          setIsBuffering(false);\n        }).catch(error => {\n          console.warn('Play prevented:', error);\n          // Autoplay u bllokua\n          if (onPlayPause) {\n            onPlayPause(); // Ktheje state n√´ pause\n          }\n        });\n      }\n    } else {\n      videoRef.current.pause();\n    }\n  }, [isPlaying, isReady, onPlayPause]);\n  const handleRetry = useCallback(() => {\n    if (retryCount >= MAX_RETRIES) {\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\n      return;\n    }\n    setRetryCount(prev => prev + 1);\n    setError(null);\n\n    // Reload video\n    if (videoRef.current) {\n      // Recreate src to force reload\n      const currentSrc = videoRef.current.src;\n      videoRef.current.src = '';\n      videoRef.current.load();\n      setTimeout(() => {\n        if (videoRef.current) {\n          videoRef.current.src = currentSrc;\n          videoRef.current.load();\n          setTimeout(() => {\n            if (videoRef.current && isPlaying) {\n              videoRef.current.play().catch(e => {\n                console.warn('Retry failed:', e);\n                if (retryCount >= MAX_RETRIES - 1) {\n                  setError('Nuk mund t√´ lidhemi me stream-in. Kontrollo lidhjen.');\n                }\n              });\n            }\n          }, 500);\n        }\n      }, 100);\n    }\n  }, [retryCount, isPlaying]);\n  const handleFullscreen = useCallback(() => {\n    if (videoRef.current) {\n      if (videoRef.current.requestFullscreen) {\n        videoRef.current.requestFullscreen();\n      } else if (videoRef.current.webkitRequestFullscreen) {\n        videoRef.current.webkitRequestFullscreen();\n      } else if (videoRef.current.msRequestFullscreen) {\n        videoRef.current.msRequestFullscreen();\n      }\n    }\n  }, []);\n  if (!src) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `hls-player theme-${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        playsInline: true,\n        controls: true,\n        preload: \"auto\",\n        poster: currentStreamInfo === null || currentStreamInfo === void 0 ? void 0 : currentStreamInfo.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), !isReady && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke ngarkuar stream-in...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 11\n      }, this), isBuffering && isReady && isPlaying && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-buffering\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buffering-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke bufferuar...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRetry,\n          className: \"retry-btn\",\n          children: \"Provo p\\xEBrs\\xEBri\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this), !isPlaying && isReady && !error && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"play-btn-overlay\",\n        onClick: onPlayPause,\n        children: \"\\u25B6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this), isReady && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"fullscreen-btn\",\n        onClick: handleFullscreen,\n        children: \"\\u26F6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), currentStreamInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-info\",\n        children: [currentStreamInfo.logo && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: currentStreamInfo.logo,\n          alt: currentStreamInfo.name,\n          className: \"channel-logo\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.style.display = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"channel-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-name\",\n            children: currentStreamInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-category\",\n            children: currentStreamInfo.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this), currentEpg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"epg-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-title\",\n          children: currentEpg.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-time\",\n          children: new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 360,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"rhoycwLdt60xuRzjkApMcnQuUHQ=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","currentStreamInfo","currentEpg","epgData","onEpgUpdate","_s","videoRef","hlsRef","isReady","setIsReady","error","setError","retryCount","setRetryCount","isBuffering","setIsBuffering","bufferTimerRef","MAX_RETRIES","current","clearTimeout","hls","destroy","isXtreamStream","includes","isDirectFile","endsWith","isHlsStream","console","log","load","onMetadataLoaded","play","catch","e","warn","type","details","message","onWaiting","setTimeout","onPlaying","onVideoError","addEventListener","readyState","removeEventListener","pause","removeAttribute","isSupported","enableWorker","lowLatencyMode","backBufferLength","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","manifestLoadingTimeOut","manifestLoadingMaxRetry","manifestLoadingRetryDelay","manifestLoadingMaxRetryTimeout","levelLoadingTimeOut","levelLoadingMaxRetry","levelLoadingRetryDelay","levelLoadingMaxRetryTimeout","fragLoadingTimeOut","fragLoadingMaxRetry","fragLoadingRetryDelay","fragLoadingMaxRetryTimeout","startLevel","debug","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","event","data","levels","length","currentLevel","LEVEL_SWITCHED","level","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","attachMedia","err","canPlayType","onLoadedMetadata","_videoRef$current","_videoRef$current2","playPromise","undefined","then","handleRetry","prev","currentSrc","handleFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","className","children","ref","playsInline","controls","preload","poster","logo","fileName","_jsxFileName","lineNumber","columnNumber","onClick","alt","name","target","onerror","style","display","category","title","Date","start_timestamp","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport Hls from 'hls.js';\r\nimport './HlsPlayer.css';\r\n\r\nconst HlsPlayer = ({ \r\n  src, \r\n  isPlaying, \r\n  onPlayPause, \r\n  onClose, \r\n  onError,\r\n  theme,\r\n  currentStreamInfo,\r\n  currentEpg,\r\n  epgData,\r\n  onEpgUpdate\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n  const [isBuffering, setIsBuffering] = useState(false);\r\n  const bufferTimerRef = useRef(null);\r\n  const MAX_RETRIES = 3;\r\n\r\n  // Clean up buffer timer\r\n  useEffect(() => {\r\n    return () => {\r\n      if (bufferTimerRef.current) {\r\n        clearTimeout(bufferTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Initialize player\r\n  useEffect(() => {\r\n    if (!src || !videoRef.current) return;\r\n\r\n    let hls = null;\r\n    setIsReady(false);\r\n    setError(null);\r\n    setIsBuffering(false);\r\n\r\n    // Clean up previous instance\r\n    if (hlsRef.current) {\r\n      hlsRef.current.destroy();\r\n      hlsRef.current = null;\r\n    }\r\n\r\n    // Kontrollo n√´se √´sht√´ stream i Xtream\r\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\r\n    const isDirectFile = src.endsWith('.mp4') || src.endsWith('.ts') || src.endsWith('.mkv') || src.endsWith('.avi');\r\n    const isHlsStream = src.includes('.m3u8');\r\n    \r\n    // P√´r Xtream streams ose direkt file\r\n    if (isXtreamStream || isDirectFile || !isHlsStream) {\r\n      console.log('üé¨ Direct stream:', src);\r\n      \r\n      // Set source and load\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      // Handle metadata loaded\r\n      const onMetadataLoaded = () => {\r\n        console.log('‚úÖ Video metadata loaded');\r\n        setIsReady(true);\r\n        \r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => {\r\n            console.warn('Play failed:', e);\r\n            onError?.({ type: 'playError', details: e.message });\r\n          });\r\n        }\r\n      };\r\n\r\n      // Handle waiting/buffering\r\n      const onWaiting = () => {\r\n        setIsBuffering(true);\r\n        bufferTimerRef.current = setTimeout(() => {\r\n          console.warn('Buffering timeout');\r\n          setIsBuffering(false);\r\n        }, 10000);\r\n      };\r\n\r\n      // Handle playing\r\n      const onPlaying = () => {\r\n        setIsBuffering(false);\r\n        if (bufferTimerRef.current) {\r\n          clearTimeout(bufferTimerRef.current);\r\n        }\r\n      };\r\n\r\n      // Handle error\r\n      const onVideoError = (e) => {\r\n        console.error('üé¨ Video error:', e);\r\n        setError('Gabim n√´ ngarkimin e videos');\r\n        onError?.({ type: 'videoError', details: e.message });\r\n      };\r\n\r\n      // Add event listeners\r\n      videoRef.current.addEventListener('loadedmetadata', onMetadataLoaded);\r\n      videoRef.current.addEventListener('waiting', onWaiting);\r\n      videoRef.current.addEventListener('playing', onPlaying);\r\n      videoRef.current.addEventListener('error', onVideoError);\r\n      \r\n      // Already have metadata?\r\n      if (videoRef.current.readyState >= 1) {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\r\n        }\r\n      }\r\n      \r\n      return () => {\r\n        if (videoRef.current) {\r\n          videoRef.current.removeEventListener('loadedmetadata', onMetadataLoaded);\r\n          videoRef.current.removeEventListener('waiting', onWaiting);\r\n          videoRef.current.removeEventListener('playing', onPlaying);\r\n          videoRef.current.removeEventListener('error', onVideoError);\r\n          videoRef.current.pause();\r\n          videoRef.current.removeAttribute('src');\r\n          videoRef.current.load();\r\n        }\r\n      };\r\n    }\r\n\r\n    // P√´r HLS streams\r\n    if (Hls.isSupported()) {\r\n      try {\r\n        hls = new Hls({\r\n          enableWorker: true,\r\n          lowLatencyMode: true,\r\n          backBufferLength: 90,\r\n          maxBufferLength: 30,\r\n          maxMaxBufferLength: 60,\r\n          maxBufferSize: 60 * 1000 * 1000, // 60MB\r\n          maxBufferHole: 0.5,\r\n          manifestLoadingTimeOut: 10000,\r\n          manifestLoadingMaxRetry: 5,\r\n          manifestLoadingRetryDelay: 500,\r\n          manifestLoadingMaxRetryTimeout: 20000,\r\n          levelLoadingTimeOut: 10000,\r\n          levelLoadingMaxRetry: 4,\r\n          levelLoadingRetryDelay: 500,\r\n          levelLoadingMaxRetryTimeout: 20000,\r\n          fragLoadingTimeOut: 20000,\r\n          fragLoadingMaxRetry: 4,\r\n          fragLoadingRetryDelay: 500,\r\n          fragLoadingMaxRetryTimeout: 20000,\r\n          startLevel: -1, // Auto\r\n          debug: false,\r\n        });\r\n\r\n        hlsRef.current = hls;\r\n\r\n        hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n          console.log('‚úÖ HLS media attached');\r\n          hls.loadSource(src);\r\n        });\r\n\r\n        hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\r\n          console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\r\n          setIsReady(true);\r\n          setError(null);\r\n          \r\n          // Auto select best level\r\n          if (data.levels.length > 1) {\r\n            hls.currentLevel = -1;\r\n          }\r\n          \r\n          if (isPlaying) {\r\n            videoRef.current.play().catch(e => {\r\n              console.warn('Play failed:', e);\r\n              // Autoplay u bllokua, trego buton play\r\n              setIsReady(false);\r\n              onPlayPause?.();\r\n            });\r\n          }\r\n        });\r\n\r\n        hls.on(Hls.Events.LEVEL_SWITCHED, (event, data) => {\r\n          console.log(`üìä Switched to level ${data.level}`);\r\n        });\r\n\r\n        hls.on(Hls.Events.ERROR, (event, data) => {\r\n          console.error('‚ùå HLS error:', data);\r\n          \r\n          if (data.fatal) {\r\n            switch (data.type) {\r\n              case Hls.ErrorTypes.NETWORK_ERROR:\r\n                console.log('Network error, trying to recover...');\r\n                hls.startLoad();\r\n                break;\r\n              case Hls.ErrorTypes.MEDIA_ERROR:\r\n                console.log('Media error, trying to recover...');\r\n                hls.recoverMediaError();\r\n                break;\r\n              default:\r\n                // N√´se nuk mund t√´ rikuperohet, p√´rdor video direkt\r\n                console.log('Fatal error, falling back to direct video...');\r\n                setError('Problem me stream-in, duke provuar metod√´ alternative...');\r\n                \r\n                setTimeout(() => {\r\n                  if (hlsRef.current) {\r\n                    hlsRef.current.destroy();\r\n                    hlsRef.current = null;\r\n                  }\r\n                  if (videoRef.current) {\r\n                    videoRef.current.src = src;\r\n                    videoRef.current.load();\r\n                    setIsReady(true);\r\n                    if (isPlaying) {\r\n                      videoRef.current.play().catch(e => {\r\n                        onError?.({ type: 'playbackError', details: e.message });\r\n                      });\r\n                    }\r\n                  }\r\n                }, 1000);\r\n                break;\r\n            }\r\n          }\r\n          \r\n          onError?.(data);\r\n        });\r\n\r\n        hls.attachMedia(videoRef.current);\r\n      } catch (err) {\r\n        console.error('Failed to initialize HLS:', err);\r\n        // Fallback to direct video\r\n        videoRef.current.src = src;\r\n        videoRef.current.load();\r\n        setIsReady(true);\r\n      }\r\n    } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\r\n      // Safari native HLS\r\n      videoRef.current.src = src;\r\n      \r\n      const onLoadedMetadata = () => {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\r\n        }\r\n      };\r\n      \r\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\r\n      \r\n      return () => {\r\n        videoRef.current?.removeEventListener('loadedmetadata', onLoadedMetadata);\r\n      };\r\n    } else {\r\n      // Fallback to direct video\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      const onLoadedMetadata = () => {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\r\n        }\r\n      };\r\n      \r\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\r\n      \r\n      return () => {\r\n        videoRef.current?.removeEventListener('loadedmetadata', onLoadedMetadata);\r\n      };\r\n    }\r\n\r\n    return () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n        hlsRef.current = null;\r\n      }\r\n      if (videoRef.current) {\r\n        videoRef.current.pause();\r\n        videoRef.current.removeAttribute('src');\r\n        videoRef.current.load();\r\n      }\r\n    };\r\n  }, [src]); // Remove isPlaying from deps to prevent recreation\r\n\r\n  // Handle play/pause separately\r\n  useEffect(() => {\r\n    if (!videoRef.current || !isReady) return;\r\n\r\n    if (isPlaying) {\r\n      const playPromise = videoRef.current.play();\r\n      \r\n      if (playPromise !== undefined) {\r\n        playPromise\r\n          .then(() => {\r\n            console.log('‚ñ∂Ô∏è Playing');\r\n            setIsBuffering(false);\r\n          })\r\n          .catch(error => {\r\n            console.warn('Play prevented:', error);\r\n            // Autoplay u bllokua\r\n            if (onPlayPause) {\r\n              onPlayPause(); // Ktheje state n√´ pause\r\n            }\r\n          });\r\n      }\r\n    } else {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [isPlaying, isReady, onPlayPause]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    if (retryCount >= MAX_RETRIES) {\r\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\r\n      return;\r\n    }\r\n\r\n    setRetryCount(prev => prev + 1);\r\n    setError(null);\r\n    \r\n    // Reload video\r\n    if (videoRef.current) {\r\n      // Recreate src to force reload\r\n      const currentSrc = videoRef.current.src;\r\n      videoRef.current.src = '';\r\n      videoRef.current.load();\r\n      \r\n      setTimeout(() => {\r\n        if (videoRef.current) {\r\n          videoRef.current.src = currentSrc;\r\n          videoRef.current.load();\r\n          \r\n          setTimeout(() => {\r\n            if (videoRef.current && isPlaying) {\r\n              videoRef.current.play().catch(e => {\r\n                console.warn('Retry failed:', e);\r\n                if (retryCount >= MAX_RETRIES - 1) {\r\n                  setError('Nuk mund t√´ lidhemi me stream-in. Kontrollo lidhjen.');\r\n                }\r\n              });\r\n            }\r\n          }, 500);\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [retryCount, isPlaying]);\r\n\r\n  const handleFullscreen = useCallback(() => {\r\n    if (videoRef.current) {\r\n      if (videoRef.current.requestFullscreen) {\r\n        videoRef.current.requestFullscreen();\r\n      } else if (videoRef.current.webkitRequestFullscreen) {\r\n        videoRef.current.webkitRequestFullscreen();\r\n      } else if (videoRef.current.msRequestFullscreen) {\r\n        videoRef.current.msRequestFullscreen();\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (!src) return null;\r\n\r\n  return (\r\n    <div className={`hls-player theme-${theme}`}>\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-element\"\r\n          playsInline\r\n          controls\r\n          preload=\"auto\"\r\n          poster={currentStreamInfo?.logo}\r\n        />\r\n        \r\n        {/* Loading Indicator */}\r\n        {!isReady && !error && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <p>Duke ngarkuar stream-in...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Buffering Indicator */}\r\n        {isBuffering && isReady && isPlaying && (\r\n          <div className=\"player-buffering\">\r\n            <div className=\"buffering-spinner\"></div>\r\n            <p>Duke bufferuar...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"player-error\">\r\n            <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n            <p>{error}</p>\r\n            <button onClick={handleRetry} className=\"retry-btn\">\r\n              Provo p√´rs√´ri\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Play Button Overlay */}\r\n        {!isPlaying && isReady && !error && (\r\n          <button className=\"play-btn-overlay\" onClick={onPlayPause}>\r\n            ‚ñ∂\r\n          </button>\r\n        )}\r\n\r\n        {/* Fullscreen Button */}\r\n        {isReady && (\r\n          <button className=\"fullscreen-btn\" onClick={handleFullscreen}>\r\n            ‚õ∂\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Channel Info */}\r\n      {currentStreamInfo && (\r\n        <div className=\"player-info\">\r\n          <div className=\"channel-info\">\r\n            {currentStreamInfo.logo && (\r\n              <img \r\n                src={currentStreamInfo.logo} \r\n                alt={currentStreamInfo.name}\r\n                className=\"channel-logo\"\r\n                onError={(e) => {\r\n                  e.target.onerror = null;\r\n                  e.target.style.display = 'none';\r\n                }}\r\n              />\r\n            )}\r\n            <div className=\"channel-details\">\r\n              <span className=\"channel-name\">{currentStreamInfo.name}</span>\r\n              <span className=\"channel-category\">{currentStreamInfo.category}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          {currentEpg && (\r\n            <div className=\"epg-info\">\r\n              <span className=\"epg-title\">{currentEpg.title}</span>\r\n              <span className=\"epg-time\">\r\n                {new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], { \r\n                  hour: '2-digit', \r\n                  minute: '2-digit' \r\n                })}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}