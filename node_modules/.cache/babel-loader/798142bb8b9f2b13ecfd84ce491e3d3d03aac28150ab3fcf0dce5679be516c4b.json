{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\n// src/components/HlsPlayer.jsx\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Hls from 'hls.js';\nimport './HlsPlayer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme,\n  currentStreamInfo,\n  currentEpg,\n  epgData,\n  onEpgUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n  const [retryCount, setRetryCount] = useState(0);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [useNativeControls, setUseNativeControls] = useState(false);\n  const bufferTimerRef = useRef(null);\n  const errorReportedRef = useRef(false);\n  const MAX_RETRIES = 3;\n\n  // Clean up buffer timer\n  useEffect(() => {\n    return () => {\n      if (bufferTimerRef.current) {\n        clearTimeout(bufferTimerRef.current);\n      }\n    };\n  }, []);\n\n  // Funksion p√´r t√´ raportuar error vet√´m nj√´ her√´\n  const reportError = useCallback(errorData => {\n    if (!errorReportedRef.current && onError) {\n      errorReportedRef.current = true;\n\n      // Krijo nj√´ objekt error t√´ thjesht√´\n      const error = {\n        type: (errorData === null || errorData === void 0 ? void 0 : errorData.type) || 'unknown',\n        message: (errorData === null || errorData === void 0 ? void 0 : errorData.message) || (errorData === null || errorData === void 0 ? void 0 : errorData.details) || 'Gabim i panjohur',\n        code: errorData === null || errorData === void 0 ? void 0 : errorData.code,\n        details: (errorData === null || errorData === void 0 ? void 0 : errorData.details) || (errorData === null || errorData === void 0 ? void 0 : errorData.message)\n      };\n      onError(error);\n\n      // Reset after 2 seconds\n      setTimeout(() => {\n        errorReportedRef.current = false;\n      }, 2000);\n    }\n  }, [onError]);\n\n  // Funksion p√´r t√´ luajtur videon\n  const playVideo = useCallback(async () => {\n    if (!videoRef.current) return false;\n    try {\n      await videoRef.current.play();\n      console.log('‚ñ∂Ô∏è Playing successfully');\n      setIsBuffering(false);\n      return true;\n    } catch (err) {\n      console.warn('Play failed:', err);\n      if (err.name === 'NotAllowedError') {\n        // Autoplay u bllokua - useri duhet t√´ klikoj√´ play\n        setIsReady(true);\n      }\n      return false;\n    }\n  }, []);\n\n  // Initialize player\n  useEffect(() => {\n    if (!src || !videoRef.current) return;\n    let hls = null;\n    setIsReady(false);\n    setError(null);\n    setIsBuffering(false);\n    errorReportedRef.current = false;\n\n    // Clean up previous instance\n    if (hlsRef.current) {\n      hlsRef.current.destroy();\n      hlsRef.current = null;\n    }\n\n    // Detekto llojin e stream-it\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\n    const isDirectFile = src.endsWith('.mp4') || src.endsWith('.ts') || src.endsWith('.mkv') || src.endsWith('.avi') || src.endsWith('.mov') || src.endsWith('.m3u8');\n    const isHlsStream = src.includes('.m3u8') || src.includes('playlist.m3u8');\n    const isMpegDash = src.includes('.mpd');\n    console.log('üé¨ Loading stream:', {\n      src: src.substring(0, 100),\n      isXtreamStream,\n      isDirectFile,\n      isHlsStream,\n      isMpegDash\n    });\n\n    // P√´r Xtream streams ose direkt file\n    if (isXtreamStream || isDirectFile || !isHlsStream) {\n      console.log('üé¨ Using direct video playback');\n\n      // Set source dhe load\n      videoRef.current.src = src;\n      videoRef.current.load();\n\n      // Event handlers\n      const onCanPlay = () => {\n        console.log('‚úÖ Video can play');\n        setIsReady(true);\n        if (isPlaying) {\n          playVideo();\n        }\n      };\n      const onLoadedMetadata = () => {\n        console.log('‚úÖ Video metadata loaded');\n        setIsReady(true);\n      };\n      const onWaiting = () => {\n        console.log('‚è≥ Buffering...');\n        setIsBuffering(true);\n        if (bufferTimerRef.current) {\n          clearTimeout(bufferTimerRef.current);\n        }\n        bufferTimerRef.current = setTimeout(() => {\n          console.warn('Buffering timeout');\n          setIsBuffering(false);\n        }, 15000);\n      };\n      const onPlaying = () => {\n        console.log('‚ñ∂Ô∏è Playing');\n        setIsBuffering(false);\n        if (bufferTimerRef.current) {\n          clearTimeout(bufferTimerRef.current);\n        }\n      };\n      const onPause = () => {\n        console.log('‚è∏Ô∏è Paused');\n      };\n      const onEnded = () => {\n        console.log('‚èπÔ∏è Ended');\n        if (onPlayPause) onPlayPause();\n      };\n      const onStalled = () => {\n        console.warn('‚ö†Ô∏è Stalled');\n        setIsBuffering(true);\n      };\n      const onSuspend = () => {\n        console.log('üí§ Suspended');\n      };\n      const onVideoError = () => {\n        var _videoRef$current;\n        const videoError = (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.error;\n        console.error('üé¨ Video error:', {\n          code: videoError === null || videoError === void 0 ? void 0 : videoError.code,\n          message: videoError === null || videoError === void 0 ? void 0 : videoError.message\n        });\n\n        // Mos shfaq error p√´r aborte normale\n        if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 4) {\n          setError('Formati i videos nuk mb√´shtetet');\n          reportError({\n            type: 'videoError',\n            message: 'Formati i videos nuk mb√´shtetet',\n            code: 4\n          });\n        } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 3) {\n          setError('Gabim n√´ dekodimin e videos');\n          reportError({\n            type: 'videoError',\n            message: 'Gabim n√´ dekodimin e videos',\n            code: 3\n          });\n        } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 2) {\n          setError('Gabim n√´ rrjet');\n          reportError({\n            type: 'videoError',\n            message: 'Gabim n√´ rrjet. Kontrollo lidhjen.',\n            code: 2\n          });\n        } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 1) {\n          console.log('Video loading aborted');\n          // Mos raporto error p√´r abort\n        } else if (videoError) {\n          setError('Gabim n√´ ngarkimin e videos');\n          reportError({\n            type: 'videoError',\n            message: videoError.message || 'Gabim n√´ ngarkimin e videos',\n            code: videoError.code\n          });\n        }\n      };\n\n      // Add event listeners\n      videoRef.current.addEventListener('canplay', onCanPlay);\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\n      videoRef.current.addEventListener('waiting', onWaiting);\n      videoRef.current.addEventListener('playing', onPlaying);\n      videoRef.current.addEventListener('pause', onPause);\n      videoRef.current.addEventListener('ended', onEnded);\n      videoRef.current.addEventListener('stalled', onStalled);\n      videoRef.current.addEventListener('suspend', onSuspend);\n      videoRef.current.addEventListener('error', onVideoError);\n\n      // Check if already loaded\n      if (videoRef.current.readyState >= 3) {\n        setIsReady(true);\n        if (isPlaying) {\n          playVideo();\n        }\n      }\n      return () => {\n        if (videoRef.current) {\n          videoRef.current.removeEventListener('canplay', onCanPlay);\n          videoRef.current.removeEventListener('loadedmetadata', onLoadedMetadata);\n          videoRef.current.removeEventListener('waiting', onWaiting);\n          videoRef.current.removeEventListener('playing', onPlaying);\n          videoRef.current.removeEventListener('pause', onPause);\n          videoRef.current.removeEventListener('ended', onEnded);\n          videoRef.current.removeEventListener('stalled', onStalled);\n          videoRef.current.removeEventListener('suspend', onSuspend);\n          videoRef.current.removeEventListener('error', onVideoError);\n          videoRef.current.pause();\n          videoRef.current.removeAttribute('src');\n          videoRef.current.load();\n        }\n      };\n    }\n\n    // P√´r HLS streams\n    if (isHlsStream) {\n      if (Hls.isSupported()) {\n        try {\n          console.log('üé¨ Using HLS.js');\n          hls = new Hls({\n            enableWorker: true,\n            lowLatencyMode: false,\n            backBufferLength: 60,\n            maxBufferLength: 30,\n            maxMaxBufferLength: 60,\n            maxBufferSize: 30 * 1000 * 1000,\n            maxBufferHole: 0.5,\n            manifestLoadingTimeOut: 15000,\n            manifestLoadingMaxRetry: 5,\n            manifestLoadingRetryDelay: 1000,\n            manifestLoadingMaxRetryTimeout: 30000,\n            levelLoadingTimeOut: 15000,\n            levelLoadingMaxRetry: 4,\n            levelLoadingRetryDelay: 1000,\n            levelLoadingMaxRetryTimeout: 30000,\n            fragLoadingTimeOut: 20000,\n            fragLoadingMaxRetry: 4,\n            fragLoadingRetryDelay: 1000,\n            fragLoadingMaxRetryTimeout: 30000,\n            startLevel: -1,\n            debug: false\n          });\n          hlsRef.current = hls;\n          hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n            console.log('‚úÖ HLS media attached');\n            hls.loadSource(src);\n          });\n          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\n            console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\n            setIsReady(true);\n            setError(null);\n            if (isPlaying) {\n              playVideo();\n            }\n          });\n          hls.on(Hls.Events.ERROR, (event, data) => {\n            console.error('‚ùå HLS error:', data);\n            if (data.fatal) {\n              switch (data.type) {\n                case Hls.ErrorTypes.NETWORK_ERROR:\n                  console.log('Network error, trying to recover...');\n                  hls.startLoad();\n                  break;\n                case Hls.ErrorTypes.MEDIA_ERROR:\n                  console.log('Media error, trying to recover...');\n                  hls.recoverMediaError();\n                  break;\n                default:\n                  console.log('Fatal error, falling back to direct video...');\n                  setUseNativeControls(true);\n                  setError('Problem me stream-in, duke provuar metod√´ alternative...');\n                  if (videoRef.current) {\n                    videoRef.current.src = src;\n                    videoRef.current.load();\n                  }\n                  break;\n              }\n            }\n\n            // Raporto error por jo n√´ m√´nyr√´ ciklike\n            if (data.fatal && data.type !== Hls.ErrorTypes.OTHER_ERROR) {\n              reportError({\n                type: 'hlsError',\n                message: `HLS Error: ${data.type}`,\n                details: data.details\n              });\n            }\n          });\n          hls.attachMedia(videoRef.current);\n        } catch (err) {\n          console.error('Failed to initialize HLS:', err);\n          setUseNativeControls(true);\n          videoRef.current.src = src;\n          videoRef.current.load();\n        }\n      } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n        console.log('üé¨ Using Safari native HLS');\n        videoRef.current.src = src;\n        videoRef.current.load();\n        const onLoadedMetadata = () => {\n          setIsReady(true);\n          if (isPlaying) {\n            playVideo();\n          }\n        };\n        videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\n        return () => {\n          var _videoRef$current2;\n          (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.removeEventListener('loadedmetadata', onLoadedMetadata);\n        };\n      }\n    }\n    return () => {\n      if (hls) {\n        hls.destroy();\n        hlsRef.current = null;\n      }\n    };\n  }, [src, isPlaying, playVideo, reportError]);\n\n  // Handle play/pause separately\n  useEffect(() => {\n    if (!videoRef.current || !isReady) return;\n    if (isPlaying) {\n      playVideo();\n    } else {\n      videoRef.current.pause();\n    }\n  }, [isPlaying, isReady, playVideo]);\n  const handleRetry = useCallback(() => {\n    if (retryCount >= MAX_RETRIES) {\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\n      return;\n    }\n    setRetryCount(prev => prev + 1);\n    setError(null);\n    setUseNativeControls(true);\n    errorReportedRef.current = false;\n\n    // Reload video\n    if (videoRef.current) {\n      const currentSrc = src;\n      videoRef.current.src = '';\n      videoRef.current.load();\n      setTimeout(() => {\n        if (videoRef.current) {\n          videoRef.current.src = currentSrc;\n          videoRef.current.load();\n          setTimeout(() => {\n            if (videoRef.current && isPlaying) {\n              videoRef.current.play().catch(e => {\n                console.warn('Retry failed:', e);\n              });\n            }\n          }, 500);\n        }\n      }, 100);\n    }\n  }, [retryCount, src, isPlaying]);\n  const handleFullscreen = useCallback(() => {\n    if (videoRef.current) {\n      if (videoRef.current.requestFullscreen) {\n        videoRef.current.requestFullscreen();\n      } else if (videoRef.current.webkitRequestFullscreen) {\n        videoRef.current.webkitRequestFullscreen();\n      } else if (videoRef.current.msRequestFullscreen) {\n        videoRef.current.msRequestFullscreen();\n      }\n    }\n  }, []);\n  if (!src) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `hls-player theme-${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        playsInline: true,\n        controls: true,\n        preload: \"auto\",\n        poster: currentStreamInfo === null || currentStreamInfo === void 0 ? void 0 : currentStreamInfo.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), !isReady && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke ngarkuar stream-in...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 11\n      }, this), isBuffering && isReady && isPlaying && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-buffering\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buffering-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke bufferuar...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRetry,\n          className: \"retry-btn\",\n          children: \"Provo p\\xEBrs\\xEBri\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.open(src, '_blank'),\n          className: \"direct-link-btn\",\n          children: \"Hap direkt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }, this), !isPlaying && isReady && !error && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"play-btn-overlay\",\n        onClick: onPlayPause,\n        children: \"\\u25B6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this), isReady && !error && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"fullscreen-btn\",\n        onClick: handleFullscreen,\n        children: \"\\u26F6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), currentStreamInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-info\",\n        children: [currentStreamInfo.logo && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: currentStreamInfo.logo,\n          alt: currentStreamInfo.name,\n          className: \"channel-logo\",\n          onError: e => {\n            e.target.onerror = null;\n            e.target.style.display = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"channel-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-name\",\n            children: currentStreamInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-category\",\n            children: currentStreamInfo.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 11\n      }, this), currentEpg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"epg-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-title\",\n          children: currentEpg.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-time\",\n          children: new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"B40DDRRdoKCsSQDwtPt4hx9GoF4=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","currentStreamInfo","currentEpg","epgData","onEpgUpdate","_s","videoRef","hlsRef","isReady","setIsReady","error","setError","retryCount","setRetryCount","isBuffering","setIsBuffering","useNativeControls","setUseNativeControls","bufferTimerRef","errorReportedRef","MAX_RETRIES","current","clearTimeout","reportError","errorData","type","message","details","code","setTimeout","playVideo","play","console","log","err","warn","name","hls","destroy","isXtreamStream","includes","isDirectFile","endsWith","isHlsStream","isMpegDash","substring","load","onCanPlay","onLoadedMetadata","onWaiting","onPlaying","onPause","onEnded","onStalled","onSuspend","onVideoError","_videoRef$current","videoError","addEventListener","readyState","removeEventListener","pause","removeAttribute","isSupported","enableWorker","lowLatencyMode","backBufferLength","maxBufferLength","maxMaxBufferLength","maxBufferSize","maxBufferHole","manifestLoadingTimeOut","manifestLoadingMaxRetry","manifestLoadingRetryDelay","manifestLoadingMaxRetryTimeout","levelLoadingTimeOut","levelLoadingMaxRetry","levelLoadingRetryDelay","levelLoadingMaxRetryTimeout","fragLoadingTimeOut","fragLoadingMaxRetry","fragLoadingRetryDelay","fragLoadingMaxRetryTimeout","startLevel","debug","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","event","data","levels","length","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","OTHER_ERROR","attachMedia","canPlayType","_videoRef$current2","handleRetry","prev","currentSrc","catch","e","handleFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","className","children","ref","playsInline","controls","preload","poster","logo","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","open","alt","target","onerror","style","display","category","title","Date","start_timestamp","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport Hls from 'hls.js';\r\nimport './HlsPlayer.css';\r\n\r\nconst HlsPlayer = ({ \r\n  src, \r\n  isPlaying, \r\n  onPlayPause, \r\n  onClose, \r\n  onError,\r\n  theme,\r\n  currentStreamInfo,\r\n  currentEpg,\r\n  epgData,\r\n  onEpgUpdate\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n  const [isBuffering, setIsBuffering] = useState(false);\r\n  const [useNativeControls, setUseNativeControls] = useState(false);\r\n  const bufferTimerRef = useRef(null);\r\n  const errorReportedRef = useRef(false);\r\n  const MAX_RETRIES = 3;\r\n\r\n  // Clean up buffer timer\r\n  useEffect(() => {\r\n    return () => {\r\n      if (bufferTimerRef.current) {\r\n        clearTimeout(bufferTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Funksion p√´r t√´ raportuar error vet√´m nj√´ her√´\r\n  const reportError = useCallback((errorData) => {\r\n    if (!errorReportedRef.current && onError) {\r\n      errorReportedRef.current = true;\r\n      \r\n      // Krijo nj√´ objekt error t√´ thjesht√´\r\n      const error = {\r\n        type: errorData?.type || 'unknown',\r\n        message: errorData?.message || errorData?.details || 'Gabim i panjohur',\r\n        code: errorData?.code,\r\n        details: errorData?.details || errorData?.message\r\n      };\r\n      \r\n      onError(error);\r\n      \r\n      // Reset after 2 seconds\r\n      setTimeout(() => {\r\n        errorReportedRef.current = false;\r\n      }, 2000);\r\n    }\r\n  }, [onError]);\r\n\r\n  // Funksion p√´r t√´ luajtur videon\r\n  const playVideo = useCallback(async () => {\r\n    if (!videoRef.current) return false;\r\n    \r\n    try {\r\n      await videoRef.current.play();\r\n      console.log('‚ñ∂Ô∏è Playing successfully');\r\n      setIsBuffering(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.warn('Play failed:', err);\r\n      if (err.name === 'NotAllowedError') {\r\n        // Autoplay u bllokua - useri duhet t√´ klikoj√´ play\r\n        setIsReady(true);\r\n      }\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  // Initialize player\r\n  useEffect(() => {\r\n    if (!src || !videoRef.current) return;\r\n\r\n    let hls = null;\r\n    setIsReady(false);\r\n    setError(null);\r\n    setIsBuffering(false);\r\n    errorReportedRef.current = false;\r\n\r\n    // Clean up previous instance\r\n    if (hlsRef.current) {\r\n      hlsRef.current.destroy();\r\n      hlsRef.current = null;\r\n    }\r\n\r\n    // Detekto llojin e stream-it\r\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\r\n    const isDirectFile = src.endsWith('.mp4') || src.endsWith('.ts') || src.endsWith('.mkv') || src.endsWith('.avi') || src.endsWith('.mov') || src.endsWith('.m3u8');\r\n    const isHlsStream = src.includes('.m3u8') || src.includes('playlist.m3u8');\r\n    const isMpegDash = src.includes('.mpd');\r\n\r\n    console.log('üé¨ Loading stream:', { \r\n      src: src.substring(0, 100), \r\n      isXtreamStream, \r\n      isDirectFile, \r\n      isHlsStream,\r\n      isMpegDash \r\n    });\r\n\r\n    // P√´r Xtream streams ose direkt file\r\n    if (isXtreamStream || isDirectFile || !isHlsStream) {\r\n      console.log('üé¨ Using direct video playback');\r\n      \r\n      // Set source dhe load\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      // Event handlers\r\n      const onCanPlay = () => {\r\n        console.log('‚úÖ Video can play');\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          playVideo();\r\n        }\r\n      };\r\n\r\n      const onLoadedMetadata = () => {\r\n        console.log('‚úÖ Video metadata loaded');\r\n        setIsReady(true);\r\n      };\r\n\r\n      const onWaiting = () => {\r\n        console.log('‚è≥ Buffering...');\r\n        setIsBuffering(true);\r\n        \r\n        if (bufferTimerRef.current) {\r\n          clearTimeout(bufferTimerRef.current);\r\n        }\r\n        \r\n        bufferTimerRef.current = setTimeout(() => {\r\n          console.warn('Buffering timeout');\r\n          setIsBuffering(false);\r\n        }, 15000);\r\n      };\r\n\r\n      const onPlaying = () => {\r\n        console.log('‚ñ∂Ô∏è Playing');\r\n        setIsBuffering(false);\r\n        if (bufferTimerRef.current) {\r\n          clearTimeout(bufferTimerRef.current);\r\n        }\r\n      };\r\n\r\n      const onPause = () => {\r\n        console.log('‚è∏Ô∏è Paused');\r\n      };\r\n\r\n      const onEnded = () => {\r\n        console.log('‚èπÔ∏è Ended');\r\n        if (onPlayPause) onPlayPause();\r\n      };\r\n\r\n      const onStalled = () => {\r\n        console.warn('‚ö†Ô∏è Stalled');\r\n        setIsBuffering(true);\r\n      };\r\n\r\n      const onSuspend = () => {\r\n        console.log('üí§ Suspended');\r\n      };\r\n\r\n      const onVideoError = () => {\r\n        const videoError = videoRef.current?.error;\r\n        console.error('üé¨ Video error:', {\r\n          code: videoError?.code,\r\n          message: videoError?.message\r\n        });\r\n\r\n        // Mos shfaq error p√´r aborte normale\r\n        if (videoError?.code === 4) {\r\n          setError('Formati i videos nuk mb√´shtetet');\r\n          reportError({ \r\n            type: 'videoError', \r\n            message: 'Formati i videos nuk mb√´shtetet',\r\n            code: 4 \r\n          });\r\n        } else if (videoError?.code === 3) {\r\n          setError('Gabim n√´ dekodimin e videos');\r\n          reportError({ \r\n            type: 'videoError', \r\n            message: 'Gabim n√´ dekodimin e videos',\r\n            code: 3 \r\n          });\r\n        } else if (videoError?.code === 2) {\r\n          setError('Gabim n√´ rrjet');\r\n          reportError({ \r\n            type: 'videoError', \r\n            message: 'Gabim n√´ rrjet. Kontrollo lidhjen.',\r\n            code: 2 \r\n          });\r\n        } else if (videoError?.code === 1) {\r\n          console.log('Video loading aborted');\r\n          // Mos raporto error p√´r abort\r\n        } else if (videoError) {\r\n          setError('Gabim n√´ ngarkimin e videos');\r\n          reportError({ \r\n            type: 'videoError', \r\n            message: videoError.message || 'Gabim n√´ ngarkimin e videos',\r\n            code: videoError.code \r\n          });\r\n        }\r\n      };\r\n\r\n      // Add event listeners\r\n      videoRef.current.addEventListener('canplay', onCanPlay);\r\n      videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\r\n      videoRef.current.addEventListener('waiting', onWaiting);\r\n      videoRef.current.addEventListener('playing', onPlaying);\r\n      videoRef.current.addEventListener('pause', onPause);\r\n      videoRef.current.addEventListener('ended', onEnded);\r\n      videoRef.current.addEventListener('stalled', onStalled);\r\n      videoRef.current.addEventListener('suspend', onSuspend);\r\n      videoRef.current.addEventListener('error', onVideoError);\r\n      \r\n      // Check if already loaded\r\n      if (videoRef.current.readyState >= 3) {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          playVideo();\r\n        }\r\n      }\r\n      \r\n      return () => {\r\n        if (videoRef.current) {\r\n          videoRef.current.removeEventListener('canplay', onCanPlay);\r\n          videoRef.current.removeEventListener('loadedmetadata', onLoadedMetadata);\r\n          videoRef.current.removeEventListener('waiting', onWaiting);\r\n          videoRef.current.removeEventListener('playing', onPlaying);\r\n          videoRef.current.removeEventListener('pause', onPause);\r\n          videoRef.current.removeEventListener('ended', onEnded);\r\n          videoRef.current.removeEventListener('stalled', onStalled);\r\n          videoRef.current.removeEventListener('suspend', onSuspend);\r\n          videoRef.current.removeEventListener('error', onVideoError);\r\n          videoRef.current.pause();\r\n          videoRef.current.removeAttribute('src');\r\n          videoRef.current.load();\r\n        }\r\n      };\r\n    }\r\n\r\n    // P√´r HLS streams\r\n    if (isHlsStream) {\r\n      if (Hls.isSupported()) {\r\n        try {\r\n          console.log('üé¨ Using HLS.js');\r\n          \r\n          hls = new Hls({\r\n            enableWorker: true,\r\n            lowLatencyMode: false,\r\n            backBufferLength: 60,\r\n            maxBufferLength: 30,\r\n            maxMaxBufferLength: 60,\r\n            maxBufferSize: 30 * 1000 * 1000,\r\n            maxBufferHole: 0.5,\r\n            manifestLoadingTimeOut: 15000,\r\n            manifestLoadingMaxRetry: 5,\r\n            manifestLoadingRetryDelay: 1000,\r\n            manifestLoadingMaxRetryTimeout: 30000,\r\n            levelLoadingTimeOut: 15000,\r\n            levelLoadingMaxRetry: 4,\r\n            levelLoadingRetryDelay: 1000,\r\n            levelLoadingMaxRetryTimeout: 30000,\r\n            fragLoadingTimeOut: 20000,\r\n            fragLoadingMaxRetry: 4,\r\n            fragLoadingRetryDelay: 1000,\r\n            fragLoadingMaxRetryTimeout: 30000,\r\n            startLevel: -1,\r\n            debug: false,\r\n          });\r\n\r\n          hlsRef.current = hls;\r\n\r\n          hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n            console.log('‚úÖ HLS media attached');\r\n            hls.loadSource(src);\r\n          });\r\n\r\n          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\r\n            console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\r\n            setIsReady(true);\r\n            setError(null);\r\n            \r\n            if (isPlaying) {\r\n              playVideo();\r\n            }\r\n          });\r\n\r\n          hls.on(Hls.Events.ERROR, (event, data) => {\r\n            console.error('‚ùå HLS error:', data);\r\n            \r\n            if (data.fatal) {\r\n              switch (data.type) {\r\n                case Hls.ErrorTypes.NETWORK_ERROR:\r\n                  console.log('Network error, trying to recover...');\r\n                  hls.startLoad();\r\n                  break;\r\n                case Hls.ErrorTypes.MEDIA_ERROR:\r\n                  console.log('Media error, trying to recover...');\r\n                  hls.recoverMediaError();\r\n                  break;\r\n                default:\r\n                  console.log('Fatal error, falling back to direct video...');\r\n                  setUseNativeControls(true);\r\n                  setError('Problem me stream-in, duke provuar metod√´ alternative...');\r\n                  if (videoRef.current) {\r\n                    videoRef.current.src = src;\r\n                    videoRef.current.load();\r\n                  }\r\n                  break;\r\n              }\r\n            }\r\n            \r\n            // Raporto error por jo n√´ m√´nyr√´ ciklike\r\n            if (data.fatal && data.type !== Hls.ErrorTypes.OTHER_ERROR) {\r\n              reportError({ \r\n                type: 'hlsError', \r\n                message: `HLS Error: ${data.type}`,\r\n                details: data.details \r\n              });\r\n            }\r\n          });\r\n\r\n          hls.attachMedia(videoRef.current);\r\n        } catch (err) {\r\n          console.error('Failed to initialize HLS:', err);\r\n          setUseNativeControls(true);\r\n          videoRef.current.src = src;\r\n          videoRef.current.load();\r\n        }\r\n      } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\r\n        console.log('üé¨ Using Safari native HLS');\r\n        videoRef.current.src = src;\r\n        videoRef.current.load();\r\n        \r\n        const onLoadedMetadata = () => {\r\n          setIsReady(true);\r\n          if (isPlaying) {\r\n            playVideo();\r\n          }\r\n        };\r\n        \r\n        videoRef.current.addEventListener('loadedmetadata', onLoadedMetadata);\r\n        \r\n        return () => {\r\n          videoRef.current?.removeEventListener('loadedmetadata', onLoadedMetadata);\r\n        };\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n        hlsRef.current = null;\r\n      }\r\n    };\r\n  }, [src, isPlaying, playVideo, reportError]);\r\n\r\n  // Handle play/pause separately\r\n  useEffect(() => {\r\n    if (!videoRef.current || !isReady) return;\r\n\r\n    if (isPlaying) {\r\n      playVideo();\r\n    } else {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [isPlaying, isReady, playVideo]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    if (retryCount >= MAX_RETRIES) {\r\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\r\n      return;\r\n    }\r\n\r\n    setRetryCount(prev => prev + 1);\r\n    setError(null);\r\n    setUseNativeControls(true);\r\n    errorReportedRef.current = false;\r\n    \r\n    // Reload video\r\n    if (videoRef.current) {\r\n      const currentSrc = src;\r\n      videoRef.current.src = '';\r\n      videoRef.current.load();\r\n      \r\n      setTimeout(() => {\r\n        if (videoRef.current) {\r\n          videoRef.current.src = currentSrc;\r\n          videoRef.current.load();\r\n          \r\n          setTimeout(() => {\r\n            if (videoRef.current && isPlaying) {\r\n              videoRef.current.play().catch(e => {\r\n                console.warn('Retry failed:', e);\r\n              });\r\n            }\r\n          }, 500);\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [retryCount, src, isPlaying]);\r\n\r\n  const handleFullscreen = useCallback(() => {\r\n    if (videoRef.current) {\r\n      if (videoRef.current.requestFullscreen) {\r\n        videoRef.current.requestFullscreen();\r\n      } else if (videoRef.current.webkitRequestFullscreen) {\r\n        videoRef.current.webkitRequestFullscreen();\r\n      } else if (videoRef.current.msRequestFullscreen) {\r\n        videoRef.current.msRequestFullscreen();\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (!src) return null;\r\n\r\n  return (\r\n    <div className={`hls-player theme-${theme}`}>\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-element\"\r\n          playsInline\r\n          controls={true}\r\n          preload=\"auto\"\r\n          poster={currentStreamInfo?.logo}\r\n        />\r\n        \r\n        {/* Loading Indicator */}\r\n        {!isReady && !error && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <p>Duke ngarkuar stream-in...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Buffering Indicator */}\r\n        {isBuffering && isReady && isPlaying && (\r\n          <div className=\"player-buffering\">\r\n            <div className=\"buffering-spinner\"></div>\r\n            <p>Duke bufferuar...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"player-error\">\r\n            <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n            <p>{error}</p>\r\n            <button onClick={handleRetry} className=\"retry-btn\">\r\n              Provo p√´rs√´ri\r\n            </button>\r\n            <button \r\n              onClick={() => window.open(src, '_blank')} \r\n              className=\"direct-link-btn\"\r\n            >\r\n              Hap direkt\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Play Button Overlay */}\r\n        {!isPlaying && isReady && !error && (\r\n          <button className=\"play-btn-overlay\" onClick={onPlayPause}>\r\n            ‚ñ∂\r\n          </button>\r\n        )}\r\n\r\n        {/* Fullscreen Button */}\r\n        {isReady && !error && (\r\n          <button className=\"fullscreen-btn\" onClick={handleFullscreen}>\r\n            ‚õ∂\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Channel Info */}\r\n      {currentStreamInfo && (\r\n        <div className=\"player-info\">\r\n          <div className=\"channel-info\">\r\n            {currentStreamInfo.logo && (\r\n              <img \r\n                src={currentStreamInfo.logo} \r\n                alt={currentStreamInfo.name}\r\n                className=\"channel-logo\"\r\n                onError={(e) => {\r\n                  e.target.onerror = null;\r\n                  e.target.style.display = 'none';\r\n                }}\r\n              />\r\n            )}\r\n            <div className=\"channel-details\">\r\n              <span className=\"channel-name\">{currentStreamInfo.name}</span>\r\n              <span className=\"channel-category\">{currentStreamInfo.category}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          {currentEpg && (\r\n            <div className=\"epg-info\">\r\n              <span className=\"epg-title\">{currentEpg.title}</span>\r\n              <span className=\"epg-time\">\r\n                {new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], { \r\n                  hour: '2-digit', \r\n                  minute: '2-digit' \r\n                })}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}