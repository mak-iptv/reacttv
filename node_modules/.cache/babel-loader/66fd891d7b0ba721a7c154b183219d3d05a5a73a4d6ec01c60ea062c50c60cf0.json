{"ast":null,"code":"const handleM3ULoad = useCallback(async url => {\n  setIsLoading(prev => ({\n    ...prev,\n    general: true\n  }));\n  setError(null);\n  try {\n    if (!url || url.trim() === \"\") {\n      throw new Error(\"URL nuk mund të jetë bosh\");\n    }\n    let m3uUrl = url.trim();\n\n    // Shto https:// nëse nuk ka protocol\n    if (!m3uUrl.startsWith('http://') && !m3uUrl.startsWith('https://')) {\n      m3uUrl = 'https://' + m3uUrl;\n    }\n    console.log('Fetching M3U from:', m3uUrl);\n\n    // ✅ PËRDOR CORS PROXY\n    const corsProxies = ['https://cors-anywhere.herokuapp.com/', 'https://api.allorigins.win/raw?url=', 'https://corsproxy.io/?', 'https://proxy.cors.sh/'];\n\n    // Provo me proxy të ndryshëm\n    let response = null;\n    let lastError = null;\n    for (const proxy of corsProxies) {\n      try {\n        console.log('Trying proxy:', proxy);\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 10000);\n        response = await fetch(proxy + m3uUrl, {\n          signal: controller.signal,\n          headers: {\n            'Accept': '*/*',\n            'Cache-Control': 'no-cache',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n          }\n        });\n        clearTimeout(timeoutId);\n        if (response.ok) {\n          console.log('Success with proxy:', proxy);\n          break;\n        }\n      } catch (err) {\n        lastError = err;\n        console.log('Proxy failed:', proxy, err.message);\n        continue;\n      }\n    }\n\n    // Nëse asnjë proxy nuk funksionoi, provo pa proxy\n    if (!response || !response.ok) {\n      console.log('Trying without proxy...');\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\n      response = await fetch(m3uUrl, {\n        signal: controller.signal,\n        mode: 'cors',\n        headers: {\n          'Accept': '*/*',\n          'Cache-Control': 'no-cache'\n        }\n      });\n      clearTimeout(timeoutId);\n    }\n    if (!response || !response.ok) {\n      var _response;\n      throw new Error(`Nuk mund të lidhemi me URL-në. Statusi: ${((_response = response) === null || _response === void 0 ? void 0 : _response.status) || 'unknown'}`);\n    }\n    const m3uText = await response.text();\n    if (!m3uText || m3uText.length === 0) {\n      throw new Error(\"M3U skedari është bosh\");\n    }\n    console.log('M3U file size:', m3uText.length, 'bytes');\n\n    // Pjesa tjetër e kodit për parse mbetet e njëjtë...\n  } catch (err) {\n    if (err.name === 'AbortError') {\n      setError(\"Lidhja mori shumë kohë. Kontrollo URL-në.\");\n    } else {\n      setError(`M3U gabim: ${err.message}. Provo një URL tjetër ose përdor Xtream.`);\n    }\n    console.error('M3U loading error:', err);\n  } finally {\n    setIsLoading(prev => ({\n      ...prev,\n      general: false\n    }));\n  }\n}, []);","map":{"version":3,"names":["handleM3ULoad","useCallback","url","setIsLoading","prev","general","setError","trim","Error","m3uUrl","startsWith","console","log","corsProxies","response","lastError","proxy","controller","AbortController","timeoutId","setTimeout","abort","fetch","signal","headers","clearTimeout","ok","err","message","mode","_response","status","m3uText","text","length","name","error"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/M3UUploader.jsx"],"sourcesContent":["const handleM3ULoad = useCallback(async (url) => {\r\n  setIsLoading(prev => ({ ...prev, general: true }));\r\n  setError(null);\r\n  \r\n  try {\r\n    if (!url || url.trim() === \"\") {\r\n      throw new Error(\"URL nuk mund të jetë bosh\");\r\n    }\r\n\r\n    let m3uUrl = url.trim();\r\n    \r\n    // Shto https:// nëse nuk ka protocol\r\n    if (!m3uUrl.startsWith('http://') && !m3uUrl.startsWith('https://')) {\r\n      m3uUrl = 'https://' + m3uUrl;\r\n    }\r\n\r\n    console.log('Fetching M3U from:', m3uUrl);\r\n\r\n    // ✅ PËRDOR CORS PROXY\r\n    const corsProxies = [\r\n      'https://cors-anywhere.herokuapp.com/',\r\n      'https://api.allorigins.win/raw?url=',\r\n      'https://corsproxy.io/?',\r\n      'https://proxy.cors.sh/'\r\n    ];\r\n\r\n    // Provo me proxy të ndryshëm\r\n    let response = null;\r\n    let lastError = null;\r\n\r\n    for (const proxy of corsProxies) {\r\n      try {\r\n        console.log('Trying proxy:', proxy);\r\n        \r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n        \r\n        response = await fetch(proxy + m3uUrl, {\r\n          signal: controller.signal,\r\n          headers: {\r\n            'Accept': '*/*',\r\n            'Cache-Control': 'no-cache',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\r\n          }\r\n        });\r\n        \r\n        clearTimeout(timeoutId);\r\n        \r\n        if (response.ok) {\r\n          console.log('Success with proxy:', proxy);\r\n          break;\r\n        }\r\n      } catch (err) {\r\n        lastError = err;\r\n        console.log('Proxy failed:', proxy, err.message);\r\n        continue;\r\n      }\r\n    }\r\n\r\n    // Nëse asnjë proxy nuk funksionoi, provo pa proxy\r\n    if (!response || !response.ok) {\r\n      console.log('Trying without proxy...');\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n      \r\n      response = await fetch(m3uUrl, {\r\n        signal: controller.signal,\r\n        mode: 'cors',\r\n        headers: {\r\n          'Accept': '*/*',\r\n          'Cache-Control': 'no-cache'\r\n        }\r\n      });\r\n      \r\n      clearTimeout(timeoutId);\r\n    }\r\n\r\n    if (!response || !response.ok) {\r\n      throw new Error(`Nuk mund të lidhemi me URL-në. Statusi: ${response?.status || 'unknown'}`);\r\n    }\r\n\r\n    const m3uText = await response.text();\r\n    \r\n    if (!m3uText || m3uText.length === 0) {\r\n      throw new Error(\"M3U skedari është bosh\");\r\n    }\r\n\r\n    console.log('M3U file size:', m3uText.length, 'bytes');\r\n    \r\n    // Pjesa tjetër e kodit për parse mbetet e njëjtë...\r\n    \r\n  } catch (err) {\r\n    if (err.name === 'AbortError') {\r\n      setError(\"Lidhja mori shumë kohë. Kontrollo URL-në.\");\r\n    } else {\r\n      setError(`M3U gabim: ${err.message}. Provo një URL tjetër ose përdor Xtream.`);\r\n    }\r\n    console.error('M3U loading error:', err);\r\n  } finally {\r\n    setIsLoading(prev => ({ ...prev, general: false }));\r\n  }\r\n}, []);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}