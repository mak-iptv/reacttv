{"ast":null,"code":"// Funksion për parsë M3U playlist - VERSION ME PROXY\nconst parseM3UPlaylist = async url => {\n  try {\n    // Kontrolloni URL\n    if (!url || !url.startsWith('http')) {\n      throw new Error('URL-ja M3U duhet të fillojë me http:// ose https://');\n    }\n\n    // Kontrolloni nëse jeni online\n    if (!navigator.onLine) {\n      throw new Error('Nuk jeni të lidhur në internet');\n    }\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 45000); // 45 sekonda timeout\n\n    try {\n      console.log('Fetching M3U via proxy:', url);\n\n      // Përdor proxy-n nga iptvService.jsx\n      const proxyUrl = `/api/m3u?url=${encodeURIComponent(url)}`;\n      const response = await fetch(proxyUrl, {\n        signal: controller.signal,\n        headers: {\n          'Accept': 'text/plain, application/octet-stream, */*',\n          'Cache-Control': 'no-cache'\n        }\n      });\n      if (!response.ok) {\n        // Provoni direkt nëse proxy dështon\n        console.warn('Proxy failed, trying direct connection...');\n        const directResponse = await fetch(url, {\n          signal: controller.signal,\n          headers: {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n            'Accept': 'text/plain, application/octet-stream, */*',\n            'Cache-Control': 'no-cache'\n          }\n        });\n        if (!directResponse.ok) {\n          throw new Error(`HTTP ${directResponse.status}: ${directResponse.statusText} (tried both proxy and direct)`);\n        }\n        const m3uContent = await directResponse.text();\n        console.log('Fetched directly, length:', m3uContent.length);\n        return await processM3UContent(m3uContent, url);\n      }\n      const m3uContent = await response.text();\n      console.log('Fetched via proxy, length:', m3uContent.length);\n      return await processM3UContent(m3uContent, url);\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  } catch (error) {\n    console.error('Error parsing M3U:', error);\n    console.error('Error details:', {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    });\n    if (error.name === 'AbortError') {\n      throw new Error('Kërkesa për M3U kaloi kohën e pritjes (45 sekonda)');\n    }\n    throw new Error(`Gabim në leximin e listës M3U: ${error.message}`);\n  }\n};\n\n// Funksion ndihmës për procesimin e përmbajtjes M3U\nconst processM3UContent = async (m3uContent, url) => {\n  // Kontrolloni nëse përmbajtja është bosh\n  if (!m3uContent || m3uContent.trim().length === 0) {\n    throw new Error('Skedari M3U është bosh');\n  }\n\n  // Debug: Shfaqni 500 karakteret e para për diagnozë\n  console.log('Preview of response (first 500 chars):', m3uContent.substring(0, 500));\n  console.log('Response length:', m3uContent.length);\n\n  // Kontrolloni për formatet e ndryshme\n  const isM3U = m3uContent.includes('#EXTM3U');\n  const isM3U8 = m3uContent.includes('#EXTM3U') || m3uContent.includes('#EXT-X-VERSION');\n  const isHTML = m3uContent.toLowerCase().includes('<!doctype') || m3uContent.toLowerCase().includes('<html');\n  const isJSON = m3uContent.trim().startsWith('{') || m3uContent.trim().startsWith('[');\n  const isXML = m3uContent.trim().startsWith('<?xml') || m3uContent.includes('<xml');\n  if (isHTML) {\n    // Kontrollo nëse është faqe login ose error\n    const isLoginPage = m3uContent.toLowerCase().includes('login') || m3uContent.toLowerCase().includes('password') || m3uContent.toLowerCase().includes('auth');\n    if (isLoginPage) {\n      throw new Error('URL-ja kërkon autentikim. Mund të jetë e mbrojtur me password.');\n    } else {\n      throw new Error('URL-ja ktheu një faqe HTML. Mund të jetë URL e gabuar.');\n    }\n  }\n  if (isJSON) {\n    try {\n      // Provoni të procesoni si JSON\n      const jsonData = JSON.parse(m3uContent);\n      console.log('JSON data received:', jsonData);\n      throw new Error('URL-ja ktheu JSON në vend të skedarit M3U. Format i pasuportuar.');\n    } catch (jsonError) {\n      throw new Error('Përmbajtja është në format JSON të pavlefshëm');\n    }\n  }\n  if (isXML) {\n    throw new Error('URL-ja ktheu XML në vend të skedarit M3U');\n  }\n  if (!isM3U && !isM3U8) {\n    // Provo të shikosh nëse ka ndonjë linjë EXTINF (ndoshta M3U pa header)\n    const hasExtInf = m3uContent.includes('#EXTINF');\n    if (hasExtInf) {\n      console.log('U gjet #EXTINF por jo #EXTM3U - duke procesuar si M3U pa header');\n      return parseM3ULines(m3uContent, url, false);\n    }\n\n    // Provo të shikosh nëse është një listë e thjeshtë URL-sh\n    const lines = m3uContent.split('\\n').filter(line => line.trim() && !line.startsWith('#'));\n    const hasHttpUrls = lines.length > 0 && lines.some(line => line.match(/^https?:\\/\\//));\n    if (hasHttpUrls) {\n      console.log('Duke trajtuar si listë të thjeshtë URL-sh');\n      return parseSimpleUrlList(lines, url);\n    }\n\n    // Nëse nuk ka asnjë linjë URL, kontrollo për gabime\n    const errorKeywords = ['error', 'not found', 'forbidden', 'unauthorized', 'access denied'];\n    const hasError = errorKeywords.some(keyword => m3uContent.toLowerCase().includes(keyword));\n    if (hasError) {\n      throw new Error('Serveri ktheu një mesazh gabimi: ' + m3uContent.substring(0, 100));\n    }\n    throw new Error(`Format i panjohur. Përmbajtja fillon me: \"${m3uContent.substring(0, 100)}...\"`);\n  }\n\n  // NËSE ËSHTË M3U STANDARD\n  return parseM3ULines(m3uContent, url, true);\n};\n\n// Funksion për parsë linjat M3U\nconst parseM3ULines = (m3uContent, url, hasHeader) => {\n  const lines = m3uContent.split('\\n');\n  const channels = [];\n  const movies = [];\n  const series = [];\n  const uniqueCategories = new Set(['Të gjitha']);\n  let currentItem = null;\n  let lineNumber = 0;\n  let itemsParsed = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    lineNumber++;\n    if (line.startsWith('#EXTINF:')) {\n      const info = line.substring(8);\n      const commaIndex = info.indexOf(',');\n      const duration = commaIndex > -1 ? info.substring(0, commaIndex) : '0';\n      const name = commaIndex > -1 ? info.substring(commaIndex + 1) : info;\n      currentItem = {\n        stream_id: `m3u_${Date.now()}_${Math.random().toString(36).substr(2, 9)}_${itemsParsed}`,\n        name: name.trim(),\n        duration: duration,\n        stream_url: '',\n        group_title: '',\n        category: '',\n        type: 'live',\n        stream_type: 'live',\n        logo: '',\n        added_at: new Date().toISOString(),\n        line_number: lineNumber\n      };\n\n      // Extract attributes\n      const attrs = line.match(/([a-zA-Z0-9_-]+)=(\"[^\"]*\"|[^,]+)/g) || [];\n      attrs.forEach(attr => {\n        const [key, value] = attr.split('=');\n        const cleanKey = key.toLowerCase().replace(/[-_]/g, '');\n        const cleanValue = value.replace(/\"/g, '').trim();\n        switch (cleanKey) {\n          case 'grouptitle':\n            currentItem.group_title = cleanValue;\n            currentItem.category = cleanValue || 'Të gjitha';\n            if (cleanValue) uniqueCategories.add(cleanValue);\n            const groupLower = cleanValue.toLowerCase();\n            if (groupLower.includes('movie') || groupLower.includes('film') || groupLower.includes('vod')) {\n              currentItem.type = 'movie';\n              currentItem.stream_type = 'movie';\n            } else if (groupLower.includes('series') || groupLower.includes('serial') || groupLower.includes('tv show')) {\n              currentItem.type = 'series';\n              currentItem.stream_type = 'series';\n            }\n            break;\n          case 'tvglogo':\n            currentItem.logo = cleanValue;\n            break;\n          case 'tvgname':\n            if (!currentItem.name || currentItem.name === 'Unknown') {\n              currentItem.name = cleanValue;\n            }\n            break;\n          default:\n            // Ruaj të gjitha atributet e tjera\n            currentItem[cleanKey] = cleanValue;\n            break;\n        }\n      });\n    } else if (line && !line.startsWith('#') && currentItem) {\n      // This is the stream URL\n      let streamUrl = line.trim();\n\n      // Kontrolloni nëse URL-ja është relative\n      if (!streamUrl.startsWith('http') && !streamUrl.startsWith('rtmp') && !streamUrl.startsWith('rtsp')) {\n        if (streamUrl.startsWith('/')) {\n          // Absolute path - shtoni në bazë të domain\n          const baseUrl = new URL(url);\n          streamUrl = `${baseUrl.origin}${streamUrl}`;\n        } else {\n          // Relative path - shtoni në bazë të URL-së\n          const baseUrl = url.substring(0, url.lastIndexOf('/') + 1);\n          streamUrl = `${baseUrl}${streamUrl}`;\n        }\n      }\n      currentItem.stream_url = streamUrl;\n\n      // Vendosni logo default nëse nuk ka\n      if (!currentItem.logo) {\n        const nameForLogo = currentItem.name || 'TV';\n        currentItem.logo = `https://ui-avatars.com/api/?name=${encodeURIComponent(nameForLogo)}&background=random&size=128`;\n      } else {\n        // Optimizo logo URL (vendos size 128)\n        currentItem.logo = currentItem.logo.replace(/\\/\\d+$/, '/128');\n      }\n\n      // Sigurohuni që kategoria nuk është bosh\n      if (!currentItem.category) {\n        currentItem.category = 'Të gjitha';\n        uniqueCategories.add('Të gjitha');\n      }\n      if (currentItem.type === 'movie') {\n        movies.push({\n          ...currentItem,\n          stream_type: 'movie'\n        });\n      } else if (currentItem.type === 'series') {\n        series.push({\n          ...currentItem,\n          stream_type: 'series',\n          seasons: []\n        });\n      } else {\n        var _currentItem$name, _currentItem$name2, _currentItem$name3, _currentItem$name4;\n        channels.push({\n          ...currentItem,\n          stream_type: 'live',\n          is_hd: ((_currentItem$name = currentItem.name) === null || _currentItem$name === void 0 ? void 0 : _currentItem$name.toLowerCase().includes('hd')) || ((_currentItem$name2 = currentItem.name) === null || _currentItem$name2 === void 0 ? void 0 : _currentItem$name2.toLowerCase().includes('1080')) || ((_currentItem$name3 = currentItem.name) === null || _currentItem$name3 === void 0 ? void 0 : _currentItem$name3.toLowerCase().includes('720')) || ((_currentItem$name4 = currentItem.name) === null || _currentItem$name4 === void 0 ? void 0 : _currentItem$name4.toLowerCase().includes('4k')) || currentItem.group_title && currentItem.group_title.toLowerCase().includes('hd')\n        });\n      }\n      itemsParsed++;\n      currentItem = null;\n    }\n  }\n\n  // Limit number of items to avoid storage overflow\n  const MAX_ITEMS_PER_CATEGORY = 500;\n  const limitedChannels = channels.slice(0, MAX_ITEMS_PER_CATEGORY);\n  const limitedMovies = movies.slice(0, MAX_ITEMS_PER_CATEGORY);\n  const limitedSeries = series.slice(0, MAX_ITEMS_PER_CATEGORY);\n\n  // Hiq duplikatet bazuar në stream_url\n  const uniqueChannels = Array.from(new Map(limitedChannels.map(ch => [ch.stream_url, ch])).values());\n  const uniqueMovies = Array.from(new Map(limitedMovies.map(m => [m.stream_url, m])).values());\n  const uniqueSeries = Array.from(new Map(limitedSeries.map(s => [s.stream_url, s])).values());\n\n  // Sort categories alphabetically\n  const sortedCategories = Array.from(uniqueCategories).sort();\n  console.log(`Parsed ${uniqueChannels.length} channels, ${uniqueMovies.length} movies, ${uniqueSeries.length} series from M3U`);\n  return {\n    channels: uniqueChannels,\n    movies: uniqueMovies,\n    series: uniqueSeries,\n    categories: sortedCategories\n  };\n};\n\n// Funksion për listë të thjeshtë URL-sh\nconst parseSimpleUrlList = (lines, url) => {\n  const channels = lines.filter(line => line.trim() && line.match(/^https?:\\/\\//)).map((streamUrl, index) => {\n    const name = `Channel ${index + 1}`;\n    return {\n      stream_id: `simple_${Date.now()}_${index}`,\n      name: name,\n      stream_url: streamUrl.trim(),\n      stream_type: 'live',\n      type: 'live',\n      category: 'Other',\n      group_title: 'Other',\n      logo: `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=random&size=128`,\n      added_at: new Date().toISOString(),\n      is_hd: streamUrl.toLowerCase().includes('hd') || streamUrl.toLowerCase().includes('1080') || streamUrl.toLowerCase().includes('720')\n    };\n  });\n  return {\n    channels: channels.slice(0, 500),\n    movies: [],\n    series: [],\n    categories: ['Other', 'Të gjitha']\n  };\n};","map":{"version":3,"names":["parseM3UPlaylist","url","startsWith","Error","navigator","onLine","controller","AbortController","timeoutId","setTimeout","abort","console","log","proxyUrl","encodeURIComponent","response","fetch","signal","headers","ok","warn","directResponse","status","statusText","m3uContent","text","length","processM3UContent","clearTimeout","error","name","message","stack","trim","substring","isM3U","includes","isM3U8","isHTML","toLowerCase","isJSON","isXML","isLoginPage","jsonData","JSON","parse","jsonError","hasExtInf","parseM3ULines","lines","split","filter","line","hasHttpUrls","some","match","parseSimpleUrlList","errorKeywords","hasError","keyword","hasHeader","channels","movies","series","uniqueCategories","Set","currentItem","lineNumber","itemsParsed","i","info","commaIndex","indexOf","duration","stream_id","Date","now","Math","random","toString","substr","stream_url","group_title","category","type","stream_type","logo","added_at","toISOString","line_number","attrs","forEach","attr","key","value","cleanKey","replace","cleanValue","add","groupLower","streamUrl","baseUrl","URL","origin","lastIndexOf","nameForLogo","push","seasons","_currentItem$name","_currentItem$name2","_currentItem$name3","_currentItem$name4","is_hd","MAX_ITEMS_PER_CATEGORY","limitedChannels","slice","limitedMovies","limitedSeries","uniqueChannels","Array","from","Map","map","ch","values","uniqueMovies","m","uniqueSeries","s","sortedCategories","sort","categories","index"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// Funksion për parsë M3U playlist - VERSION ME PROXY\r\nconst parseM3UPlaylist = async (url) => {\r\n  try {\r\n    // Kontrolloni URL\r\n    if (!url || !url.startsWith('http')) {\r\n      throw new Error('URL-ja M3U duhet të fillojë me http:// ose https://');\r\n    }\r\n    \r\n    // Kontrolloni nëse jeni online\r\n    if (!navigator.onLine) {\r\n      throw new Error('Nuk jeni të lidhur në internet');\r\n    }\r\n    \r\n    const controller = new AbortController();\r\n    const timeoutId = setTimeout(() => controller.abort(), 45000); // 45 sekonda timeout\r\n    \r\n    try {\r\n      console.log('Fetching M3U via proxy:', url);\r\n      \r\n      // Përdor proxy-n nga iptvService.jsx\r\n      const proxyUrl = `/api/m3u?url=${encodeURIComponent(url)}`;\r\n      const response = await fetch(proxyUrl, { \r\n        signal: controller.signal,\r\n        headers: {\r\n          'Accept': 'text/plain, application/octet-stream, */*',\r\n          'Cache-Control': 'no-cache'\r\n        }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        // Provoni direkt nëse proxy dështon\r\n        console.warn('Proxy failed, trying direct connection...');\r\n        const directResponse = await fetch(url, { \r\n          signal: controller.signal,\r\n          headers: {\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n            'Accept': 'text/plain, application/octet-stream, */*',\r\n            'Cache-Control': 'no-cache'\r\n          }\r\n        });\r\n        \r\n        if (!directResponse.ok) {\r\n          throw new Error(`HTTP ${directResponse.status}: ${directResponse.statusText} (tried both proxy and direct)`);\r\n        }\r\n        \r\n        const m3uContent = await directResponse.text();\r\n        console.log('Fetched directly, length:', m3uContent.length);\r\n        return await processM3UContent(m3uContent, url);\r\n      }\r\n      \r\n      const m3uContent = await response.text();\r\n      console.log('Fetched via proxy, length:', m3uContent.length);\r\n      return await processM3UContent(m3uContent, url);\r\n      \r\n    } finally {\r\n      clearTimeout(timeoutId);\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('Error parsing M3U:', error);\r\n    console.error('Error details:', {\r\n      name: error.name,\r\n      message: error.message,\r\n      stack: error.stack\r\n    });\r\n    \r\n    if (error.name === 'AbortError') {\r\n      throw new Error('Kërkesa për M3U kaloi kohën e pritjes (45 sekonda)');\r\n    }\r\n    throw new Error(`Gabim në leximin e listës M3U: ${error.message}`);\r\n  }\r\n};\r\n\r\n// Funksion ndihmës për procesimin e përmbajtjes M3U\r\nconst processM3UContent = async (m3uContent, url) => {\r\n  // Kontrolloni nëse përmbajtja është bosh\r\n  if (!m3uContent || m3uContent.trim().length === 0) {\r\n    throw new Error('Skedari M3U është bosh');\r\n  }\r\n  \r\n  // Debug: Shfaqni 500 karakteret e para për diagnozë\r\n  console.log('Preview of response (first 500 chars):', m3uContent.substring(0, 500));\r\n  console.log('Response length:', m3uContent.length);\r\n  \r\n  // Kontrolloni për formatet e ndryshme\r\n  const isM3U = m3uContent.includes('#EXTM3U');\r\n  const isM3U8 = m3uContent.includes('#EXTM3U') || m3uContent.includes('#EXT-X-VERSION');\r\n  const isHTML = m3uContent.toLowerCase().includes('<!doctype') || \r\n                 m3uContent.toLowerCase().includes('<html');\r\n  const isJSON = m3uContent.trim().startsWith('{') || m3uContent.trim().startsWith('[');\r\n  const isXML = m3uContent.trim().startsWith('<?xml') || m3uContent.includes('<xml');\r\n  \r\n  if (isHTML) {\r\n    // Kontrollo nëse është faqe login ose error\r\n    const isLoginPage = m3uContent.toLowerCase().includes('login') || \r\n                       m3uContent.toLowerCase().includes('password') ||\r\n                       m3uContent.toLowerCase().includes('auth');\r\n    \r\n    if (isLoginPage) {\r\n      throw new Error('URL-ja kërkon autentikim. Mund të jetë e mbrojtur me password.');\r\n    } else {\r\n      throw new Error('URL-ja ktheu një faqe HTML. Mund të jetë URL e gabuar.');\r\n    }\r\n  }\r\n  \r\n  if (isJSON) {\r\n    try {\r\n      // Provoni të procesoni si JSON\r\n      const jsonData = JSON.parse(m3uContent);\r\n      console.log('JSON data received:', jsonData);\r\n      throw new Error('URL-ja ktheu JSON në vend të skedarit M3U. Format i pasuportuar.');\r\n    } catch (jsonError) {\r\n      throw new Error('Përmbajtja është në format JSON të pavlefshëm');\r\n    }\r\n  }\r\n  \r\n  if (isXML) {\r\n    throw new Error('URL-ja ktheu XML në vend të skedarit M3U');\r\n  }\r\n  \r\n  if (!isM3U && !isM3U8) {\r\n    // Provo të shikosh nëse ka ndonjë linjë EXTINF (ndoshta M3U pa header)\r\n    const hasExtInf = m3uContent.includes('#EXTINF');\r\n    if (hasExtInf) {\r\n      console.log('U gjet #EXTINF por jo #EXTM3U - duke procesuar si M3U pa header');\r\n      return parseM3ULines(m3uContent, url, false);\r\n    }\r\n    \r\n    // Provo të shikosh nëse është një listë e thjeshtë URL-sh\r\n    const lines = m3uContent.split('\\n').filter(line => line.trim() && !line.startsWith('#'));\r\n    const hasHttpUrls = lines.length > 0 && lines.some(line => line.match(/^https?:\\/\\//));\r\n    \r\n    if (hasHttpUrls) {\r\n      console.log('Duke trajtuar si listë të thjeshtë URL-sh');\r\n      return parseSimpleUrlList(lines, url);\r\n    }\r\n    \r\n    // Nëse nuk ka asnjë linjë URL, kontrollo për gabime\r\n    const errorKeywords = ['error', 'not found', 'forbidden', 'unauthorized', 'access denied'];\r\n    const hasError = errorKeywords.some(keyword => m3uContent.toLowerCase().includes(keyword));\r\n    \r\n    if (hasError) {\r\n      throw new Error('Serveri ktheu një mesazh gabimi: ' + m3uContent.substring(0, 100));\r\n    }\r\n    \r\n    throw new Error(`Format i panjohur. Përmbajtja fillon me: \"${m3uContent.substring(0, 100)}...\"`);\r\n  }\r\n  \r\n  // NËSE ËSHTË M3U STANDARD\r\n  return parseM3ULines(m3uContent, url, true);\r\n};\r\n\r\n// Funksion për parsë linjat M3U\r\nconst parseM3ULines = (m3uContent, url, hasHeader) => {\r\n  const lines = m3uContent.split('\\n');\r\n  const channels = [];\r\n  const movies = [];\r\n  const series = [];\r\n  const uniqueCategories = new Set(['Të gjitha']);\r\n  \r\n  let currentItem = null;\r\n  let lineNumber = 0;\r\n  let itemsParsed = 0;\r\n  \r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i].trim();\r\n    lineNumber++;\r\n    \r\n    if (line.startsWith('#EXTINF:')) {\r\n      const info = line.substring(8);\r\n      const commaIndex = info.indexOf(',');\r\n      const duration = commaIndex > -1 ? info.substring(0, commaIndex) : '0';\r\n      const name = commaIndex > -1 ? info.substring(commaIndex + 1) : info;\r\n      \r\n      currentItem = {\r\n        stream_id: `m3u_${Date.now()}_${Math.random().toString(36).substr(2, 9)}_${itemsParsed}`,\r\n        name: name.trim(),\r\n        duration: duration,\r\n        stream_url: '',\r\n        group_title: '',\r\n        category: '',\r\n        type: 'live',\r\n        stream_type: 'live',\r\n        logo: '',\r\n        added_at: new Date().toISOString(),\r\n        line_number: lineNumber\r\n      };\r\n      \r\n      // Extract attributes\r\n      const attrs = line.match(/([a-zA-Z0-9_-]+)=(\"[^\"]*\"|[^,]+)/g) || [];\r\n      attrs.forEach(attr => {\r\n        const [key, value] = attr.split('=');\r\n        const cleanKey = key.toLowerCase().replace(/[-_]/g, '');\r\n        const cleanValue = value.replace(/\"/g, '').trim();\r\n        \r\n        switch (cleanKey) {\r\n          case 'grouptitle':\r\n            currentItem.group_title = cleanValue;\r\n            currentItem.category = cleanValue || 'Të gjitha';\r\n            if (cleanValue) uniqueCategories.add(cleanValue);\r\n            \r\n            const groupLower = cleanValue.toLowerCase();\r\n            if (groupLower.includes('movie') || \r\n                groupLower.includes('film') ||\r\n                groupLower.includes('vod')) {\r\n              currentItem.type = 'movie';\r\n              currentItem.stream_type = 'movie';\r\n            } else if (groupLower.includes('series') ||\r\n                      groupLower.includes('serial') ||\r\n                      groupLower.includes('tv show')) {\r\n              currentItem.type = 'series';\r\n              currentItem.stream_type = 'series';\r\n            }\r\n            break;\r\n            \r\n          case 'tvglogo':\r\n            currentItem.logo = cleanValue;\r\n            break;\r\n            \r\n          case 'tvgname':\r\n            if (!currentItem.name || currentItem.name === 'Unknown') {\r\n              currentItem.name = cleanValue;\r\n            }\r\n            break;\r\n            \r\n          default:\r\n            // Ruaj të gjitha atributet e tjera\r\n            currentItem[cleanKey] = cleanValue;\r\n            break;\r\n        }\r\n      });\r\n      \r\n    } else if (line && !line.startsWith('#') && currentItem) {\r\n      // This is the stream URL\r\n      let streamUrl = line.trim();\r\n      \r\n      // Kontrolloni nëse URL-ja është relative\r\n      if (!streamUrl.startsWith('http') && !streamUrl.startsWith('rtmp') && !streamUrl.startsWith('rtsp')) {\r\n        if (streamUrl.startsWith('/')) {\r\n          // Absolute path - shtoni në bazë të domain\r\n          const baseUrl = new URL(url);\r\n          streamUrl = `${baseUrl.origin}${streamUrl}`;\r\n        } else {\r\n          // Relative path - shtoni në bazë të URL-së\r\n          const baseUrl = url.substring(0, url.lastIndexOf('/') + 1);\r\n          streamUrl = `${baseUrl}${streamUrl}`;\r\n        }\r\n      }\r\n      \r\n      currentItem.stream_url = streamUrl;\r\n      \r\n      // Vendosni logo default nëse nuk ka\r\n      if (!currentItem.logo) {\r\n        const nameForLogo = currentItem.name || 'TV';\r\n        currentItem.logo = `https://ui-avatars.com/api/?name=${encodeURIComponent(nameForLogo)}&background=random&size=128`;\r\n      } else {\r\n        // Optimizo logo URL (vendos size 128)\r\n        currentItem.logo = currentItem.logo.replace(/\\/\\d+$/, '/128');\r\n      }\r\n      \r\n      // Sigurohuni që kategoria nuk është bosh\r\n      if (!currentItem.category) {\r\n        currentItem.category = 'Të gjitha';\r\n        uniqueCategories.add('Të gjitha');\r\n      }\r\n      \r\n      if (currentItem.type === 'movie') {\r\n        movies.push({\r\n          ...currentItem,\r\n          stream_type: 'movie'\r\n        });\r\n      } else if (currentItem.type === 'series') {\r\n        series.push({\r\n          ...currentItem,\r\n          stream_type: 'series',\r\n          seasons: []\r\n        });\r\n      } else {\r\n        channels.push({\r\n          ...currentItem,\r\n          stream_type: 'live',\r\n          is_hd: currentItem.name?.toLowerCase().includes('hd') || \r\n                 currentItem.name?.toLowerCase().includes('1080') ||\r\n                 currentItem.name?.toLowerCase().includes('720') ||\r\n                 currentItem.name?.toLowerCase().includes('4k') ||\r\n                 (currentItem.group_title && currentItem.group_title.toLowerCase().includes('hd'))\r\n        });\r\n      }\r\n      \r\n      itemsParsed++;\r\n      currentItem = null;\r\n    }\r\n  }\r\n  \r\n  // Limit number of items to avoid storage overflow\r\n  const MAX_ITEMS_PER_CATEGORY = 500;\r\n  \r\n  const limitedChannels = channels.slice(0, MAX_ITEMS_PER_CATEGORY);\r\n  const limitedMovies = movies.slice(0, MAX_ITEMS_PER_CATEGORY);\r\n  const limitedSeries = series.slice(0, MAX_ITEMS_PER_CATEGORY);\r\n  \r\n  // Hiq duplikatet bazuar në stream_url\r\n  const uniqueChannels = Array.from(\r\n    new Map(limitedChannels.map(ch => [ch.stream_url, ch])).values()\r\n  );\r\n  const uniqueMovies = Array.from(\r\n    new Map(limitedMovies.map(m => [m.stream_url, m])).values()\r\n  );\r\n  const uniqueSeries = Array.from(\r\n    new Map(limitedSeries.map(s => [s.stream_url, s])).values()\r\n  );\r\n  \r\n  // Sort categories alphabetically\r\n  const sortedCategories = Array.from(uniqueCategories).sort();\r\n  \r\n  console.log(`Parsed ${uniqueChannels.length} channels, ${uniqueMovies.length} movies, ${uniqueSeries.length} series from M3U`);\r\n  \r\n  return { \r\n    channels: uniqueChannels, \r\n    movies: uniqueMovies, \r\n    series: uniqueSeries,\r\n    categories: sortedCategories \r\n  };\r\n};\r\n\r\n// Funksion për listë të thjeshtë URL-sh\r\nconst parseSimpleUrlList = (lines, url) => {\r\n  const channels = lines\r\n    .filter(line => line.trim() && line.match(/^https?:\\/\\//))\r\n    .map((streamUrl, index) => {\r\n      const name = `Channel ${index + 1}`;\r\n      return {\r\n        stream_id: `simple_${Date.now()}_${index}`,\r\n        name: name,\r\n        stream_url: streamUrl.trim(),\r\n        stream_type: 'live',\r\n        type: 'live',\r\n        category: 'Other',\r\n        group_title: 'Other',\r\n        logo: `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=random&size=128`,\r\n        added_at: new Date().toISOString(),\r\n        is_hd: streamUrl.toLowerCase().includes('hd') || \r\n               streamUrl.toLowerCase().includes('1080') ||\r\n               streamUrl.toLowerCase().includes('720')\r\n      };\r\n    });\r\n  \r\n  return { \r\n    channels: channels.slice(0, 500), \r\n    movies: [], \r\n    series: [],\r\n    categories: ['Other', 'Të gjitha'] \r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}