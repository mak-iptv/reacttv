{"ast":null,"code":"// services/xtream.js - VERSIONI I PÃ‹RSHTATUR PÃ‹R KÃ‹TÃ‹ SERVER\n\n/**\r\n * Nderto URL-nÃ« e Xtream API\r\n */\nconst buildUrl = (server, user, pass, action = '') => {\n  let baseUrl = server.trim();\n  if (baseUrl.endsWith('/')) {\n    baseUrl = baseUrl.slice(0, -1);\n  }\n  if (!baseUrl.startsWith('http://') && !baseUrl.startsWith('https://')) {\n    baseUrl = 'http://' + baseUrl;\n  }\n  if (action) {\n    return `${baseUrl}/player_api.php?username=${user}&password=${pass}&action=${action}`;\n  } else {\n    return `${baseUrl}/player_api.php?username=${user}&password=${pass}`;\n  }\n};\n\n/**\r\n * Fetch me CORSProxy.io\r\n */\nconst fetchWithCORSProxy = async url => {\n  const proxies = [`https://corsproxy.io/?${encodeURIComponent(url)}`, `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`, `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`];\n  for (const proxyUrl of proxies) {\n    try {\n      console.log('ðŸ”„ Trying proxy:', proxyUrl);\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 15000);\n      const response = await fetch(proxyUrl, {\n        signal: controller.signal,\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      clearTimeout(timeoutId);\n      if (response.ok) {\n        const text = await response.text();\n\n        // AllOrigins format\n        if (proxyUrl.includes('allorigins')) {\n          try {\n            const wrapped = JSON.parse(text);\n            if (wrapped.contents) {\n              return JSON.parse(wrapped.contents);\n            }\n          } catch (e) {}\n        } else {\n          try {\n            return JSON.parse(text);\n          } catch (e) {\n            return text;\n          }\n        }\n      }\n    } catch (err) {\n      console.log('âŒ Proxy failed:', err.message);\n      continue;\n    }\n  }\n  throw new Error('TÃ« gjitha proxy-t dÃ«shtuan');\n};\n\n/**\r\n * LOGIN\r\n */\nexport const xtreamLogin = async (server, user, pass) => {\n  try {\n    const url = buildUrl(server, user, pass, '');\n    console.log('ðŸ”‘ Login URL:', url);\n    const data = await fetchWithCORSProxy(url);\n    console.log('ðŸ”‘ Login response:', data);\n    if (data && data.user_info) {\n      return {\n        success: true,\n        data: data.user_info,\n        server: server\n      };\n    }\n    return {\n      success: false,\n      error: 'Kredencialet e gabuara'\n    };\n  } catch (error) {\n    console.error('âŒ Login error:', error);\n    return {\n      success: false,\n      error: 'Nuk u lidh me serverin'\n    };\n  }\n};\n\n/**\r\n * LIVE STREAMS - VERSIONI I RI QÃ‹ PUNON PÃ‹R KÃ‹TÃ‹ SERVER\r\n */\nexport const getLiveStreams = async (server, user, pass) => {\n  try {\n    // Disa servera pÃ«rdorin 'get_live_streams' ose 'get_live_channels'\n    const actions = ['get_live_streams', 'get_live_channels', 'get_channels'];\n    for (const action of actions) {\n      try {\n        const url = buildUrl(server, user, pass, action);\n        console.log(`ðŸ“º Trying ${action}:`, url);\n        const data = await fetchWithCORSProxy(url);\n        if (data) {\n          // Kontrollo formate tÃ« ndryshme tÃ« pÃ«rgjigjes\n          let streams = [];\n          if (Array.isArray(data)) {\n            streams = data;\n          } else if (data.live) {\n            streams = data.live;\n          } else if (data.channels) {\n            streams = data.channels;\n          } else if (data.data) {\n            streams = data.data;\n          }\n          if (streams.length > 0) {\n            console.log(`âœ… Found ${streams.length} live channels with ${action}`);\n            return streams.map(channel => ({\n              id: channel.stream_id || channel.id,\n              stream_id: channel.stream_id || channel.id,\n              name: channel.name || 'Pa emÃ«r',\n              title: channel.name || 'Pa emÃ«r',\n              logo: channel.stream_icon || channel.logo || null,\n              poster: channel.stream_icon || channel.logo || null,\n              cover: channel.stream_icon || channel.logo || null,\n              category_id: channel.category_id,\n              category: channel.category_name || channel.category || 'TÃ« tjera',\n              category_name: channel.category_name || channel.category || 'TÃ« tjera',\n              epg_channel_id: channel.epg_channel_id,\n              type: 'live',\n              stream_url: null\n            }));\n          }\n        }\n      } catch (e) {\n        console.log(`âš ï¸ ${action} failed:`, e.message);\n        continue;\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getLiveStreams error:', error);\n    return [];\n  }\n};\n\n/**\r\n * LIVE CATEGORIES\r\n */\nexport const getLiveCategories = async (server, user, pass) => {\n  try {\n    const actions = ['get_live_categories', 'get_categories'];\n    for (const action of actions) {\n      try {\n        const url = buildUrl(server, user, pass, action);\n        console.log(`ðŸ·ï¸ Trying ${action}:`, url);\n        const data = await fetchWithCORSProxy(url);\n        if (data) {\n          let categories = [];\n          if (Array.isArray(data)) {\n            categories = data;\n          } else if (data.categories) {\n            categories = data.categories;\n          }\n          if (categories.length > 0) {\n            return categories.map(cat => ({\n              id: cat.category_id || cat.id,\n              category_id: cat.category_id || cat.id,\n              name: cat.category_name || cat.name || 'TÃ« tjera',\n              title: cat.category_name || cat.name || 'TÃ« tjera',\n              type: 'live'\n            }));\n          }\n        }\n      } catch (e) {\n        continue;\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getLiveCategories error:', error);\n    return [];\n  }\n};\n\n/**\r\n * MOVIES - VERSIONI I RI\r\n */\nexport const getMovies = async (server, user, pass) => {\n  try {\n    const actions = ['get_vod_streams', 'get_movies', 'get_vod'];\n    for (const action of actions) {\n      try {\n        const url = buildUrl(server, user, pass, action);\n        console.log(`ðŸŽ¬ Trying ${action}:`, url);\n        const data = await fetchWithCORSProxy(url);\n        if (data) {\n          let movies = [];\n          if (Array.isArray(data)) {\n            movies = data;\n          } else if (data.vod) {\n            movies = data.vod;\n          } else if (data.movies) {\n            movies = data.movies;\n          } else if (data.data) {\n            movies = data.data;\n          }\n          if (movies.length > 0) {\n            console.log(`âœ… Found ${movies.length} movies with ${action}`);\n            return movies.map(movie => ({\n              id: movie.stream_id || movie.id,\n              stream_id: movie.stream_id || movie.id,\n              name: movie.name || 'Pa titull',\n              title: movie.name || 'Pa titull',\n              logo: movie.stream_icon || movie.poster || null,\n              poster: movie.stream_icon || movie.poster || null,\n              cover: movie.stream_icon || movie.poster || null,\n              backdrop: movie.backdrop_path || null,\n              category_id: movie.category_id,\n              category: movie.category_name || movie.genre || 'Filma',\n              category_name: movie.category_name || movie.genre || 'Filma',\n              year: movie.year || null,\n              rating: movie.rating || null,\n              container_extension: movie.container_extension || 'mp4',\n              type: 'movie'\n            }));\n          }\n        }\n      } catch (e) {\n        continue;\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getMovies error:', error);\n    return [];\n  }\n};\n\n/**\r\n * MOVIES CATEGORIES\r\n */\nexport const getMovieCategories = async (server, user, pass) => {\n  try {\n    const actions = ['get_vod_categories', 'get_movie_categories'];\n    for (const action of actions) {\n      try {\n        const url = buildUrl(server, user, pass, action);\n        console.log(`ðŸ·ï¸ Movie Categories ${action}:`, url);\n        const data = await fetchWithCORSProxy(url);\n        if (data) {\n          let categories = [];\n          if (Array.isArray(data)) {\n            categories = data;\n          } else if (data.categories) {\n            categories = data.categories;\n          }\n          if (categories.length > 0) {\n            return categories.map(cat => ({\n              id: cat.category_id || cat.id,\n              category_id: cat.category_id || cat.id,\n              name: cat.category_name || cat.name || 'Filma',\n              title: cat.category_name || cat.name || 'Filma',\n              type: 'movie'\n            }));\n          }\n        }\n      } catch (e) {\n        continue;\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getMovieCategories error:', error);\n    return [];\n  }\n};\n\n/**\r\n * SERIES\r\n */\nexport const getSeries = async (server, user, pass) => {\n  try {\n    const actions = ['get_series', 'get_series_list'];\n    for (const action of actions) {\n      try {\n        const url = buildUrl(server, user, pass, action);\n        console.log(`ðŸ“º Series ${action}:`, url);\n        const data = await fetchWithCORSProxy(url);\n        if (data) {\n          let series = [];\n          if (Array.isArray(data)) {\n            series = data;\n          } else if (data.series) {\n            series = data.series;\n          }\n          if (series.length > 0) {\n            console.log(`âœ… Found ${series.length} series with ${action}`);\n            return series.map(s => {\n              var _s$seasons;\n              return {\n                id: s.series_id || s.id,\n                series_id: s.series_id || s.id,\n                name: s.name || 'Pa titull',\n                title: s.name || 'Pa titull',\n                logo: s.cover || s.poster || null,\n                poster: s.cover || s.poster || null,\n                cover: s.cover || s.poster || null,\n                category_id: s.category_id,\n                category: s.category_name || s.genre || 'Seriale',\n                category_name: s.category_name || s.genre || 'Seriale',\n                year: s.year || null,\n                rating: s.rating || null,\n                season_count: ((_s$seasons = s.seasons) === null || _s$seasons === void 0 ? void 0 : _s$seasons.length) || s.num_seasons || 0,\n                type: 'series'\n              };\n            });\n          }\n        }\n      } catch (e) {\n        continue;\n      }\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getSeries error:', error);\n    return [];\n  }\n};\n\n/**\r\n * SERIES CATEGORIES\r\n */\nexport const getSeriesCategories = async (server, user, pass) => {\n  try {\n    const url = buildUrl(server, user, pass, 'get_series_categories');\n    console.log('ðŸ·ï¸ Series Categories URL:', url);\n    const data = await fetchWithCORSProxy(url);\n    if (data) {\n      let categories = [];\n      if (Array.isArray(data)) {\n        categories = data;\n      } else if (data.categories) {\n        categories = data.categories;\n      }\n      return categories.map(cat => ({\n        id: cat.category_id || cat.id,\n        category_id: cat.category_id || cat.id,\n        name: cat.category_name || cat.name || 'Seriale',\n        title: cat.category_name || cat.name || 'Seriale',\n        type: 'series'\n      }));\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getSeriesCategories error:', error);\n    return [];\n  }\n};\n\n/**\r\n * EPG\r\n */\nexport const getEPG = async (server, user, pass, streamId) => {\n  try {\n    const url = buildUrl(server, user, pass, 'get_epg');\n    const fullUrl = `${url}&stream_id=${streamId}`;\n    console.log('ðŸ“… EPG URL:', fullUrl);\n    const data = await fetchWithCORSProxy(fullUrl);\n    if (data && data.epg_listings) {\n      return data.epg_listings.map(epg => ({\n        id: epg.id,\n        title: epg.title || 'Pa titull',\n        description: epg.description || '',\n        start: epg.start,\n        end: epg.end,\n        start_timestamp: epg.start_timestamp,\n        end_timestamp: epg.end_timestamp\n      }));\n    }\n    return [];\n  } catch (error) {\n    console.error('âŒ getEPG error:', error);\n    return [];\n  }\n};\n\n/**\r\n * BUILD STREAM URL\r\n */\nexport const buildStreamUrl = (server, user, pass, streamId, type = 'live', extension = 'm3u8') => {\n  let baseUrl = server.trim();\n  if (baseUrl.endsWith('/')) {\n    baseUrl = baseUrl.slice(0, -1);\n  }\n  if (!baseUrl.startsWith('http://') && !baseUrl.startsWith('https://')) {\n    baseUrl = 'http://' + baseUrl;\n  }\n  switch (type) {\n    case 'live':\n      return `${baseUrl}/live/${user}/${pass}/${streamId}.m3u8`;\n    case 'movie':\n      return `${baseUrl}/movie/${user}/${pass}/${streamId}.${extension}`;\n    case 'series':\n      return `${baseUrl}/series/${user}/${pass}/${streamId}.mp4`;\n    default:\n      return `${baseUrl}/live/${user}/${pass}/${streamId}.m3u8`;\n  }\n};\n\n/**\r\n * ALL CATEGORIES\r\n */\nexport const getAllCategories = async (server, user, pass) => {\n  const [liveCats, movieCats, seriesCats] = await Promise.all([getLiveCategories(server, user, pass).catch(() => []), getMovieCategories(server, user, pass).catch(() => []), getSeriesCategories(server, user, pass).catch(() => [])]);\n  return {\n    live: liveCats,\n    movies: movieCats,\n    series: seriesCats,\n    all: [...liveCats.map(c => ({\n      ...c,\n      type: 'live'\n    })), ...movieCats.map(c => ({\n      ...c,\n      type: 'movie'\n    })), ...seriesCats.map(c => ({\n      ...c,\n      type: 'series'\n    }))]\n  };\n};\n\n/**\r\n * ALL CONTENT\r\n */\nexport const getAllContent = async (server, user, pass) => {\n  const [live, movies, series] = await Promise.all([getLiveStreams(server, user, pass).catch(() => []), getMovies(server, user, pass).catch(() => []), getSeries(server, user, pass).catch(() => [])]);\n  return {\n    live,\n    movies,\n    series\n  };\n};\nexport default {\n  xtreamLogin,\n  getLiveStreams,\n  getLiveCategories,\n  getMovies,\n  getMovieCategories,\n  getSeries,\n  getSeriesCategories,\n  getEPG,\n  buildStreamUrl,\n  getAllCategories,\n  getAllContent\n};","map":{"version":3,"names":["buildUrl","server","user","pass","action","baseUrl","trim","endsWith","slice","startsWith","fetchWithCORSProxy","url","proxies","encodeURIComponent","proxyUrl","console","log","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","signal","headers","clearTimeout","ok","text","includes","wrapped","JSON","parse","contents","e","err","message","Error","xtreamLogin","data","user_info","success","error","getLiveStreams","actions","streams","Array","isArray","live","channels","length","map","channel","id","stream_id","name","title","logo","stream_icon","poster","cover","category_id","category","category_name","epg_channel_id","type","stream_url","getLiveCategories","categories","cat","getMovies","movies","vod","movie","backdrop","backdrop_path","genre","year","rating","container_extension","getMovieCategories","getSeries","series","s","_s$seasons","series_id","season_count","seasons","num_seasons","getSeriesCategories","getEPG","streamId","fullUrl","epg_listings","epg","description","start","end","start_timestamp","end_timestamp","buildStreamUrl","extension","getAllCategories","liveCats","movieCats","seriesCats","Promise","all","catch","c","getAllContent"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/xtream.jsx"],"sourcesContent":["// services/xtream.js - VERSIONI I PÃ‹RSHTATUR PÃ‹R KÃ‹TÃ‹ SERVER\r\n\r\n/**\r\n * Nderto URL-nÃ« e Xtream API\r\n */\r\nconst buildUrl = (server, user, pass, action = '') => {\r\n  let baseUrl = server.trim();\r\n  \r\n  if (baseUrl.endsWith('/')) {\r\n    baseUrl = baseUrl.slice(0, -1);\r\n  }\r\n  \r\n  if (!baseUrl.startsWith('http://') && !baseUrl.startsWith('https://')) {\r\n    baseUrl = 'http://' + baseUrl;\r\n  }\r\n  \r\n  if (action) {\r\n    return `${baseUrl}/player_api.php?username=${user}&password=${pass}&action=${action}`;\r\n  } else {\r\n    return `${baseUrl}/player_api.php?username=${user}&password=${pass}`;\r\n  }\r\n};\r\n\r\n/**\r\n * Fetch me CORSProxy.io\r\n */\r\nconst fetchWithCORSProxy = async (url) => {\r\n  const proxies = [\r\n    `https://corsproxy.io/?${encodeURIComponent(url)}`,\r\n    `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(url)}`,\r\n    `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`\r\n  ];\r\n\r\n  for (const proxyUrl of proxies) {\r\n    try {\r\n      console.log('ðŸ”„ Trying proxy:', proxyUrl);\r\n      \r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 15000);\r\n\r\n      const response = await fetch(proxyUrl, {\r\n        signal: controller.signal,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n        }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (response.ok) {\r\n        const text = await response.text();\r\n        \r\n        // AllOrigins format\r\n        if (proxyUrl.includes('allorigins')) {\r\n          try {\r\n            const wrapped = JSON.parse(text);\r\n            if (wrapped.contents) {\r\n              return JSON.parse(wrapped.contents);\r\n            }\r\n          } catch (e) {}\r\n        } else {\r\n          try {\r\n            return JSON.parse(text);\r\n          } catch (e) {\r\n            return text;\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log('âŒ Proxy failed:', err.message);\r\n      continue;\r\n    }\r\n  }\r\n  \r\n  throw new Error('TÃ« gjitha proxy-t dÃ«shtuan');\r\n};\r\n\r\n/**\r\n * LOGIN\r\n */\r\nexport const xtreamLogin = async (server, user, pass) => {\r\n  try {\r\n    const url = buildUrl(server, user, pass, '');\r\n    console.log('ðŸ”‘ Login URL:', url);\r\n    \r\n    const data = await fetchWithCORSProxy(url);\r\n    console.log('ðŸ”‘ Login response:', data);\r\n    \r\n    if (data && data.user_info) {\r\n      return {\r\n        success: true,\r\n        data: data.user_info,\r\n        server: server\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      error: 'Kredencialet e gabuara'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Login error:', error);\r\n    return {\r\n      success: false,\r\n      error: 'Nuk u lidh me serverin'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * LIVE STREAMS - VERSIONI I RI QÃ‹ PUNON PÃ‹R KÃ‹TÃ‹ SERVER\r\n */\r\nexport const getLiveStreams = async (server, user, pass) => {\r\n  try {\r\n    // Disa servera pÃ«rdorin 'get_live_streams' ose 'get_live_channels'\r\n    const actions = ['get_live_streams', 'get_live_channels', 'get_channels'];\r\n    \r\n    for (const action of actions) {\r\n      try {\r\n        const url = buildUrl(server, user, pass, action);\r\n        console.log(`ðŸ“º Trying ${action}:`, url);\r\n        \r\n        const data = await fetchWithCORSProxy(url);\r\n        \r\n        if (data) {\r\n          // Kontrollo formate tÃ« ndryshme tÃ« pÃ«rgjigjes\r\n          let streams = [];\r\n          \r\n          if (Array.isArray(data)) {\r\n            streams = data;\r\n          } else if (data.live) {\r\n            streams = data.live;\r\n          } else if (data.channels) {\r\n            streams = data.channels;\r\n          } else if (data.data) {\r\n            streams = data.data;\r\n          }\r\n          \r\n          if (streams.length > 0) {\r\n            console.log(`âœ… Found ${streams.length} live channels with ${action}`);\r\n            \r\n            return streams.map(channel => ({\r\n              id: channel.stream_id || channel.id,\r\n              stream_id: channel.stream_id || channel.id,\r\n              name: channel.name || 'Pa emÃ«r',\r\n              title: channel.name || 'Pa emÃ«r',\r\n              logo: channel.stream_icon || channel.logo || null,\r\n              poster: channel.stream_icon || channel.logo || null,\r\n              cover: channel.stream_icon || channel.logo || null,\r\n              category_id: channel.category_id,\r\n              category: channel.category_name || channel.category || 'TÃ« tjera',\r\n              category_name: channel.category_name || channel.category || 'TÃ« tjera',\r\n              epg_channel_id: channel.epg_channel_id,\r\n              type: 'live',\r\n              stream_url: null\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.log(`âš ï¸ ${action} failed:`, e.message);\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getLiveStreams error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * LIVE CATEGORIES\r\n */\r\nexport const getLiveCategories = async (server, user, pass) => {\r\n  try {\r\n    const actions = ['get_live_categories', 'get_categories'];\r\n    \r\n    for (const action of actions) {\r\n      try {\r\n        const url = buildUrl(server, user, pass, action);\r\n        console.log(`ðŸ·ï¸ Trying ${action}:`, url);\r\n        \r\n        const data = await fetchWithCORSProxy(url);\r\n        \r\n        if (data) {\r\n          let categories = [];\r\n          \r\n          if (Array.isArray(data)) {\r\n            categories = data;\r\n          } else if (data.categories) {\r\n            categories = data.categories;\r\n          }\r\n          \r\n          if (categories.length > 0) {\r\n            return categories.map(cat => ({\r\n              id: cat.category_id || cat.id,\r\n              category_id: cat.category_id || cat.id,\r\n              name: cat.category_name || cat.name || 'TÃ« tjera',\r\n              title: cat.category_name || cat.name || 'TÃ« tjera',\r\n              type: 'live'\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getLiveCategories error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * MOVIES - VERSIONI I RI\r\n */\r\nexport const getMovies = async (server, user, pass) => {\r\n  try {\r\n    const actions = ['get_vod_streams', 'get_movies', 'get_vod'];\r\n    \r\n    for (const action of actions) {\r\n      try {\r\n        const url = buildUrl(server, user, pass, action);\r\n        console.log(`ðŸŽ¬ Trying ${action}:`, url);\r\n        \r\n        const data = await fetchWithCORSProxy(url);\r\n        \r\n        if (data) {\r\n          let movies = [];\r\n          \r\n          if (Array.isArray(data)) {\r\n            movies = data;\r\n          } else if (data.vod) {\r\n            movies = data.vod;\r\n          } else if (data.movies) {\r\n            movies = data.movies;\r\n          } else if (data.data) {\r\n            movies = data.data;\r\n          }\r\n          \r\n          if (movies.length > 0) {\r\n            console.log(`âœ… Found ${movies.length} movies with ${action}`);\r\n            \r\n            return movies.map(movie => ({\r\n              id: movie.stream_id || movie.id,\r\n              stream_id: movie.stream_id || movie.id,\r\n              name: movie.name || 'Pa titull',\r\n              title: movie.name || 'Pa titull',\r\n              logo: movie.stream_icon || movie.poster || null,\r\n              poster: movie.stream_icon || movie.poster || null,\r\n              cover: movie.stream_icon || movie.poster || null,\r\n              backdrop: movie.backdrop_path || null,\r\n              category_id: movie.category_id,\r\n              category: movie.category_name || movie.genre || 'Filma',\r\n              category_name: movie.category_name || movie.genre || 'Filma',\r\n              year: movie.year || null,\r\n              rating: movie.rating || null,\r\n              container_extension: movie.container_extension || 'mp4',\r\n              type: 'movie'\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getMovies error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * MOVIES CATEGORIES\r\n */\r\nexport const getMovieCategories = async (server, user, pass) => {\r\n  try {\r\n    const actions = ['get_vod_categories', 'get_movie_categories'];\r\n    \r\n    for (const action of actions) {\r\n      try {\r\n        const url = buildUrl(server, user, pass, action);\r\n        console.log(`ðŸ·ï¸ Movie Categories ${action}:`, url);\r\n        \r\n        const data = await fetchWithCORSProxy(url);\r\n        \r\n        if (data) {\r\n          let categories = [];\r\n          \r\n          if (Array.isArray(data)) {\r\n            categories = data;\r\n          } else if (data.categories) {\r\n            categories = data.categories;\r\n          }\r\n          \r\n          if (categories.length > 0) {\r\n            return categories.map(cat => ({\r\n              id: cat.category_id || cat.id,\r\n              category_id: cat.category_id || cat.id,\r\n              name: cat.category_name || cat.name || 'Filma',\r\n              title: cat.category_name || cat.name || 'Filma',\r\n              type: 'movie'\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getMovieCategories error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * SERIES\r\n */\r\nexport const getSeries = async (server, user, pass) => {\r\n  try {\r\n    const actions = ['get_series', 'get_series_list'];\r\n    \r\n    for (const action of actions) {\r\n      try {\r\n        const url = buildUrl(server, user, pass, action);\r\n        console.log(`ðŸ“º Series ${action}:`, url);\r\n        \r\n        const data = await fetchWithCORSProxy(url);\r\n        \r\n        if (data) {\r\n          let series = [];\r\n          \r\n          if (Array.isArray(data)) {\r\n            series = data;\r\n          } else if (data.series) {\r\n            series = data.series;\r\n          }\r\n          \r\n          if (series.length > 0) {\r\n            console.log(`âœ… Found ${series.length} series with ${action}`);\r\n            \r\n            return series.map(s => ({\r\n              id: s.series_id || s.id,\r\n              series_id: s.series_id || s.id,\r\n              name: s.name || 'Pa titull',\r\n              title: s.name || 'Pa titull',\r\n              logo: s.cover || s.poster || null,\r\n              poster: s.cover || s.poster || null,\r\n              cover: s.cover || s.poster || null,\r\n              category_id: s.category_id,\r\n              category: s.category_name || s.genre || 'Seriale',\r\n              category_name: s.category_name || s.genre || 'Seriale',\r\n              year: s.year || null,\r\n              rating: s.rating || null,\r\n              season_count: s.seasons?.length || s.num_seasons || 0,\r\n              type: 'series'\r\n            }));\r\n          }\r\n        }\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getSeries error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * SERIES CATEGORIES\r\n */\r\nexport const getSeriesCategories = async (server, user, pass) => {\r\n  try {\r\n    const url = buildUrl(server, user, pass, 'get_series_categories');\r\n    console.log('ðŸ·ï¸ Series Categories URL:', url);\r\n    \r\n    const data = await fetchWithCORSProxy(url);\r\n    \r\n    if (data) {\r\n      let categories = [];\r\n      \r\n      if (Array.isArray(data)) {\r\n        categories = data;\r\n      } else if (data.categories) {\r\n        categories = data.categories;\r\n      }\r\n      \r\n      return categories.map(cat => ({\r\n        id: cat.category_id || cat.id,\r\n        category_id: cat.category_id || cat.id,\r\n        name: cat.category_name || cat.name || 'Seriale',\r\n        title: cat.category_name || cat.name || 'Seriale',\r\n        type: 'series'\r\n      }));\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getSeriesCategories error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * EPG\r\n */\r\nexport const getEPG = async (server, user, pass, streamId) => {\r\n  try {\r\n    const url = buildUrl(server, user, pass, 'get_epg');\r\n    const fullUrl = `${url}&stream_id=${streamId}`;\r\n    console.log('ðŸ“… EPG URL:', fullUrl);\r\n    \r\n    const data = await fetchWithCORSProxy(fullUrl);\r\n    \r\n    if (data && data.epg_listings) {\r\n      return data.epg_listings.map(epg => ({\r\n        id: epg.id,\r\n        title: epg.title || 'Pa titull',\r\n        description: epg.description || '',\r\n        start: epg.start,\r\n        end: epg.end,\r\n        start_timestamp: epg.start_timestamp,\r\n        end_timestamp: epg.end_timestamp\r\n      }));\r\n    }\r\n    \r\n    return [];\r\n  } catch (error) {\r\n    console.error('âŒ getEPG error:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * BUILD STREAM URL\r\n */\r\nexport const buildStreamUrl = (server, user, pass, streamId, type = 'live', extension = 'm3u8') => {\r\n  let baseUrl = server.trim();\r\n  \r\n  if (baseUrl.endsWith('/')) {\r\n    baseUrl = baseUrl.slice(0, -1);\r\n  }\r\n  \r\n  if (!baseUrl.startsWith('http://') && !baseUrl.startsWith('https://')) {\r\n    baseUrl = 'http://' + baseUrl;\r\n  }\r\n\r\n  switch (type) {\r\n    case 'live':\r\n      return `${baseUrl}/live/${user}/${pass}/${streamId}.m3u8`;\r\n    case 'movie':\r\n      return `${baseUrl}/movie/${user}/${pass}/${streamId}.${extension}`;\r\n    case 'series':\r\n      return `${baseUrl}/series/${user}/${pass}/${streamId}.mp4`;\r\n    default:\r\n      return `${baseUrl}/live/${user}/${pass}/${streamId}.m3u8`;\r\n  }\r\n};\r\n\r\n/**\r\n * ALL CATEGORIES\r\n */\r\nexport const getAllCategories = async (server, user, pass) => {\r\n  const [liveCats, movieCats, seriesCats] = await Promise.all([\r\n    getLiveCategories(server, user, pass).catch(() => []),\r\n    getMovieCategories(server, user, pass).catch(() => []),\r\n    getSeriesCategories(server, user, pass).catch(() => [])\r\n  ]);\r\n\r\n  return {\r\n    live: liveCats,\r\n    movies: movieCats,\r\n    series: seriesCats,\r\n    all: [\r\n      ...liveCats.map(c => ({ ...c, type: 'live' })),\r\n      ...movieCats.map(c => ({ ...c, type: 'movie' })),\r\n      ...seriesCats.map(c => ({ ...c, type: 'series' }))\r\n    ]\r\n  };\r\n};\r\n\r\n/**\r\n * ALL CONTENT\r\n */\r\nexport const getAllContent = async (server, user, pass) => {\r\n  const [live, movies, series] = await Promise.all([\r\n    getLiveStreams(server, user, pass).catch(() => []),\r\n    getMovies(server, user, pass).catch(() => []),\r\n    getSeries(server, user, pass).catch(() => [])\r\n  ]);\r\n\r\n  return {\r\n    live,\r\n    movies,\r\n    series\r\n  };\r\n};\r\n\r\nexport default {\r\n  xtreamLogin,\r\n  getLiveStreams,\r\n  getLiveCategories,\r\n  getMovies,\r\n  getMovieCategories,\r\n  getSeries,\r\n  getSeriesCategories,\r\n  getEPG,\r\n  buildStreamUrl,\r\n  getAllCategories,\r\n  getAllContent\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}