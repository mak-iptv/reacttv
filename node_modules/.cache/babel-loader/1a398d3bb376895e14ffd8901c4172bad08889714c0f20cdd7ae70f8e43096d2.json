{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useChannelCache.js\nimport { useCallback, useRef } from 'react';\nexport const useChannelCache = () => {\n  _s();\n  const cache = useRef(new Map());\n  const getCachedChannels = useCallback((type, category) => {\n    const key = `${type}_${category}`;\n    const cached = cache.current.get(key);\n    if (cached && Date.now() - cached.timestamp < 5 * 60 * 1000) {\n      // 5 minuta\n      return cached.data;\n    }\n    return null;\n  }, []);\n  const setCachedChannels = useCallback((type, category, channels) => {\n    const key = `${type}_${category}`;\n    cache.current.set(key, {\n      data: channels,\n      timestamp: Date.now()\n    });\n  }, []);\n  const prefetchCategory = useCallback(async (credentials, type, categoryId) => {\n    const key = `${type}_${categoryId}`;\n    if (cache.current.has(key)) return;\n\n    // Ngarko në background\n    setTimeout(async () => {\n      try {\n        const {\n          getChannelsByCategory\n        } = await import('../services/xtream');\n        const channels = await getChannelsByCategory(credentials.server, credentials.username, credentials.password, type, categoryId);\n        cache.current.set(key, {\n          data: channels,\n          timestamp: Date.now()\n        });\n        console.log(`✅ Prefetched ${type} category ${categoryId}`);\n      } catch (err) {\n        console.error(`❌ Failed to prefetch ${type} category ${categoryId}:`, err);\n      }\n    }, 100);\n  }, []);\n  const clearCache = useCallback(() => {\n    cache.current.clear();\n  }, []);\n  return {\n    getCachedChannels,\n    setCachedChannels,\n    prefetchCategory,\n    clearCache\n  };\n};\n_s(useChannelCache, \"wmSbUfkEpekJMXo3vcgNkVUFZow=\");","map":{"version":3,"names":["useCallback","useRef","useChannelCache","_s","cache","Map","getCachedChannels","type","category","key","cached","current","get","Date","now","timestamp","data","setCachedChannels","channels","set","prefetchCategory","credentials","categoryId","has","setTimeout","getChannelsByCategory","server","username","password","console","log","err","error","clearCache","clear"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/hooks/useChannelCache.js"],"sourcesContent":["// src/hooks/useChannelCache.js\r\nimport { useCallback, useRef } from 'react';\r\n\r\nexport const useChannelCache = () => {\r\n  const cache = useRef(new Map());\r\n\r\n  const getCachedChannels = useCallback((type, category) => {\r\n    const key = `${type}_${category}`;\r\n    const cached = cache.current.get(key);\r\n    \r\n    if (cached && Date.now() - cached.timestamp < 5 * 60 * 1000) { // 5 minuta\r\n      return cached.data;\r\n    }\r\n    return null;\r\n  }, []);\r\n\r\n  const setCachedChannels = useCallback((type, category, channels) => {\r\n    const key = `${type}_${category}`;\r\n    cache.current.set(key, {\r\n      data: channels,\r\n      timestamp: Date.now()\r\n    });\r\n  }, []);\r\n\r\n  const prefetchCategory = useCallback(async (credentials, type, categoryId) => {\r\n    const key = `${type}_${categoryId}`;\r\n    \r\n    if (cache.current.has(key)) return;\r\n    \r\n    // Ngarko në background\r\n    setTimeout(async () => {\r\n      try {\r\n        const { getChannelsByCategory } = await import('../services/xtream');\r\n        const channels = await getChannelsByCategory(\r\n          credentials.server,\r\n          credentials.username,\r\n          credentials.password,\r\n          type,\r\n          categoryId\r\n        );\r\n        \r\n        cache.current.set(key, {\r\n          data: channels,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        console.log(`✅ Prefetched ${type} category ${categoryId}`);\r\n      } catch (err) {\r\n        console.error(`❌ Failed to prefetch ${type} category ${categoryId}:`, err);\r\n      }\r\n    }, 100);\r\n  }, []);\r\n\r\n  const clearCache = useCallback(() => {\r\n    cache.current.clear();\r\n  }, []);\r\n\r\n  return {\r\n    getCachedChannels,\r\n    setCachedChannels,\r\n    prefetchCategory,\r\n    clearCache\r\n  };\r\n};"],"mappings":";AAAA;AACA,SAASA,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAE3C,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAMC,KAAK,GAAGH,MAAM,CAAC,IAAII,GAAG,CAAC,CAAC,CAAC;EAE/B,MAAMC,iBAAiB,GAAGN,WAAW,CAAC,CAACO,IAAI,EAAEC,QAAQ,KAAK;IACxD,MAAMC,GAAG,GAAG,GAAGF,IAAI,IAAIC,QAAQ,EAAE;IACjC,MAAME,MAAM,GAAGN,KAAK,CAACO,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;IAErC,IAAIC,MAAM,IAAIG,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGJ,MAAM,CAACK,SAAS,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,EAAE;MAAE;MAC7D,OAAOL,MAAM,CAACM,IAAI;IACpB;IACA,OAAO,IAAI;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,iBAAiB,GAAGjB,WAAW,CAAC,CAACO,IAAI,EAAEC,QAAQ,EAAEU,QAAQ,KAAK;IAClE,MAAMT,GAAG,GAAG,GAAGF,IAAI,IAAIC,QAAQ,EAAE;IACjCJ,KAAK,CAACO,OAAO,CAACQ,GAAG,CAACV,GAAG,EAAE;MACrBO,IAAI,EAAEE,QAAQ;MACdH,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,gBAAgB,GAAGpB,WAAW,CAAC,OAAOqB,WAAW,EAAEd,IAAI,EAAEe,UAAU,KAAK;IAC5E,MAAMb,GAAG,GAAG,GAAGF,IAAI,IAAIe,UAAU,EAAE;IAEnC,IAAIlB,KAAK,CAACO,OAAO,CAACY,GAAG,CAACd,GAAG,CAAC,EAAE;;IAE5B;IACAe,UAAU,CAAC,YAAY;MACrB,IAAI;QACF,MAAM;UAAEC;QAAsB,CAAC,GAAG,MAAM,MAAM,CAAC,oBAAoB,CAAC;QACpE,MAAMP,QAAQ,GAAG,MAAMO,qBAAqB,CAC1CJ,WAAW,CAACK,MAAM,EAClBL,WAAW,CAACM,QAAQ,EACpBN,WAAW,CAACO,QAAQ,EACpBrB,IAAI,EACJe,UACF,CAAC;QAEDlB,KAAK,CAACO,OAAO,CAACQ,GAAG,CAACV,GAAG,EAAE;UACrBO,IAAI,EAAEE,QAAQ;UACdH,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC;QACtB,CAAC,CAAC;QAEFe,OAAO,CAACC,GAAG,CAAC,gBAAgBvB,IAAI,aAAae,UAAU,EAAE,CAAC;MAC5D,CAAC,CAAC,OAAOS,GAAG,EAAE;QACZF,OAAO,CAACG,KAAK,CAAC,wBAAwBzB,IAAI,aAAae,UAAU,GAAG,EAAES,GAAG,CAAC;MAC5E;IACF,CAAC,EAAE,GAAG,CAAC;EACT,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,UAAU,GAAGjC,WAAW,CAAC,MAAM;IACnCI,KAAK,CAACO,OAAO,CAACuB,KAAK,CAAC,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACL5B,iBAAiB;IACjBW,iBAAiB;IACjBG,gBAAgB;IAChBa;EACF,CAAC;AACH,CAAC;AAAC9B,EAAA,CA5DWD,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}