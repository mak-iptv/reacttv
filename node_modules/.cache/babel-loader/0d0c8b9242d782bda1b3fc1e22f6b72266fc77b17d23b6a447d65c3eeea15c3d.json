{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rayuv\\\\OneDrive\\\\Documents\\\\GitHub\\\\Reacttv\\\\src\\\\components\\\\HlsPlayer.jsx\",\n  _s = $RefreshSig$();\n// src/components/HlsPlayer.jsx\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Hls from 'hls.js';\nimport './HlsPlayer.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HlsPlayer = ({\n  src,\n  isPlaying,\n  onPlayPause,\n  onClose,\n  onError,\n  theme,\n  currentStreamInfo,\n  currentEpg,\n  epgData,\n  onEpgUpdate\n}) => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  const [error, setError] = useState(null);\n  const [retryCount, setRetryCount] = useState(0);\n  const MAX_RETRIES = 3;\n\n  // Initialize player\n  useEffect(() => {\n    if (!src || !videoRef.current) return;\n    let hls = null;\n    setIsReady(false);\n    setError(null);\n\n    // Kontrollo n√´se √´sht√´ stream i Xtream\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\n\n    // P√´r Xtream streams, shpesh jan√´ MP4 ose TS direkt\n    if (isXtreamStream && (src.endsWith('.mp4') || src.endsWith('.ts') || !src.includes('.m3u8'))) {\n      console.log('üé¨ Xtream direct stream:', src);\n      videoRef.current.src = src;\n      videoRef.current.load();\n      if (isPlaying) {\n        videoRef.current.play().catch(e => {\n          console.warn('Play failed:', e);\n          // Provo p√´rs√´ri me autoplay\n          setTimeout(() => {\n            var _videoRef$current;\n            (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.play().catch(err => {\n              onError === null || onError === void 0 ? void 0 : onError({\n                type: 'playError',\n                details: err.message\n              });\n            });\n          }, 100);\n        });\n      }\n      setIsReady(true);\n      return () => {\n        if (videoRef.current) {\n          videoRef.current.pause();\n          videoRef.current.removeAttribute('src');\n          videoRef.current.load();\n        }\n      };\n    }\n\n    // P√´r HLS streams\n    if (Hls.isSupported()) {\n      hls = new Hls({\n        enableWorker: true,\n        lowLatencyMode: true,\n        backBufferLength: 90,\n        maxBufferLength: 30,\n        maxMaxBufferLength: 60,\n        manifestLoadingTimeOut: 10000,\n        manifestLoadingMaxRetry: 3,\n        manifestLoadingRetryDelay: 500,\n        levelLoadingTimeOut: 10000,\n        levelLoadingMaxRetry: 3,\n        levelLoadingRetryDelay: 500\n      });\n      hlsRef.current = hls;\n      hls.on(Hls.Events.MEDIA_ATTACHED, () => {\n        console.log('‚úÖ HLS media attached');\n        hls.loadSource(src);\n      });\n      hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\n        console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => {\n            console.warn('Play failed:', e);\n            // Autoplay u bllokua, trego buton play\n            setIsReady(false);\n          });\n        }\n      });\n      hls.on(Hls.Events.ERROR, (event, data) => {\n        console.error('‚ùå HLS error:', data);\n        if (data.fatal) {\n          switch (data.type) {\n            case Hls.ErrorTypes.NETWORK_ERROR:\n              console.log('Network error, trying to recover...');\n              hls.startLoad();\n              break;\n            case Hls.ErrorTypes.MEDIA_ERROR:\n              console.log('Media error, trying to recover...');\n              hls.recoverMediaError();\n              break;\n            default:\n              // N√´se nuk mund t√´ rikuperohet, p√´rdor video direkt\n              console.log('Fatal error, falling back to direct video...');\n              hls.destroy();\n              videoRef.current.src = src;\n              videoRef.current.load();\n              if (isPlaying) {\n                videoRef.current.play().catch(e => {\n                  onError === null || onError === void 0 ? void 0 : onError({\n                    type: 'playbackError',\n                    details: e.message\n                  });\n                });\n              }\n              break;\n          }\n        }\n        onError === null || onError === void 0 ? void 0 : onError(data);\n      });\n      hls.attachMedia(videoRef.current);\n    } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\n      // Safari native HLS\n      videoRef.current.src = src;\n      videoRef.current.addEventListener('loadedmetadata', () => {\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\n        }\n      });\n    } else {\n      // Fallback to direct video\n      videoRef.current.src = src;\n      videoRef.current.load();\n      videoRef.current.addEventListener('loadedmetadata', () => {\n        setIsReady(true);\n        if (isPlaying) {\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\n        }\n      });\n    }\n    return () => {\n      if (hls) {\n        hls.destroy();\n        hlsRef.current = null;\n      }\n      if (videoRef.current) {\n        videoRef.current.pause();\n        videoRef.current.removeAttribute('src');\n        videoRef.current.load();\n      }\n    };\n  }, [src, isPlaying, onError]);\n\n  // Handle play/pause\n  useEffect(() => {\n    if (!videoRef.current || !isReady) return;\n    if (isPlaying) {\n      const playPromise = videoRef.current.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(error => {\n          console.warn('Play prevented:', error);\n          // Autoplay u bllokua\n          onPlayPause === null || onPlayPause === void 0 ? void 0 : onPlayPause(); // Ktheje state n√´ pause\n        });\n      }\n    } else {\n      videoRef.current.pause();\n    }\n  }, [isPlaying, isReady, onPlayPause]);\n  const handleRetry = useCallback(() => {\n    if (retryCount >= MAX_RETRIES) {\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\n      return;\n    }\n    setRetryCount(prev => prev + 1);\n    setError(null);\n\n    // Reload video\n    if (videoRef.current) {\n      videoRef.current.load();\n      if (isPlaying) {\n        setTimeout(() => {\n          var _videoRef$current2;\n          (_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.play().catch(e => console.warn('Retry failed:', e));\n        }, 500);\n      }\n    }\n  }, [retryCount, isPlaying]);\n  if (!src) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `hls-player theme-${theme}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        playsInline: true,\n        controls: true,\n        preload: \"auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), !isReady && !error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Duke ngarkuar stream-in...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-error\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRetry,\n          className: \"retry-btn\",\n          children: \"Provo p\\xEBrs\\xEBri\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), !isPlaying && isReady && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"play-btn-overlay\",\n        onClick: onPlayPause,\n        children: \"\\u25B6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), currentStreamInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"channel-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: currentStreamInfo.logo || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentStreamInfo.name)}&size=32`,\n          alt: currentStreamInfo.name,\n          className: \"channel-logo\",\n          onError: e => e.target.style.display = 'none'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"channel-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-name\",\n            children: currentStreamInfo.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"channel-category\",\n            children: currentStreamInfo.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this), currentEpg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"epg-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-title\",\n          children: currentEpg.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"epg-time\",\n          children: new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n};\n_s(HlsPlayer, \"u0tpsQuGKlg5zFAsxzT3dJFuArA=\");\n_c = HlsPlayer;\nexport default HlsPlayer;\nvar _c;\n$RefreshReg$(_c, \"HlsPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Hls","jsxDEV","_jsxDEV","HlsPlayer","src","isPlaying","onPlayPause","onClose","onError","theme","currentStreamInfo","currentEpg","epgData","onEpgUpdate","_s","videoRef","hlsRef","isReady","setIsReady","error","setError","retryCount","setRetryCount","MAX_RETRIES","current","hls","isXtreamStream","includes","endsWith","console","log","load","play","catch","e","warn","setTimeout","_videoRef$current","err","type","details","message","pause","removeAttribute","isSupported","enableWorker","lowLatencyMode","backBufferLength","maxBufferLength","maxMaxBufferLength","manifestLoadingTimeOut","manifestLoadingMaxRetry","manifestLoadingRetryDelay","levelLoadingTimeOut","levelLoadingMaxRetry","levelLoadingRetryDelay","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","event","data","levels","length","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","destroy","attachMedia","canPlayType","addEventListener","playPromise","undefined","handleRetry","prev","_videoRef$current2","className","children","ref","playsInline","controls","preload","fileName","_jsxFileName","lineNumber","columnNumber","onClick","logo","encodeURIComponent","name","alt","target","style","display","category","title","Date","start_timestamp","toLocaleTimeString","hour","minute","_c","$RefreshReg$"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport Hls from 'hls.js';\r\nimport './HlsPlayer.css';\r\n\r\nconst HlsPlayer = ({ \r\n  src, \r\n  isPlaying, \r\n  onPlayPause, \r\n  onClose, \r\n  onError,\r\n  theme,\r\n  currentStreamInfo,\r\n  currentEpg,\r\n  epgData,\r\n  onEpgUpdate\r\n}) => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n  const MAX_RETRIES = 3;\r\n\r\n  // Initialize player\r\n  useEffect(() => {\r\n    if (!src || !videoRef.current) return;\r\n\r\n    let hls = null;\r\n    setIsReady(false);\r\n    setError(null);\r\n\r\n    // Kontrollo n√´se √´sht√´ stream i Xtream\r\n    const isXtreamStream = src.includes('/live/') || src.includes('/movie/') || src.includes('/series/');\r\n    \r\n    // P√´r Xtream streams, shpesh jan√´ MP4 ose TS direkt\r\n    if (isXtreamStream && (src.endsWith('.mp4') || src.endsWith('.ts') || !src.includes('.m3u8'))) {\r\n      console.log('üé¨ Xtream direct stream:', src);\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      if (isPlaying) {\r\n        videoRef.current.play().catch(e => {\r\n          console.warn('Play failed:', e);\r\n          // Provo p√´rs√´ri me autoplay\r\n          setTimeout(() => {\r\n            videoRef.current?.play().catch(err => {\r\n              onError?.({ type: 'playError', details: err.message });\r\n            });\r\n          }, 100);\r\n        });\r\n      }\r\n      \r\n      setIsReady(true);\r\n      \r\n      return () => {\r\n        if (videoRef.current) {\r\n          videoRef.current.pause();\r\n          videoRef.current.removeAttribute('src');\r\n          videoRef.current.load();\r\n        }\r\n      };\r\n    }\r\n\r\n    // P√´r HLS streams\r\n    if (Hls.isSupported()) {\r\n      hls = new Hls({\r\n        enableWorker: true,\r\n        lowLatencyMode: true,\r\n        backBufferLength: 90,\r\n        maxBufferLength: 30,\r\n        maxMaxBufferLength: 60,\r\n        manifestLoadingTimeOut: 10000,\r\n        manifestLoadingMaxRetry: 3,\r\n        manifestLoadingRetryDelay: 500,\r\n        levelLoadingTimeOut: 10000,\r\n        levelLoadingMaxRetry: 3,\r\n        levelLoadingRetryDelay: 500,\r\n      });\r\n\r\n      hlsRef.current = hls;\r\n\r\n      hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n        console.log('‚úÖ HLS media attached');\r\n        hls.loadSource(src);\r\n      });\r\n\r\n      hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {\r\n        console.log('‚úÖ HLS manifest parsed, levels:', data.levels.length);\r\n        setIsReady(true);\r\n        \r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => {\r\n            console.warn('Play failed:', e);\r\n            // Autoplay u bllokua, trego buton play\r\n            setIsReady(false);\r\n          });\r\n        }\r\n      });\r\n\r\n      hls.on(Hls.Events.ERROR, (event, data) => {\r\n        console.error('‚ùå HLS error:', data);\r\n        \r\n        if (data.fatal) {\r\n          switch (data.type) {\r\n            case Hls.ErrorTypes.NETWORK_ERROR:\r\n              console.log('Network error, trying to recover...');\r\n              hls.startLoad();\r\n              break;\r\n            case Hls.ErrorTypes.MEDIA_ERROR:\r\n              console.log('Media error, trying to recover...');\r\n              hls.recoverMediaError();\r\n              break;\r\n            default:\r\n              // N√´se nuk mund t√´ rikuperohet, p√´rdor video direkt\r\n              console.log('Fatal error, falling back to direct video...');\r\n              hls.destroy();\r\n              videoRef.current.src = src;\r\n              videoRef.current.load();\r\n              \r\n              if (isPlaying) {\r\n                videoRef.current.play().catch(e => {\r\n                  onError?.({ type: 'playbackError', details: e.message });\r\n                });\r\n              }\r\n              break;\r\n          }\r\n        }\r\n        \r\n        onError?.(data);\r\n      });\r\n\r\n      hls.attachMedia(videoRef.current);\r\n    } else if (videoRef.current.canPlayType('application/vnd.apple.mpegurl')) {\r\n      // Safari native HLS\r\n      videoRef.current.src = src;\r\n      videoRef.current.addEventListener('loadedmetadata', () => {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\r\n        }\r\n      });\r\n    } else {\r\n      // Fallback to direct video\r\n      videoRef.current.src = src;\r\n      videoRef.current.load();\r\n      \r\n      videoRef.current.addEventListener('loadedmetadata', () => {\r\n        setIsReady(true);\r\n        if (isPlaying) {\r\n          videoRef.current.play().catch(e => console.warn('Play failed:', e));\r\n        }\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n        hlsRef.current = null;\r\n      }\r\n      if (videoRef.current) {\r\n        videoRef.current.pause();\r\n        videoRef.current.removeAttribute('src');\r\n        videoRef.current.load();\r\n      }\r\n    };\r\n  }, [src, isPlaying, onError]);\r\n\r\n  // Handle play/pause\r\n  useEffect(() => {\r\n    if (!videoRef.current || !isReady) return;\r\n\r\n    if (isPlaying) {\r\n      const playPromise = videoRef.current.play();\r\n      \r\n      if (playPromise !== undefined) {\r\n        playPromise.catch(error => {\r\n          console.warn('Play prevented:', error);\r\n          // Autoplay u bllokua\r\n          onPlayPause?.(); // Ktheje state n√´ pause\r\n        });\r\n      }\r\n    } else {\r\n      videoRef.current.pause();\r\n    }\r\n  }, [isPlaying, isReady, onPlayPause]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    if (retryCount >= MAX_RETRIES) {\r\n      setError('Nuk mund t√´ luhet stream-i. Provo nj√´ tjet√´r.');\r\n      return;\r\n    }\r\n\r\n    setRetryCount(prev => prev + 1);\r\n    setError(null);\r\n    \r\n    // Reload video\r\n    if (videoRef.current) {\r\n      videoRef.current.load();\r\n      if (isPlaying) {\r\n        setTimeout(() => {\r\n          videoRef.current?.play().catch(e => console.warn('Retry failed:', e));\r\n        }, 500);\r\n      }\r\n    }\r\n  }, [retryCount, isPlaying]);\r\n\r\n  if (!src) return null;\r\n\r\n  return (\r\n    <div className={`hls-player theme-${theme}`}>\r\n      <div className=\"video-container\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-element\"\r\n          playsInline\r\n          controls\r\n          preload=\"auto\"\r\n        />\r\n        \r\n        {!isReady && !error && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n            <p>Duke ngarkuar stream-in...</p>\r\n          </div>\r\n        )}\r\n        \r\n        {error && (\r\n          <div className=\"player-error\">\r\n            <span className=\"error-icon\">‚ö†Ô∏è</span>\r\n            <p>{error}</p>\r\n            <button onClick={handleRetry} className=\"retry-btn\">\r\n              Provo p√´rs√´ri\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {!isPlaying && isReady && (\r\n          <button className=\"play-btn-overlay\" onClick={onPlayPause}>\r\n            ‚ñ∂\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Channel Info */}\r\n      {currentStreamInfo && (\r\n        <div className=\"player-info\">\r\n          <div className=\"channel-info\">\r\n            <img \r\n              src={currentStreamInfo.logo || `https://ui-avatars.com/api/?name=${encodeURIComponent(currentStreamInfo.name)}&size=32`}\r\n              alt={currentStreamInfo.name}\r\n              className=\"channel-logo\"\r\n              onError={(e) => e.target.style.display = 'none'}\r\n            />\r\n            <div className=\"channel-details\">\r\n              <span className=\"channel-name\">{currentStreamInfo.name}</span>\r\n              <span className=\"channel-category\">{currentStreamInfo.category}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          {currentEpg && (\r\n            <div className=\"epg-info\">\r\n              <span className=\"epg-title\">{currentEpg.title}</span>\r\n              <span className=\"epg-time\">\r\n                {new Date(currentEpg.start_timestamp * 1000).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HlsPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}