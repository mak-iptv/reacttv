{"ast":null,"code":"// iptvService.js\nconst fetchFromProxy = async (server, user, pass, action) => {\n  const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${encodeURIComponent(user)}&pass=${encodeURIComponent(pass)}&action=${action}`;\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`Proxy HTTP ${res.status}: ${res.statusText}`);\n  return await res.json();\n};\n\n// Funksionet API\nexport const getLive = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_live_streams\");\nexport const getMovies = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_vod_streams\");\nexport const getSeries = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_series\");\nexport const getCategories = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_live_categories\");\n\n// Ndërto stream URL\nexport const buildStream = (server, user, pass, type, id) => {\n  const cleanServer = server.replace(/\\/$/, '');\n  switch (type) {\n    case \"live\":\n      return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\n    case \"movie\":\n      return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\n    case \"series\":\n      return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\n    default:\n      return `${cleanServer}/${type}/${user}/${pass}/${id}`;\n  }\n};\n\n// Fetch M3U\nexport const fetchM3U = async url => {\n  try {\n    const res = await fetch(url);\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n    return await res.text();\n  } catch (err) {\n    console.error(\"Failed to fetch M3U:\", err);\n    return null;\n  }\n};","map":{"version":3,"names":["fetchFromProxy","server","user","pass","action","url","encodeURIComponent","res","fetch","ok","Error","status","statusText","json","getLive","getMovies","getSeries","getCategories","buildStream","type","id","cleanServer","replace","fetchM3U","text","err","console","error"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// iptvService.js\r\nconst fetchFromProxy = async (server, user, pass, action) => {\r\n  const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${encodeURIComponent(user)}&pass=${encodeURIComponent(pass)}&action=${action}`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) throw new Error(`Proxy HTTP ${res.status}: ${res.statusText}`);\r\n  return await res.json();\r\n};\r\n\r\n// Funksionet API\r\nexport const getLive = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_live_streams\");\r\nexport const getMovies = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_vod_streams\");\r\nexport const getSeries = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_series\");\r\nexport const getCategories = (server, user, pass) => fetchFromProxy(server, user, pass, \"get_live_categories\");\r\n\r\n// Ndërto stream URL\r\nexport const buildStream = (server, user, pass, type, id) => {\r\n  const cleanServer = server.replace(/\\/$/, '');\r\n  switch(type){\r\n    case \"live\": return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\r\n    case \"movie\": return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\r\n    case \"series\": return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\r\n    default: return `${cleanServer}/${type}/${user}/${pass}/${id}`;\r\n  }\r\n};\r\n\r\n// Fetch M3U\r\nexport const fetchM3U = async (url) => {\r\n  try {\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    return await res.text();\r\n  } catch (err) {\r\n    console.error(\"Failed to fetch M3U:\", err);\r\n    return null;\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,MAAMA,cAAc,GAAG,MAAAA,CAAOC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAEC,MAAM,KAAK;EAC3D,MAAMC,GAAG,GAAG,oBAAoBC,kBAAkB,CAACL,MAAM,CAAC,SAASK,kBAAkB,CAACJ,IAAI,CAAC,SAASI,kBAAkB,CAACH,IAAI,CAAC,WAAWC,MAAM,EAAE;EAC/I,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,CAAC;EAC5B,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,cAAcH,GAAG,CAACI,MAAM,KAAKJ,GAAG,CAACK,UAAU,EAAE,CAAC;EAC3E,OAAO,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;AACzB,CAAC;;AAED;AACA,OAAO,MAAMC,OAAO,GAAGA,CAACb,MAAM,EAAEC,IAAI,EAAEC,IAAI,KAAKH,cAAc,CAACC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAE,kBAAkB,CAAC;AACrG,OAAO,MAAMY,SAAS,GAAGA,CAACd,MAAM,EAAEC,IAAI,EAAEC,IAAI,KAAKH,cAAc,CAACC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAE,iBAAiB,CAAC;AACtG,OAAO,MAAMa,SAAS,GAAGA,CAACf,MAAM,EAAEC,IAAI,EAAEC,IAAI,KAAKH,cAAc,CAACC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAE,YAAY,CAAC;AACjG,OAAO,MAAMc,aAAa,GAAGA,CAAChB,MAAM,EAAEC,IAAI,EAAEC,IAAI,KAAKH,cAAc,CAACC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAE,qBAAqB,CAAC;;AAE9G;AACA,OAAO,MAAMe,WAAW,GAAGA,CAACjB,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAEgB,IAAI,EAAEC,EAAE,KAAK;EAC3D,MAAMC,WAAW,GAAGpB,MAAM,CAACqB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EAC7C,QAAOH,IAAI;IACT,KAAK,MAAM;MAAE,OAAO,GAAGE,WAAW,SAASnB,IAAI,IAAIC,IAAI,IAAIiB,EAAE,OAAO;IACpE,KAAK,OAAO;MAAE,OAAO,GAAGC,WAAW,UAAUnB,IAAI,IAAIC,IAAI,IAAIiB,EAAE,OAAO;IACtE,KAAK,QAAQ;MAAE,OAAO,GAAGC,WAAW,WAAWnB,IAAI,IAAIC,IAAI,IAAIiB,EAAE,OAAO;IACxE;MAAS,OAAO,GAAGC,WAAW,IAAIF,IAAI,IAAIjB,IAAI,IAAIC,IAAI,IAAIiB,EAAE,EAAE;EAChE;AACF,CAAC;;AAED;AACA,OAAO,MAAMG,QAAQ,GAAG,MAAOlB,GAAG,IAAK;EACrC,IAAI;IACF,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACH,GAAG,CAAC;IAC5B,IAAI,CAACE,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,QAAQH,GAAG,CAACI,MAAM,EAAE,CAAC;IAClD,OAAO,MAAMJ,GAAG,CAACiB,IAAI,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;IAC1C,OAAO,IAAI;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}