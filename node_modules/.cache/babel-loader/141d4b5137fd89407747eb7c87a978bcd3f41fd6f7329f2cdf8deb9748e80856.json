{"ast":null,"code":"// src/services/xtream.js\n\n// ================ PROXY KONFIGURIMI ================\nconst PROXIES = ['https://api.allorigins.win/raw?url=', 'https://corsproxy.io/?', 'https://cors-anywhere.herokuapp.com/', 'https://proxy.cors.sh/', 'https://thingproxy.freeboard.io/fetch/', 'https://api.codetabs.com/v1/proxy?quest=', 'https://cors.eu.org/', 'https://crossorigin.me/', 'https://cors-proxy.htmldriven.com/?url='];\n\n// ================ FUNKSIONET BAZÃ‹ PÃ‹R M3U ================\n\n/**\r\n * Merr M3U nga URL me mbÃ«shtetje CORS - VERSIONI I RREGULLUAR\r\n */\nexport const fetchM3UFromUrl = async url => {\n  console.log('ðŸ” Duke marrÃ« M3U nga:', url);\n  if (!url || url.trim() === '') {\n    throw new Error('URL nuk mund tÃ« jetÃ« bosh');\n  }\n\n  // 1. Provimi pa proxy - me mode 'no-cors'\n  try {\n    console.log('ðŸ“¡ Provo fetch direkt...');\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/x-mpegurl, application/vnd.apple.mpegurl, audio/mpegurl, */*',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      },\n      mode: 'cors',\n      credentials: 'omit'\n    });\n    if (response.ok) {\n      const data = await response.text();\n      console.log('âœ… M3U u mor me sukses pa proxy');\n      return data;\n    } else {\n      console.log('âŒ Fetch direkt dÃ«shtoi me status:', response.status);\n    }\n  } catch (error) {\n    console.log('âŒ Fetch direkt error:', error.message);\n  }\n\n  // 2. Provimi me proxy - tÃ« gjitha opsionet\n  console.log('ðŸ”„ Duke provuar proxy-t...');\n  for (const proxy of PROXIES) {\n    try {\n      console.log(`ðŸ“¡ Duke provuar proxy: ${proxy}`);\n      let proxyUrl;\n      if (proxy.includes('?')) {\n        proxyUrl = `${proxy}${encodeURIComponent(url)}`;\n      } else {\n        proxyUrl = `${proxy}${url}`;\n      }\n      const response = await fetch(proxyUrl, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/x-mpegurl, application/vnd.apple.mpegurl, */*',\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n        },\n        mode: 'cors',\n        credentials: 'omit'\n      });\n      if (response.ok) {\n        const data = await response.text();\n        console.log(`âœ… M3U u mor pÃ«rmes proxy: ${proxy}`);\n        return data;\n      }\n    } catch (error) {\n      console.log(`âŒ Proxy ${proxy} dÃ«shtoi:`, error.message);\n    }\n  }\n\n  // 3. Provimi me JSONP pÃ«r disa proxy\n  try {\n    console.log('ðŸ”„ Duke provuar JSONP...');\n    const data = await fetchM3UJsonp(url);\n    if (data) {\n      console.log('âœ… M3U u mor pÃ«rmes JSONP');\n      return data;\n    }\n  } catch (error) {\n    console.log('âŒ JSONP dÃ«shtoi:', error.message);\n  }\n\n  // 4. Provimi me fetch me 'no-cors' (nuk kthen tÃ« dhÃ«na por nuk jep error)\n  try {\n    console.log('ðŸ”„ Duke provuar no-cors mode...');\n    await fetch(url, {\n      mode: 'no-cors'\n    });\n    // Nuk mund tÃ« marrim tÃ« dhÃ«na me no-cors, por serveri mund ta pranojÃ« kÃ«rkesÃ«n\n  } catch (error) {\n    console.log('âŒ No-cors dÃ«shtoi:', error.message);\n  }\n  throw new Error('Nuk arrihet tÃ« ngarkohet M3U nga URL e dhÃ«nÃ«. AsnjÃ« proxy nuk funksionoi.');\n};\n\n/**\r\n * Funksioni pÃ«r JSONP\r\n */\nconst fetchM3UJsonp = url => {\n  return new Promise((resolve, reject) => {\n    const callbackName = `jsonp_callback_${Date.now()}`;\n    const timeout = setTimeout(() => {\n      cleanup();\n      reject(new Error('JSONP timeout'));\n    }, 10000);\n    window[callbackName] = data => {\n      cleanup();\n      resolve(data);\n    };\n    const script = document.createElement('script');\n    script.src = `${url}${url.includes('?') ? '&' : '?'}callback=${callbackName}`;\n    script.async = true;\n    script.onerror = () => {\n      cleanup();\n      reject(new Error('JSONP script error'));\n    };\n    const cleanup = () => {\n      clearTimeout(timeout);\n      delete window[callbackName];\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n    };\n    document.head.appendChild(script);\n  });\n};\n\n/**\r\n * Verifikon nÃ«se pÃ«rmbajtja Ã«shtÃ« M3U e vlefshme\r\n */\nexport const isValidM3U = content => {\n  if (!content || typeof content !== 'string') return false;\n  const trimmed = content.trim();\n  return trimmed.startsWith('#EXTM3U') || trimmed.includes('#EXTINF:');\n};\n\n/**\r\n * Parsimon M3U nÃ« kanale - VERSIONI I PÃ‹RMIRÃ‹SUAR\r\n */\nexport const parseM3U = content => {\n  if (!content || typeof content !== 'string') {\n    throw new Error('PÃ«rmbajtja M3U Ã«shtÃ« e pavlefshme');\n  }\n  if (!isValidM3U(content)) {\n    console.warn('âš ï¸ PÃ«rmbajtja nuk fillon me #EXTM3U, por po pÃ«rpiqemi ta parsojmÃ«...');\n  }\n  const lines = content.split('\\n');\n  const channels = [];\n  let currentChannel = null;\n  let lineNumber = 0;\n  for (const line of lines) {\n    lineNumber++;\n    const trimmedLine = line.trim();\n    if (trimmedLine === '' || trimmedLine.startsWith('#')) {\n      // Skip empty lines and comments\n      if (trimmedLine.startsWith('#EXTINF:')) {\n        // Parse EXTINF line\n        try {\n          const match = trimmedLine.match(/#EXTINF:(-?\\d+)(?:\\s+(.*?))?,(.*)/);\n          if (match) {\n            var _attributes$match, _attributes$match2, _attributes$match3, _attributes$match4, _attributes$match5, _attributes$match6, _attributes$match7;\n            const duration = match[1];\n            const attributes = match[2] || '';\n            const name = match[3] || 'Pa emÃ«r';\n\n            // Parse tÃ« gjitha atributet\n            const tvgId = ((_attributes$match = attributes.match(/tvg-id=\"([^\"]*)\"/)) === null || _attributes$match === void 0 ? void 0 : _attributes$match[1]) || '';\n            const tvgName = ((_attributes$match2 = attributes.match(/tvg-name=\"([^\"]*)\"/)) === null || _attributes$match2 === void 0 ? void 0 : _attributes$match2[1]) || '';\n            const tvgLogo = ((_attributes$match3 = attributes.match(/tvg-logo=\"([^\"]*)\"/)) === null || _attributes$match3 === void 0 ? void 0 : _attributes$match3[1]) || '';\n            const groupTitle = ((_attributes$match4 = attributes.match(/group-title=\"([^\"]*)\"/)) === null || _attributes$match4 === void 0 ? void 0 : _attributes$match4[1]) || '';\n            const tvgGroup = ((_attributes$match5 = attributes.match(/tvg-group=\"([^\"]*)\"/)) === null || _attributes$match5 === void 0 ? void 0 : _attributes$match5[1]) || '';\n            const tvgCountry = ((_attributes$match6 = attributes.match(/tvg-country=\"([^\"]*)\"/)) === null || _attributes$match6 === void 0 ? void 0 : _attributes$match6[1]) || '';\n            const tvgLanguage = ((_attributes$match7 = attributes.match(/tvg-language=\"([^\"]*)\"/)) === null || _attributes$match7 === void 0 ? void 0 : _attributes$match7[1]) || '';\n\n            // PÃ«rdor group-title, nÃ«se nuk ka, pÃ«rdor tvg-group\n            let category = groupTitle;\n            if (!category || category.trim() === '') {\n              category = tvgGroup;\n            }\n            if (!category || category.trim() === '') {\n              category = 'Pa Kategori';\n            }\n            currentChannel = {\n              id: `m3u_${Date.now()}_${Math.random()}`,\n              stream_id: `m3u_${Date.now()}_${Math.random()}`,\n              name: name,\n              title: name,\n              duration: parseInt(duration) || -1,\n              tvgId,\n              tvgName,\n              tvgLogo,\n              tvgGroup,\n              tvgCountry,\n              tvgLanguage,\n              stream_icon: tvgLogo,\n              logo: tvgLogo,\n              groupTitle: category,\n              category: category,\n              category_name: category,\n              group: category,\n              url: '',\n              stream_url: '',\n              type: 'live'\n            };\n          }\n        } catch (e) {\n          console.error('Gabim nÃ« parsing EXTINF:', e);\n        }\n      }\n      continue;\n    }\n\n    // Kjo Ã«shtÃ« URL e kanalit\n    if (currentChannel) {\n      // Pastro URL-nÃ«\n      let url = trimmedLine;\n      if (url.startsWith('http://') || url.startsWith('https://')) {\n        currentChannel.url = url;\n        currentChannel.stream_url = url;\n        channels.push(currentChannel);\n      } else {\n        // NdonjÃ«herÃ« URL vjen pa http\n        currentChannel.url = `http://${url}`;\n        currentChannel.stream_url = `http://${url}`;\n        channels.push(currentChannel);\n      }\n      currentChannel = null;\n    }\n  }\n  console.log(`ðŸ“Š U parseuan ${channels.length} kanale nga M3U`);\n\n  // Shfaq kategoritÃ« e gjetura pÃ«r debug\n  const categories = [...new Set(channels.map(ch => ch.groupTitle).filter(Boolean))];\n  console.log('ðŸ“ KategoritÃ« e gjetura:', categories);\n  return channels;\n};\n\n/**\r\n * Ruaj M3U lokalisht\r\n */\nexport const saveM3ULocally = (content, filename = 'playlist.m3u') => {\n  try {\n    const blob = new Blob([content], {\n      type: 'application/x-mpegurl'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n    return true;\n  } catch (error) {\n    console.error('Gabim gjatÃ« ruajtjes:', error);\n    return false;\n  }\n};\n\n/**\r\n * KÃ«rkon kanale\r\n */\nexport const searchChannels = (channels, query) => {\n  if (!query || !channels) return channels || [];\n  const searchTerm = query.toLowerCase();\n  return channels.filter(ch => (ch.name || ch.title || '').toLowerCase().includes(searchTerm) || (ch.groupTitle || ch.category_name || '').toLowerCase().includes(searchTerm));\n};\n\n/**\r\n * Grupon kanalet sipas kategorive\r\n */\nexport const groupChannelsByCategory = channels => {\n  if (!channels) return {};\n  return channels.reduce((groups, ch) => {\n    const category = ch.groupTitle || ch.category_name || 'Pa Kategori';\n    if (!groups[category]) groups[category] = [];\n    groups[category].push(ch);\n    return groups;\n  }, {});\n};\n\n/**\r\n * Merr informacion tÃ« detajuar tÃ« kanalit\r\n */\nexport const getChannelInfo = channel => {\n  return {\n    id: channel.stream_id || channel.id,\n    name: channel.name || channel.title,\n    logo: channel.stream_icon || channel.tvgLogo || channel.logo,\n    category: channel.groupTitle || channel.category_name,\n    url: channel.stream_url || channel.url\n  };\n};\n\n/**\r\n * Teston URL e kanalit\r\n */\nexport const testChannelUrl = async url => {\n  try {\n    const response = await fetch(url, {\n      method: 'HEAD'\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\n\n// ================ FUNKSIONET PÃ‹R XTREAM CODES API ================\n\n/**\r\n * Login nÃ« Xtream server\r\n */\nexport const xtreamLogin = async (server, username, password) => {\n  try {\n    console.log('ðŸ”‘ Duke u kyÃ§ur nÃ« Xtream server...');\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        if (data.user_info && data.user_info.auth) {\n          return {\n            success: true,\n            data: data.user_info\n          };\n        }\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          if (data.user_info && data.user_info.auth) {\n            return {\n              success: true,\n              data: data.user_info\n            };\n          }\n        }\n      } catch (e) {}\n    }\n    return {\n      success: false,\n      error: 'Kredencialet e gabuara ose serveri nuk pÃ«rgjigjet'\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\n\n/**\r\n * Merr tÃ« gjitha pÃ«rmbajtjet (live, movies, series)\r\n */\nexport const getAllContent = async (server, username, password) => {\n  try {\n    const [live, movies, series] = await Promise.all([getXtreamChannels(server, username, password, 'live'), getXtreamChannels(server, username, password, 'movie'), getXtreamSeries(server, username, password)]);\n    return {\n      live: live || [],\n      movies: movies || [],\n      series: series || []\n    };\n  } catch (error) {\n    console.error('Gabim nÃ« getAllContent:', error);\n    return {\n      live: [],\n      movies: [],\n      series: []\n    };\n  }\n};\n\n/**\r\n * Merr tÃ« gjitha kategoritÃ«\r\n */\nexport const getAllCategories = async (server, username, password) => {\n  try {\n    const [liveCats, movieCats, seriesCats] = await Promise.all([getXtreamCategories(server, username, password, 'live'), getXtreamCategories(server, username, password, 'movie'), getXtreamCategories(server, username, password, 'series')]);\n    return {\n      live: liveCats || [],\n      movies: movieCats || [],\n      series: seriesCats || []\n    };\n  } catch (error) {\n    console.error('Gabim nÃ« getAllCategories:', error);\n    return {\n      live: [],\n      movies: [],\n      series: []\n    };\n  }\n};\n\n/**\r\n * Merr kanalet Xtream\r\n */\nexport const getXtreamChannels = async (server, username, password, type = 'live') => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_streams`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error(`Gabim nÃ« getXtreamChannels (${type}):`, error);\n    return [];\n  }\n};\n\n/**\r\n * Merr serialet Xtream\r\n */\nexport const getXtreamSeries = async (server, username, password) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error('Gabim nÃ« getXtreamSeries:', error);\n    return [];\n  }\n};\n\n/**\r\n * Merr kategoritÃ« Xtream\r\n */\nexport const getXtreamCategories = async (server, username, password, type = 'live') => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_categories`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return Array.isArray(data) ? data : [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return Array.isArray(data) ? data : [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error(`Gabim nÃ« getXtreamCategories (${type}):`, error);\n    return [];\n  }\n};\n\n/**\r\n * NdÃ«rton URL pÃ«r stream\r\n */\nexport const buildStreamUrl = (type, id, server, username, password, extension = 'm3u8') => {\n  if (!server || !username || !password || !id) {\n    throw new Error('MungojnÃ« parametrat pÃ«r Xtream stream');\n  }\n  let baseUrl = server.replace(/^https?:\\/\\//, '');\n  switch (type) {\n    case 'live':\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\n    case 'movie':\n      return `http://${baseUrl}/movie/${username}/${password}/${id}.${extension}`;\n    case 'series':\n      return `http://${baseUrl}/series/${username}/${password}/${id}.${extension}`;\n    default:\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\n  }\n};\n\n/**\r\n * Merr EPG (Electronic Program Guide)\r\n */\nexport const getEPG = async (server, username, password, streamId = null) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_epg`;\n    if (streamId) {\n      apiUrl += `&stream_id=${streamId}`;\n    }\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return data.epg_listings || [];\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return data.epg_listings || [];\n        }\n      } catch (e) {}\n    }\n    return [];\n  } catch (error) {\n    console.error('Gabim nÃ« getEPG:', error);\n    return [];\n  }\n};\n\n/**\r\n * Merr informacion tÃ« serverit\r\n */\nexport const getXtreamServerInfo = async (server, username, password) => {\n  try {\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\n\n    // Provo direkt\n    try {\n      const response = await fetch(apiUrl);\n      if (response.ok) {\n        const data = await response.json();\n        return {\n          success: true,\n          user: data.user_info,\n          server: data.server_info\n        };\n      }\n    } catch (e) {}\n\n    // Provo me proxy\n    for (const proxy of PROXIES) {\n      try {\n        let proxyUrl;\n        if (proxy.includes('?')) {\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\n        } else {\n          proxyUrl = `${proxy}${apiUrl}`;\n        }\n        const response = await fetch(proxyUrl);\n        if (response.ok) {\n          const data = await response.json();\n          return {\n            success: true,\n            user: data.user_info,\n            server: data.server_info\n          };\n        }\n      } catch (e) {}\n    }\n    return {\n      success: false,\n      error: 'Nuk arrihet tÃ« marrÃ« informacion tÃ« serverit'\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\n\n/**\r\n * Verifikon kredencialet Xtream\r\n */\nexport const verifyXtreamCredentials = async (server, username, password) => {\n  const info = await getXtreamServerInfo(server, username, password);\n  return {\n    valid: info.success,\n    data: info.user,\n    error: info.error\n  };\n};\n\n// ================ EKSPORTET ================\n\nexport default {\n  fetchM3UFromUrl,\n  isValidM3U,\n  parseM3U,\n  saveM3ULocally,\n  searchChannels,\n  groupChannelsByCategory,\n  getChannelInfo,\n  testChannelUrl,\n  xtreamLogin,\n  getAllContent,\n  getAllCategories,\n  getXtreamChannels,\n  getXtreamSeries,\n  getXtreamCategories,\n  buildStreamUrl,\n  getEPG,\n  getXtreamServerInfo,\n  verifyXtreamCredentials\n};","map":{"version":3,"names":["PROXIES","fetchM3UFromUrl","url","console","log","trim","Error","response","fetch","method","headers","mode","credentials","ok","data","text","status","error","message","proxy","proxyUrl","includes","encodeURIComponent","fetchM3UJsonp","Promise","resolve","reject","callbackName","Date","now","timeout","setTimeout","cleanup","window","script","document","createElement","src","async","onerror","clearTimeout","parentNode","removeChild","head","appendChild","isValidM3U","content","trimmed","startsWith","parseM3U","warn","lines","split","channels","currentChannel","lineNumber","line","trimmedLine","match","_attributes$match","_attributes$match2","_attributes$match3","_attributes$match4","_attributes$match5","_attributes$match6","_attributes$match7","duration","attributes","name","tvgId","tvgName","tvgLogo","groupTitle","tvgGroup","tvgCountry","tvgLanguage","category","id","Math","random","stream_id","title","parseInt","stream_icon","logo","category_name","group","stream_url","type","e","push","length","categories","Set","map","ch","filter","Boolean","saveM3ULocally","filename","blob","Blob","URL","createObjectURL","a","href","download","click","revokeObjectURL","searchChannels","query","searchTerm","toLowerCase","groupChannelsByCategory","reduce","groups","getChannelInfo","channel","testChannelUrl","xtreamLogin","server","username","password","baseUrl","replace","apiUrl","json","user_info","auth","success","getAllContent","live","movies","series","all","getXtreamChannels","getXtreamSeries","getAllCategories","liveCats","movieCats","seriesCats","getXtreamCategories","Array","isArray","buildStreamUrl","extension","getEPG","streamId","epg_listings","getXtreamServerInfo","user","server_info","verifyXtreamCredentials","info","valid"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/xtream.jsx"],"sourcesContent":["// src/services/xtream.js\r\n\r\n// ================ PROXY KONFIGURIMI ================\r\nconst PROXIES = [\r\n  'https://api.allorigins.win/raw?url=',\r\n  'https://corsproxy.io/?',\r\n  'https://cors-anywhere.herokuapp.com/',\r\n  'https://proxy.cors.sh/',\r\n  'https://thingproxy.freeboard.io/fetch/',\r\n  'https://api.codetabs.com/v1/proxy?quest=',\r\n  'https://cors.eu.org/',\r\n  'https://crossorigin.me/',\r\n  'https://cors-proxy.htmldriven.com/?url='\r\n];\r\n\r\n// ================ FUNKSIONET BAZÃ‹ PÃ‹R M3U ================\r\n\r\n/**\r\n * Merr M3U nga URL me mbÃ«shtetje CORS - VERSIONI I RREGULLUAR\r\n */\r\nexport const fetchM3UFromUrl = async (url) => {\r\n  console.log('ðŸ” Duke marrÃ« M3U nga:', url);\r\n  \r\n  if (!url || url.trim() === '') {\r\n    throw new Error('URL nuk mund tÃ« jetÃ« bosh');\r\n  }\r\n\r\n  // 1. Provimi pa proxy - me mode 'no-cors'\r\n  try {\r\n    console.log('ðŸ“¡ Provo fetch direkt...');\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/x-mpegurl, application/vnd.apple.mpegurl, audio/mpegurl, */*',\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\r\n      },\r\n      mode: 'cors',\r\n      credentials: 'omit'\r\n    });\r\n    \r\n    if (response.ok) {\r\n      const data = await response.text();\r\n      console.log('âœ… M3U u mor me sukses pa proxy');\r\n      return data;\r\n    } else {\r\n      console.log('âŒ Fetch direkt dÃ«shtoi me status:', response.status);\r\n    }\r\n  } catch (error) {\r\n    console.log('âŒ Fetch direkt error:', error.message);\r\n  }\r\n\r\n  // 2. Provimi me proxy - tÃ« gjitha opsionet\r\n  console.log('ðŸ”„ Duke provuar proxy-t...');\r\n  \r\n  for (const proxy of PROXIES) {\r\n    try {\r\n      console.log(`ðŸ“¡ Duke provuar proxy: ${proxy}`);\r\n      \r\n      let proxyUrl;\r\n      if (proxy.includes('?')) {\r\n        proxyUrl = `${proxy}${encodeURIComponent(url)}`;\r\n      } else {\r\n        proxyUrl = `${proxy}${url}`;\r\n      }\r\n      \r\n      const response = await fetch(proxyUrl, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/x-mpegurl, application/vnd.apple.mpegurl, */*',\r\n          'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\r\n        },\r\n        mode: 'cors',\r\n        credentials: 'omit'\r\n      });\r\n      \r\n      if (response.ok) {\r\n        const data = await response.text();\r\n        console.log(`âœ… M3U u mor pÃ«rmes proxy: ${proxy}`);\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.log(`âŒ Proxy ${proxy} dÃ«shtoi:`, error.message);\r\n    }\r\n  }\r\n\r\n  // 3. Provimi me JSONP pÃ«r disa proxy\r\n  try {\r\n    console.log('ðŸ”„ Duke provuar JSONP...');\r\n    const data = await fetchM3UJsonp(url);\r\n    if (data) {\r\n      console.log('âœ… M3U u mor pÃ«rmes JSONP');\r\n      return data;\r\n    }\r\n  } catch (error) {\r\n    console.log('âŒ JSONP dÃ«shtoi:', error.message);\r\n  }\r\n\r\n  // 4. Provimi me fetch me 'no-cors' (nuk kthen tÃ« dhÃ«na por nuk jep error)\r\n  try {\r\n    console.log('ðŸ”„ Duke provuar no-cors mode...');\r\n    await fetch(url, { mode: 'no-cors' });\r\n    // Nuk mund tÃ« marrim tÃ« dhÃ«na me no-cors, por serveri mund ta pranojÃ« kÃ«rkesÃ«n\r\n  } catch (error) {\r\n    console.log('âŒ No-cors dÃ«shtoi:', error.message);\r\n  }\r\n\r\n  throw new Error('Nuk arrihet tÃ« ngarkohet M3U nga URL e dhÃ«nÃ«. AsnjÃ« proxy nuk funksionoi.');\r\n};\r\n\r\n/**\r\n * Funksioni pÃ«r JSONP\r\n */\r\nconst fetchM3UJsonp = (url) => {\r\n  return new Promise((resolve, reject) => {\r\n    const callbackName = `jsonp_callback_${Date.now()}`;\r\n    const timeout = setTimeout(() => {\r\n      cleanup();\r\n      reject(new Error('JSONP timeout'));\r\n    }, 10000);\r\n\r\n    window[callbackName] = (data) => {\r\n      cleanup();\r\n      resolve(data);\r\n    };\r\n\r\n    const script = document.createElement('script');\r\n    script.src = `${url}${url.includes('?') ? '&' : '?'}callback=${callbackName}`;\r\n    script.async = true;\r\n    script.onerror = () => {\r\n      cleanup();\r\n      reject(new Error('JSONP script error'));\r\n    };\r\n\r\n    const cleanup = () => {\r\n      clearTimeout(timeout);\r\n      delete window[callbackName];\r\n      if (script.parentNode) {\r\n        script.parentNode.removeChild(script);\r\n      }\r\n    };\r\n\r\n    document.head.appendChild(script);\r\n  });\r\n};\r\n\r\n/**\r\n * Verifikon nÃ«se pÃ«rmbajtja Ã«shtÃ« M3U e vlefshme\r\n */\r\nexport const isValidM3U = (content) => {\r\n  if (!content || typeof content !== 'string') return false;\r\n  const trimmed = content.trim();\r\n  return trimmed.startsWith('#EXTM3U') || trimmed.includes('#EXTINF:');\r\n};\r\n\r\n/**\r\n * Parsimon M3U nÃ« kanale - VERSIONI I PÃ‹RMIRÃ‹SUAR\r\n */\r\nexport const parseM3U = (content) => {\r\n  if (!content || typeof content !== 'string') {\r\n    throw new Error('PÃ«rmbajtja M3U Ã«shtÃ« e pavlefshme');\r\n  }\r\n\r\n  if (!isValidM3U(content)) {\r\n    console.warn('âš ï¸ PÃ«rmbajtja nuk fillon me #EXTM3U, por po pÃ«rpiqemi ta parsojmÃ«...');\r\n  }\r\n\r\n  const lines = content.split('\\n');\r\n  const channels = [];\r\n  let currentChannel = null;\r\n  let lineNumber = 0;\r\n\r\n  for (const line of lines) {\r\n    lineNumber++;\r\n    const trimmedLine = line.trim();\r\n    \r\n    if (trimmedLine === '' || trimmedLine.startsWith('#')) {\r\n      // Skip empty lines and comments\r\n      if (trimmedLine.startsWith('#EXTINF:')) {\r\n        // Parse EXTINF line\r\n        try {\r\n          const match = trimmedLine.match(/#EXTINF:(-?\\d+)(?:\\s+(.*?))?,(.*)/);\r\n          if (match) {\r\n            const duration = match[1];\r\n            const attributes = match[2] || '';\r\n            const name = match[3] || 'Pa emÃ«r';\r\n            \r\n            // Parse tÃ« gjitha atributet\r\n            const tvgId = attributes.match(/tvg-id=\"([^\"]*)\"/)?.[1] || '';\r\n            const tvgName = attributes.match(/tvg-name=\"([^\"]*)\"/)?.[1] || '';\r\n            const tvgLogo = attributes.match(/tvg-logo=\"([^\"]*)\"/)?.[1] || '';\r\n            const groupTitle = attributes.match(/group-title=\"([^\"]*)\"/)?.[1] || '';\r\n            const tvgGroup = attributes.match(/tvg-group=\"([^\"]*)\"/)?.[1] || '';\r\n            const tvgCountry = attributes.match(/tvg-country=\"([^\"]*)\"/)?.[1] || '';\r\n            const tvgLanguage = attributes.match(/tvg-language=\"([^\"]*)\"/)?.[1] || '';\r\n            \r\n            // PÃ«rdor group-title, nÃ«se nuk ka, pÃ«rdor tvg-group\r\n            let category = groupTitle;\r\n            if (!category || category.trim() === '') {\r\n              category = tvgGroup;\r\n            }\r\n            if (!category || category.trim() === '') {\r\n              category = 'Pa Kategori';\r\n            }\r\n            \r\n            currentChannel = {\r\n              id: `m3u_${Date.now()}_${Math.random()}`,\r\n              stream_id: `m3u_${Date.now()}_${Math.random()}`,\r\n              name: name,\r\n              title: name,\r\n              duration: parseInt(duration) || -1,\r\n              tvgId,\r\n              tvgName,\r\n              tvgLogo,\r\n              tvgGroup,\r\n              tvgCountry,\r\n              tvgLanguage,\r\n              stream_icon: tvgLogo,\r\n              logo: tvgLogo,\r\n              groupTitle: category,\r\n              category: category,\r\n              category_name: category,\r\n              group: category,\r\n              url: '',\r\n              stream_url: '',\r\n              type: 'live'\r\n            };\r\n          }\r\n        } catch (e) {\r\n          console.error('Gabim nÃ« parsing EXTINF:', e);\r\n        }\r\n      }\r\n      continue;\r\n    }\r\n    \r\n    // Kjo Ã«shtÃ« URL e kanalit\r\n    if (currentChannel) {\r\n      // Pastro URL-nÃ«\r\n      let url = trimmedLine;\r\n      if (url.startsWith('http://') || url.startsWith('https://')) {\r\n        currentChannel.url = url;\r\n        currentChannel.stream_url = url;\r\n        channels.push(currentChannel);\r\n      } else {\r\n        // NdonjÃ«herÃ« URL vjen pa http\r\n        currentChannel.url = `http://${url}`;\r\n        currentChannel.stream_url = `http://${url}`;\r\n        channels.push(currentChannel);\r\n      }\r\n      currentChannel = null;\r\n    }\r\n  }\r\n\r\n  console.log(`ðŸ“Š U parseuan ${channels.length} kanale nga M3U`);\r\n  \r\n  // Shfaq kategoritÃ« e gjetura pÃ«r debug\r\n  const categories = [...new Set(channels.map(ch => ch.groupTitle).filter(Boolean))];\r\n  console.log('ðŸ“ KategoritÃ« e gjetura:', categories);\r\n  \r\n  return channels;\r\n};\r\n\r\n/**\r\n * Ruaj M3U lokalisht\r\n */\r\nexport const saveM3ULocally = (content, filename = 'playlist.m3u') => {\r\n  try {\r\n    const blob = new Blob([content], { type: 'application/x-mpegurl' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = filename;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Gabim gjatÃ« ruajtjes:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * KÃ«rkon kanale\r\n */\r\nexport const searchChannels = (channels, query) => {\r\n  if (!query || !channels) return channels || [];\r\n  const searchTerm = query.toLowerCase();\r\n  return channels.filter(ch => \r\n    (ch.name || ch.title || '').toLowerCase().includes(searchTerm) ||\r\n    (ch.groupTitle || ch.category_name || '').toLowerCase().includes(searchTerm)\r\n  );\r\n};\r\n\r\n/**\r\n * Grupon kanalet sipas kategorive\r\n */\r\nexport const groupChannelsByCategory = (channels) => {\r\n  if (!channels) return {};\r\n  return channels.reduce((groups, ch) => {\r\n    const category = ch.groupTitle || ch.category_name || 'Pa Kategori';\r\n    if (!groups[category]) groups[category] = [];\r\n    groups[category].push(ch);\r\n    return groups;\r\n  }, {});\r\n};\r\n\r\n/**\r\n * Merr informacion tÃ« detajuar tÃ« kanalit\r\n */\r\nexport const getChannelInfo = (channel) => {\r\n  return {\r\n    id: channel.stream_id || channel.id,\r\n    name: channel.name || channel.title,\r\n    logo: channel.stream_icon || channel.tvgLogo || channel.logo,\r\n    category: channel.groupTitle || channel.category_name,\r\n    url: channel.stream_url || channel.url\r\n  };\r\n};\r\n\r\n/**\r\n * Teston URL e kanalit\r\n */\r\nexport const testChannelUrl = async (url) => {\r\n  try {\r\n    const response = await fetch(url, { method: 'HEAD' });\r\n    return response.ok;\r\n  } catch {\r\n    return false;\r\n  }\r\n};\r\n\r\n// ================ FUNKSIONET PÃ‹R XTREAM CODES API ================\r\n\r\n/**\r\n * Login nÃ« Xtream server\r\n */\r\nexport const xtreamLogin = async (server, username, password) => {\r\n  try {\r\n    console.log('ðŸ”‘ Duke u kyÃ§ur nÃ« Xtream server...');\r\n    \r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        if (data.user_info && data.user_info.auth) {\r\n          return { success: true, data: data.user_info };\r\n        }\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          if (data.user_info && data.user_info.auth) {\r\n            return { success: true, data: data.user_info };\r\n          }\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return { success: false, error: 'Kredencialet e gabuara ose serveri nuk pÃ«rgjigjet' };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr tÃ« gjitha pÃ«rmbajtjet (live, movies, series)\r\n */\r\nexport const getAllContent = async (server, username, password) => {\r\n  try {\r\n    const [live, movies, series] = await Promise.all([\r\n      getXtreamChannels(server, username, password, 'live'),\r\n      getXtreamChannels(server, username, password, 'movie'),\r\n      getXtreamSeries(server, username, password)\r\n    ]);\r\n\r\n    return {\r\n      live: live || [],\r\n      movies: movies || [],\r\n      series: series || []\r\n    };\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getAllContent:', error);\r\n    return { live: [], movies: [], series: [] };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr tÃ« gjitha kategoritÃ«\r\n */\r\nexport const getAllCategories = async (server, username, password) => {\r\n  try {\r\n    const [liveCats, movieCats, seriesCats] = await Promise.all([\r\n      getXtreamCategories(server, username, password, 'live'),\r\n      getXtreamCategories(server, username, password, 'movie'),\r\n      getXtreamCategories(server, username, password, 'series')\r\n    ]);\r\n\r\n    return {\r\n      live: liveCats || [],\r\n      movies: movieCats || [],\r\n      series: seriesCats || []\r\n    };\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getAllCategories:', error);\r\n    return { live: [], movies: [], series: [] };\r\n  }\r\n};\r\n\r\n/**\r\n * Merr kanalet Xtream\r\n */\r\nexport const getXtreamChannels = async (server, username, password, type = 'live') => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_streams`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error(`Gabim nÃ« getXtreamChannels (${type}):`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr serialet Xtream\r\n */\r\nexport const getXtreamSeries = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_series`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getXtreamSeries:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr kategoritÃ« Xtream\r\n */\r\nexport const getXtreamCategories = async (server, username, password, type = 'live') => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_${type}_categories`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return Array.isArray(data) ? data : [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return Array.isArray(data) ? data : [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error(`Gabim nÃ« getXtreamCategories (${type}):`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * NdÃ«rton URL pÃ«r stream\r\n */\r\nexport const buildStreamUrl = (type, id, server, username, password, extension = 'm3u8') => {\r\n  if (!server || !username || !password || !id) {\r\n    throw new Error('MungojnÃ« parametrat pÃ«r Xtream stream');\r\n  }\r\n\r\n  let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n  \r\n  switch (type) {\r\n    case 'live':\r\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\r\n    case 'movie':\r\n      return `http://${baseUrl}/movie/${username}/${password}/${id}.${extension}`;\r\n    case 'series':\r\n      return `http://${baseUrl}/series/${username}/${password}/${id}.${extension}`;\r\n    default:\r\n      return `http://${baseUrl}/live/${username}/${password}/${id}.${extension}`;\r\n  }\r\n};\r\n\r\n/**\r\n * Merr EPG (Electronic Program Guide)\r\n */\r\nexport const getEPG = async (server, username, password, streamId = null) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}&action=get_epg`;\r\n    \r\n    if (streamId) {\r\n      apiUrl += `&stream_id=${streamId}`;\r\n    }\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return data.epg_listings || [];\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return data.epg_listings || [];\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Gabim nÃ« getEPG:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Merr informacion tÃ« serverit\r\n */\r\nexport const getXtreamServerInfo = async (server, username, password) => {\r\n  try {\r\n    let baseUrl = server.replace(/^https?:\\/\\//, '');\r\n    let apiUrl = `http://${baseUrl}/player_api.php?username=${username}&password=${password}`;\r\n\r\n    // Provo direkt\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        return { success: true, user: data.user_info, server: data.server_info };\r\n      }\r\n    } catch (e) {}\r\n\r\n    // Provo me proxy\r\n    for (const proxy of PROXIES) {\r\n      try {\r\n        let proxyUrl;\r\n        if (proxy.includes('?')) {\r\n          proxyUrl = `${proxy}${encodeURIComponent(apiUrl)}`;\r\n        } else {\r\n          proxyUrl = `${proxy}${apiUrl}`;\r\n        }\r\n        const response = await fetch(proxyUrl);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return { success: true, user: data.user_info, server: data.server_info };\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return { success: false, error: 'Nuk arrihet tÃ« marrÃ« informacion tÃ« serverit' };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Verifikon kredencialet Xtream\r\n */\r\nexport const verifyXtreamCredentials = async (server, username, password) => {\r\n  const info = await getXtreamServerInfo(server, username, password);\r\n  return {\r\n    valid: info.success,\r\n    data: info.user,\r\n    error: info.error\r\n  };\r\n};\r\n\r\n// ================ EKSPORTET ================\r\n\r\nexport default {\r\n  fetchM3UFromUrl,\r\n  isValidM3U,\r\n  parseM3U,\r\n  saveM3ULocally,\r\n  searchChannels,\r\n  groupChannelsByCategory,\r\n  getChannelInfo,\r\n  testChannelUrl,\r\n  xtreamLogin,\r\n  getAllContent,\r\n  getAllCategories,\r\n  getXtreamChannels,\r\n  getXtreamSeries,\r\n  getXtreamCategories,\r\n  buildStreamUrl,\r\n  getEPG,\r\n  getXtreamServerInfo,\r\n  verifyXtreamCredentials\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}