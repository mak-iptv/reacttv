{"ast":null,"code":"// iptvService.jsx - version i plotë\n// Funksion universal për IPTV API (përdor proxy)\nconst fetchFromProxy = async (server, user, pass, action) => {\n  try {\n    const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${user}&pass=${pass}&action=${action}`;\n    console.log(\"Fetching IPTV API:\", url);\n    const res = await fetch(url);\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n    const data = await res.json();\n    console.log(`Data received for ${action}:`, data);\n    return data;\n  } catch (err) {\n    console.error(`Error fetching ${action}:`, err);\n    return null;\n  }\n};\n\n// Funksion për M3U (përdor proxy)\nconst fetchM3U = async url => {\n  try {\n    console.log(\"Fetching M3U:\", url);\n    const res = await fetch(`/api/m3u?url=${encodeURIComponent(url)}`);\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\n    const text = await res.text();\n    return text;\n  } catch (err) {\n    console.error(\"M3U fetch error:\", err);\n    return null;\n  }\n};\n\n// Funksion për të ndërtuar stream URL\nconst buildStream = (server, user, pass, type, id) => {\n  console.log('Building stream URL:', {\n    server,\n    user,\n    pass,\n    type,\n    id\n  });\n  if (!server || !user || !pass || !id) {\n    console.error('Missing parameters for buildStream:', {\n      server,\n      user,\n      pass,\n      type,\n      id\n    });\n    return '';\n  }\n  const cleanServer = server.replace(/\\/$/, \"\");\n  switch (type) {\n    case \"live\":\n      return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\n    case \"movie\":\n      return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\n    case \"series\":\n      return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\n    default:\n      return `${cleanServer}/${type}/${user}/${pass}/${id}.m3u8`;\n  }\n};\n\n// Funksionet e gatshme për të thirrur API-të\nconst getLive = async (server, user, pass) => {\n  console.log(\"Fetching live streams...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_live_streams\");\n  return data || [];\n};\nconst getMovies = async (server, user, pass) => {\n  console.log(\"Fetching movies...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_vod_streams\");\n  return data || [];\n};\nconst getSeries = async (server, user, pass) => {\n  console.log(\"Fetching series...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_series\");\n  return data || [];\n};\nconst getCategories = async (server, user, pass) => {\n  console.log(\"Fetching categories...\");\n  const data = await fetchFromProxy(server, user, pass, \"get_live_categories\");\n  return data || [];\n};\n\n// Opsional: funksion autentikimi\nconst authenticate = async (server, user, pass) => {\n  console.log(\"Authenticating...\");\n  const data = await fetchFromProxy(server, user, pass, \"handshake\");\n  return data;\n};\n\n// Eksporti i të gjitha funksioneve\nexport { fetchM3U, buildStream, getLive, getMovies, getSeries, getCategories, authenticate, fetchFromProxy };\n\n// Ose eksport default nëse preferoni\nexport default {\n  fetchM3U,\n  buildStream,\n  getLive,\n  getMovies,\n  getSeries,\n  getCategories,\n  authenticate,\n  fetchFromProxy\n};","map":{"version":3,"names":["fetchFromProxy","server","user","pass","action","url","encodeURIComponent","console","log","res","fetch","ok","Error","status","statusText","data","json","err","error","fetchM3U","text","buildStream","type","id","cleanServer","replace","getLive","getMovies","getSeries","getCategories","authenticate"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/services/iptvService.js"],"sourcesContent":["// iptvService.jsx - version i plotë\r\n// Funksion universal për IPTV API (përdor proxy)\r\nconst fetchFromProxy = async (server, user, pass, action) => {\r\n  try {\r\n    const url = `/api/iptv?server=${encodeURIComponent(server)}&user=${user}&pass=${pass}&action=${action}`;\r\n    console.log(\"Fetching IPTV API:\", url);\r\n\r\n    const res = await fetch(url);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n\r\n    const data = await res.json();\r\n    console.log(`Data received for ${action}:`, data);\r\n    return data;\r\n  } catch (err) {\r\n    console.error(`Error fetching ${action}:`, err);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Funksion për M3U (përdor proxy)\r\nconst fetchM3U = async (url) => {\r\n  try {\r\n    console.log(\"Fetching M3U:\", url);\r\n    const res = await fetch(`/api/m3u?url=${encodeURIComponent(url)}`);\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}: ${res.statusText}`);\r\n\r\n    const text = await res.text();\r\n    return text;\r\n  } catch (err) {\r\n    console.error(\"M3U fetch error:\", err);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Funksion për të ndërtuar stream URL\r\nconst buildStream = (server, user, pass, type, id) => {\r\n  console.log('Building stream URL:', { server, user, pass, type, id });\r\n  \r\n  if (!server || !user || !pass || !id) {\r\n    console.error('Missing parameters for buildStream:', { server, user, pass, type, id });\r\n    return '';\r\n  }\r\n  \r\n  const cleanServer = server.replace(/\\/$/, \"\");\r\n  switch (type) {\r\n    case \"live\":\r\n      return `${cleanServer}/live/${user}/${pass}/${id}.m3u8`;\r\n    case \"movie\":\r\n      return `${cleanServer}/movie/${user}/${pass}/${id}.m3u8`;\r\n    case \"series\":\r\n      return `${cleanServer}/series/${user}/${pass}/${id}.m3u8`;\r\n    default:\r\n      return `${cleanServer}/${type}/${user}/${pass}/${id}.m3u8`;\r\n  }\r\n};\r\n\r\n// Funksionet e gatshme për të thirrur API-të\r\nconst getLive = async (server, user, pass) => {\r\n  console.log(\"Fetching live streams...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_live_streams\");\r\n  return data || [];\r\n};\r\n\r\nconst getMovies = async (server, user, pass) => {\r\n  console.log(\"Fetching movies...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_vod_streams\");\r\n  return data || [];\r\n};\r\n\r\nconst getSeries = async (server, user, pass) => {\r\n  console.log(\"Fetching series...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_series\");\r\n  return data || [];\r\n};\r\n\r\nconst getCategories = async (server, user, pass) => {\r\n  console.log(\"Fetching categories...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"get_live_categories\");\r\n  return data || [];\r\n};\r\n\r\n// Opsional: funksion autentikimi\r\nconst authenticate = async (server, user, pass) => {\r\n  console.log(\"Authenticating...\");\r\n  const data = await fetchFromProxy(server, user, pass, \"handshake\");\r\n  return data;\r\n};\r\n\r\n// Eksporti i të gjitha funksioneve\r\nexport {\r\n  fetchM3U,\r\n  buildStream,\r\n  getLive,\r\n  getMovies,\r\n  getSeries,\r\n  getCategories,\r\n  authenticate,\r\n  fetchFromProxy\r\n};\r\n\r\n// Ose eksport default nëse preferoni\r\nexport default {\r\n  fetchM3U,\r\n  buildStream,\r\n  getLive,\r\n  getMovies,\r\n  getSeries,\r\n  getCategories,\r\n  authenticate,\r\n  fetchFromProxy\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}