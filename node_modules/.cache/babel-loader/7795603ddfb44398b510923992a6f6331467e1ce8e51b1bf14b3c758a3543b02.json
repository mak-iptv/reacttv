{"ast":null,"code":"// src/components/HlsPlayer.jsx - pjesa ku raportohet errori\n\n// Ndrysho funksionin reportError\nconst reportError = useCallback(errorData => {\n  if (!errorReportedRef.current && onError) {\n    errorReportedRef.current = true;\n    // Sigurohu q√´ errorData t√´ jet√´ gjithmon√´ objekt\n    onError(errorData || {\n      type: 'unknown',\n      details: 'Gabim i panjohur'\n    });\n\n    // Reset after 2 seconds\n    setTimeout(() => {\n      errorReportedRef.current = false;\n    }, 2000);\n  }\n}, [onError]);\n\n// N√´ pjes√´n e video error:\nconst onVideoError = () => {\n  var _videoRef$current;\n  const videoError = (_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.error;\n  console.error('üé¨ Video error:', {\n    code: videoError === null || videoError === void 0 ? void 0 : videoError.code,\n    message: videoError === null || videoError === void 0 ? void 0 : videoError.message\n  });\n\n  // Mos shfaq error p√´r aborte normale\n  if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 4) {\n    setError('Formati i videos nuk mb√´shtetet');\n    reportError({\n      type: 'videoError',\n      message: 'Formati i videos nuk mb√´shtetet',\n      code: 4\n    });\n  } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 3) {\n    setError('Gabim n√´ dekodimin e videos');\n    reportError({\n      type: 'videoError',\n      message: 'Gabim n√´ dekodimin e videos',\n      code: 3\n    });\n  } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 2) {\n    setError('Gabim n√´ rrjet');\n    reportError({\n      type: 'videoError',\n      message: 'Gabim n√´ rrjet',\n      code: 2\n    });\n  } else if ((videoError === null || videoError === void 0 ? void 0 : videoError.code) === 1) {\n    console.log('Video loading aborted');\n    // Mos raporto error p√´r abort\n  } else if (videoError) {\n    setError('Gabim n√´ ngarkimin e videos');\n    reportError({\n      type: 'videoError',\n      message: videoError.message || 'Gabim n√´ ngarkimin e videos',\n      code: videoError.code\n    });\n  }\n};\n\n// N√´ pjes√´n e HLS error:\nhls.on(Hls.Events.ERROR, (event, data) => {\n  console.error('‚ùå HLS error:', data);\n  if (data.fatal) {\n    switch (data.type) {\n      case Hls.ErrorTypes.NETWORK_ERROR:\n        console.log('Network error, trying to recover...');\n        hls.startLoad();\n        break;\n      case Hls.ErrorTypes.MEDIA_ERROR:\n        console.log('Media error, trying to recover...');\n        hls.recoverMediaError();\n        break;\n      default:\n        console.log('Fatal error, falling back to direct video...');\n        setUseNativeControls(true);\n        if (videoRef.current) {\n          videoRef.current.src = src;\n          videoRef.current.load();\n        }\n        break;\n    }\n  }\n\n  // Raporto error por jo n√´ m√´nyr√´ ciklike\n  if (data.fatal && data.type !== Hls.ErrorTypes.OTHER_ERROR) {\n    reportError({\n      type: 'hlsError',\n      message: `HLS Error: ${data.type}`,\n      details: data.details\n    });\n  }\n});","map":{"version":3,"names":["reportError","useCallback","errorData","errorReportedRef","current","onError","type","details","setTimeout","onVideoError","_videoRef$current","videoError","videoRef","error","console","code","message","setError","log","hls","on","Hls","Events","ERROR","event","data","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","setUseNativeControls","src","load","OTHER_ERROR"],"sources":["C:/Users/rayuv/OneDrive/Documents/GitHub/Reacttv/src/components/HlsPlayer.jsx"],"sourcesContent":["// src/components/HlsPlayer.jsx - pjesa ku raportohet errori\r\n\r\n// Ndrysho funksionin reportError\r\nconst reportError = useCallback((errorData) => {\r\n  if (!errorReportedRef.current && onError) {\r\n    errorReportedRef.current = true;\r\n    // Sigurohu q√´ errorData t√´ jet√´ gjithmon√´ objekt\r\n    onError(errorData || { type: 'unknown', details: 'Gabim i panjohur' });\r\n    \r\n    // Reset after 2 seconds\r\n    setTimeout(() => {\r\n      errorReportedRef.current = false;\r\n    }, 2000);\r\n  }\r\n}, [onError]);\r\n\r\n// N√´ pjes√´n e video error:\r\nconst onVideoError = () => {\r\n  const videoError = videoRef.current?.error;\r\n  console.error('üé¨ Video error:', {\r\n    code: videoError?.code,\r\n    message: videoError?.message\r\n  });\r\n\r\n  // Mos shfaq error p√´r aborte normale\r\n  if (videoError?.code === 4) {\r\n    setError('Formati i videos nuk mb√´shtetet');\r\n    reportError({ \r\n      type: 'videoError', \r\n      message: 'Formati i videos nuk mb√´shtetet',\r\n      code: 4 \r\n    });\r\n  } else if (videoError?.code === 3) {\r\n    setError('Gabim n√´ dekodimin e videos');\r\n    reportError({ \r\n      type: 'videoError', \r\n      message: 'Gabim n√´ dekodimin e videos',\r\n      code: 3 \r\n    });\r\n  } else if (videoError?.code === 2) {\r\n    setError('Gabim n√´ rrjet');\r\n    reportError({ \r\n      type: 'videoError', \r\n      message: 'Gabim n√´ rrjet',\r\n      code: 2 \r\n    });\r\n  } else if (videoError?.code === 1) {\r\n    console.log('Video loading aborted');\r\n    // Mos raporto error p√´r abort\r\n  } else if (videoError) {\r\n    setError('Gabim n√´ ngarkimin e videos');\r\n    reportError({ \r\n      type: 'videoError', \r\n      message: videoError.message || 'Gabim n√´ ngarkimin e videos',\r\n      code: videoError.code \r\n    });\r\n  }\r\n};\r\n\r\n// N√´ pjes√´n e HLS error:\r\nhls.on(Hls.Events.ERROR, (event, data) => {\r\n  console.error('‚ùå HLS error:', data);\r\n  \r\n  if (data.fatal) {\r\n    switch (data.type) {\r\n      case Hls.ErrorTypes.NETWORK_ERROR:\r\n        console.log('Network error, trying to recover...');\r\n        hls.startLoad();\r\n        break;\r\n      case Hls.ErrorTypes.MEDIA_ERROR:\r\n        console.log('Media error, trying to recover...');\r\n        hls.recoverMediaError();\r\n        break;\r\n      default:\r\n        console.log('Fatal error, falling back to direct video...');\r\n        setUseNativeControls(true);\r\n        if (videoRef.current) {\r\n          videoRef.current.src = src;\r\n          videoRef.current.load();\r\n        }\r\n        break;\r\n    }\r\n  }\r\n  \r\n  // Raporto error por jo n√´ m√´nyr√´ ciklike\r\n  if (data.fatal && data.type !== Hls.ErrorTypes.OTHER_ERROR) {\r\n    reportError({ \r\n      type: 'hlsError', \r\n      message: `HLS Error: ${data.type}`,\r\n      details: data.details \r\n    });\r\n  }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}